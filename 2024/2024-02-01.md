# PLCT 开源进展·第 54 期·2024 年 2 月 1 日

## 卷首语
时间步入2月，立春节气已然到来，春节也在眼前了，PLCT的小伙伴们即将迎来2周的春节假期，大家或早或晚地给兔年的忙碌画上句号，陆续开始准备休假、回家、过年啦。律回春晖渐，万象始更新，PLCT给大家拜个早年，祝愿每一位PLCT的小伙伴和每一位PLCT开源进展的读者朋友龙年龙翔万里，乘风而上！

## 本期亮点
年终岁末之际，RISC-V架构也依然在如火如荼地被讨论、传播和推动。
1月中旬，PLCT实验室的项目总监吴伟老师和工程师刘阳参加了由日本RISC-V协会等机构在东京大学举办的2024冬季RISC-V Day活动，会上分享了RuyiSDK的技术路线和最新进展。
1月下旬，吴伟老师又赴阿尔巴尼亚参加了首届中欧RISC-V与计算机体系结构研发合作研讨会，并在会上分享了PLCT实验室对于十年RISC-V生态发展的预测和行动计划。
以RISC-V为桥梁，PLCT实验室的愿景和行动目标也在这次交流中得到了传播，相信通过在RISC-V领域的更多交流和合作，有越来越多的中国的工程师、研究者和企业，都能走出国门，走到世界信息技术的前沿，和来自全球各地的伙伴们达成共识、合作共进，共同推动知识和技术的进步。

## RuyiSDK IDE
IDE部分主要开展了 Eclipse 和 VSCode 对C、Rust、Golang 进行了RISC-V架构上编译和调试现有插件的调研，目前整体来说C、Rust和Golang在RISC-V架构下的交叉编译可走通，但是调试插件还或多或少存在一些问题，缺乏成熟插件甚至无可用调试插件支持。

## RuyiSDK 包管理器

项目地址：https://github.com/ruyisdk/ruyi

切换至双周迭代节奏之后，1 月份 RuyiSDK 发布了两个新版本：0.3 与 0.4，分别对应 RuyiSDK 包管理器的 0.3.0 与 0.4.0 正式版本。您可移步 [GitHub Releases][GitHub Releases] 或 [ISCAS 镜像源][iscas]下载体验。

[GitHub Releases]: https://github.com/ruyisdk/ruyi/releases/tag/0.4.0
[iscas]: https://mirror.iscas.ac.cn/ruyisdk/ruyi/releases/0.4.0/

两个版本的更新内容主要有：

* 增加了软件源新闻消息功能。`ruyi update` 后，如有未读的新闻消息，会输出提示信息。您可用新增的 `ruyi news list` 与 `ruyi news read` 命令阅读这些消息文章。
* 增加了开发板安装器功能：`ruyi device provision`。这是个一步步指导您为手头的 RISC-V 开发板烧写系统镜像、引导器等初始数据的向导。截至 RuyiSDK 0.4，支持了以下的板卡：
    * Allwinner 哪吒 D1
    * Milk-V Duo
    * Milk-V Pioneer
    * Sipeed LicheePi 4A
    * Sipeed Lichee RV
    * StarFive VisionFive
    * StarFive VisionFive2
* `ruyi device provision` 会将 `fastboot` 的调用以 `sudo` 包装了。
* `ruyi self uninstall --purge` 不会忘记删除 `~/.local/state/ruyi` 目录了。
* 从软件源下载文件失败时，会提供一些有助于用户自助排查问题的提示讯息了。
* 为提供更稳定的服务，RuyiSDK 软件源仓库现已搬迁至 GitHub。
* 在 RuyiSDK 软件源中，新增打包了以下内容：
    * 适用于 amd64 架构的 RISC-V QEMU 系统模拟器二进制包，
    * 适用于 riscv64 架构的 DynamoRIO 二进制包。

## V8
1. 在RISC-V上支持WASM OOB trap handler 特性
   5227604: [riscv] Enable OOB trap handler | https://chromium-review.googlesource.com/c/v8/v8/+/5227604
3. 清理maglev，为在RISC-V上实现malgev准备
   5252429: [maglev] Replace CompareRoot/JumpIf by JumpIfRoot or JumpIfNotRoot | https://chromium-review.googlesource.com/c/v8/v8/+/5252429  
4. V8目前已经可以在Android 上成功运行并执行回归测试
   https://github.com/riscv-collab/v8/wiki/How-to-Run-v8-on-Android-RISCV
#### Port 上游
* 5232198: [riscv] Prepare splitting of MemoryChunk Metadata and Header | https://chromium-review.googlesource.com/c/v8/v8/+/5232198
* 5210810: [riscv] Add simd load/store condition in IsLoad/IsStore | https://chromium-review.googlesource.com/c/v8/v8/+/5210810
* 4394942: [riscv] Using s8 as backtrack_stackpointer reg and optimize BranchShortHelper | https://chromium-review.googlesource.com/c/v8/v8/+/4394942
* 5201079: [riscv] Use enum for Conditions in base-constants-riscv.h | https://chromium-review.googlesource.com/c/v8/v8/+/5201079
* 5197210: [riscv][wasm][liftoff] Optimize in-bounds atomic operations | https://chromium-review.googlesource.com/c/v8/v8/+/5197210
* 5190789: [riscv] Implement InstructionAt | https://chromium-review.googlesource.com/c/v8/v8/+/5190789

## Spidermonkey
无

## OpenJDK Upstream
1. Co-authored JDK-mainline PRs:
- https://github.com/openjdk/jdk/pull/17103 (8321972: test runtime/Unsafe/InternalErrorTest.java timeout on linux-riscv64 platform)

2. Reviewed JDK-mainline PRs:
- https://github.com/openjdk/jdk/pull/16743 (JDK-8320368: Per-CPU optimization of Klass range reservation)
- https://github.com/openjdk/jdk/pull/16608 (8319801: Recursive lightweight locking: aarch64 implementation)
- https://github.com/openjdk/jdk/pull/17122 (8320069: RISC-V: Add Zcb instructions)
- https://github.com/openjdk/jdk/pull/16816 (8320697: RISC-V: Small refactoring for runtime calls)
- https://github.com/openjdk/jdk/pull/16802 (8318227: RISC-V: C2 ConvHF2F)
- https://github.com/openjdk/jdk/pull/16808 (8318157: RISC-V: implement ensureMaterializedForStackWalk intrinsic)
- https://github.com/openjdk/jdk/pull/16857 (8320911: RISC-V: Enable hotspot/jtreg/compiler/intrinsics/chacha/TestChaCha20.java)
- https://github.com/openjdk/jdk/pull/16910 (8315856: RISC-V: Use Zacas extension for cmpxchg)
- https://github.com/openjdk/jdk/pull/16925 (8321001: RISC-V: C2 SignumVF)
- https://github.com/openjdk/jdk/pull/16880 (8320397: RISC-V: Avoid passing t0 as temp register to MacroAssembler:: cmpxchg_obj_header/cmpxchgptr)
- https://github.com/openjdk/jdk/pull/17117 (8322154: RISC-V: JDK-8315743 missed change in MacroAssembler::load_reserved)
- https://github.com/openjdk/jdk/pull/17123 (8322195: RISC-V: Minor improvement of MD5 instrinsic)
- https://github.com/openjdk/jdk/pull/17126 (8322209: RISC-V: Enable some tests related to MD5 instrinsic)
- https://github.com/openjdk/jdk/pull/17192 (8322583: RISC-V: Enable fast class initialization checks)
- https://github.com/openjdk/jdk/pull/17215 (8322816: RISC-V: Incorrect guarantee in patch_vtype)
- https://github.com/openjdk/jdk/pull/17216 (8322817: RISC-V: Eliminate -Wparentheses warnings in riscv code)

3. Reviewed JDK22 upstream PRs:
- https://github.com/openjdk/jdk22/pull/19 (8322154: RISC-V: JDK-8315743 missed change in MacroAssembler::load_reserved)

4. Reviewed JDK17u upstream PRs:
- https://github.com/openjdk/jdk17u-dev/pull/2095 (8322968: [17u] Amend Atomics gtest with 1-byte tests)

5. JDK-mainline PRs:
- https://github.com/openjdk/jdk/pull/17192 (8322583: RISC-V: Enable fast class initialization checks)
- https://github.com/openjdk/jdk/pull/17436 (8323694: RISC-V: Unnecessary ResourceMark in NativeCall::set_destination_mt_safe)
- https://github.com/openjdk/jdk/pull/17548 (8324125: Improve class initialization barrier in TemplateTable::_new for RISC-V)

6. JDK22U backport PRs:
- https://github.com/openjdk/jdk22u/pull/34 (8324280: RISC-V: Incorrect implementation in VM_Version::parse_satp_mode)

7. JDK21U backport PRs:
- https://github.com/openjdk/jdk21u-dev/pull/132 (8322583: RISC-V: Enable fast class initialization checks)
- https://github.com/openjdk/jdk21u-dev/pull/218 (8324280: RISC-V: Incorrect implementation in VM_Version::parse_satp_mode)

8. JDK17U backport PRs:
- https://github.com/openjdk/jdk17u-dev/pull/2110 (8322583: RISC-V: Enable fast class initialization checks)
- https://github.com/openjdk/jdk17u-dev/pull/2178 (8324280: RISC-V: Incorrect implementation in VM_Version::parse_satp_mode)

## OpenJDK RV32G
- https://github.com/openjdk-riscv/jdk11u/pull/597 (Add x9 to non_allocatable_reg32 group)

## OpenJDK8 Backporting
[OpenJDK8 ZERO for RISCV64 在sg2042上移植记录]https://zhuanlan.zhihu.com/p/677129085
[关于zero版本的backport] https://github.com/zhangxiang-plct/jdk8u/issues/372

## OpenCV RISC-V 优化

- 添加面向 Packed SIMD (RVP) 扩展的函数优化（DNN模块）
  
  [PR #24556](https://github.com/opencv/opencv/pull/24556) 已被接受: Optimization based on RISC-V P Packed SIMD Extension v0.5.2
## GNU Toolchain
### Jiawei Chen
- 重新提交了第六版ZC扩展的Binutils支持，目前仍在review中:
  - https://sourceware.org/pipermail/binutils/2024-January/132260.html
- Backporting RISC-V特性到RUYISDK GCC10上的RISC-V支持:
  - https://github.com/revyos/gcc/pull/4
- 正在添加香山cpu-info到gcc支持，预计5月初发送：
  - https://github.com/plctlab/riscv-gcc/pull/1
- SIG-Toolcahin会议上讨论了Profiles的支持情况，由于Profiels TG对部分扩展添加争议较大，Palmer建议延后工具链合并的时间,等待5月初重新发送Profiles的GCC支持patch
### Shihua Liao
- 完成了Bitmanip与Scalar crypto的intrinsic实现
  - https://gcc.gnu.org/git/?p=gcc.git;a=commit;h=4d7c4288a90ab949f70c47a4b3e97c52f4f39f11
- 正在Backporting RISC-V特性到RUYISDK GCC13上的RISC-V支持:
  - https://github.com/Liaoshihua/ruyi-gcc
### Yixuan Chen
- 继续Gprofng的RISC-V 后端porting工作，遇到了cpu frequence缺失支持问题(Can not determine CPU clock frequency.)，尝试解决中：
  - https://github.com/XYenChi/binutils-gdb/tree/port-gprofng
- 正在Backporting RISC-V特性到RUYISDK GCC12上的RISC-V支持:
  - https://github.com/XYenChi/gcc/tree/ruyisdk-gcc-12.3.0
### Yulong Shi
- 添加完成了libmvec的RISC-V支持，构建时遇到一些宏定义不正确展开的问题，正在解决中：
  - https://github.com/yulong-plct/riscv-glibc/tree/libmvec
- 正在Backporting RISC-V特性到RUYISDK GCC11上的RISC-V支持:
  - https://github.com/yulong-plct/ruyisdk-gcc/tree/RVgcc11
### Yang Liu
- 去年提的一个 binutils-gdb patch 已经合入主线：[gdb: RISC-V: Refine lr/sc sequence support](https://sourceware.org/git/?p=binutils-gdb.git;a=commit;h=b273287f4e7f111c1bb667267c6bde4fdd8418c7)
### RISC-V GNU Toolchain会议Slides链接
https://docs.google.com/presentation/d/19a-BUj_DnjEsltXFNXaoXveHukU7DZcTWESqGAABLCQ/edit

## LLVM Monorepo
- [RISCV][ISel] Use vaaddu with rounding mode rnu for ISD::AVGCEILU. (https://github.com/llvm/llvm-project/pull/77473) Merged
- [RISCV][ISel] Use vaaddu with rounding mode rdn for ISD::AVGFLOORU. (https://github.com/llvm/llvm-project/pull/76550) Merged
- [RISCV][ISel] Remove redundant vmerge for the vwadd.(https://github.com/llvm/llvm-project/pull/78403) Merged
- [RISCV][ISel] Combine scalable vector add/sub/mul with zero/sign extension (Recommit) (https://github.com/llvm/llvm-project/pull/72340) Merged
- [FuncAttrs] Don't infer noundef for functions with sanitize_memory attribute https://github.com/llvm/llvm-project/pull/76691 
- [InstCombine] Refactor folding of commutative binops over select/phi/minmaxhttps://github.com/llvm/llvm-project/pull/76692 
- [InstCombine] Revert the signed icmp -> unsigned icmp canonicalization when folding icmp Pred min|max(X, Y), Z  https://github.com/llvm/llvm-project/pull/76685 
- [InstCombine] Canonicalize switch(C-X) to switch(X)  https://github.com/llvm/llvm-project/pull/77051 
- [InstCombine] Canonicalize switch(X << C) into switch(X) https://github.com/llvm/llvm-project/pull/77068
- [InstCombine] Fold switch(zext/sext(X)) into switch(X) https://github.com/llvm/llvm-project/pull/76988
- [CVP] Improve the value solving of select at use https://github.com/llvm/llvm-project/pull/76700
- [InstCombine] Fold bitwise logic with intrinsics https://github.com/llvm/llvm-project/pull/77460
- [SimplifyCFG] Emit rotl directly in ReduceSwitchRange https://github.com/llvm/llvm-project/pull/77603
- [InstCombine] Handle a bitreverse idiom which ends with a bswap https://github.com/llvm/llvm-project/pull/77677
- [InstCombine] Recognize more rotation patterns (shl ShVal, X) | (lshr ShVal, ((-X) & (Width - 1))) -> rotl X, ShVal https://github.com/llvm/llvm-project/pull/78107 
- [InstCombine] Relax the one-use constraints for icmp pred (binop X, Z), (binop Y, Z)  https://github.com/llvm/llvm-project/pull/76384 
- [SCCP] Check whether the default case is reachable https://github.com/llvm/llvm-project/pull/76295 
- [InstCombine] Fold the log2_ceil idiom https://github.com/llvm/llvm-project/pull/76661 

针对中端添加了回归测试, https://github.com/dtcxzyw/llvm-opt-benchmark

### Chunyu Liao
- [DAGCombiner] Use generalized pattern matcher in foldBoolSelectToLogic https://github.com/llvm/llvm-project/pull/79101
- [RISCV] Codegen support for XCVmem extension https://github.com/llvm/llvm-project/pull/76916

### Kiva

- [[Clang][XTHeadVector] Add vector strided load/store intrinsics #49](https://github.com/ruyisdk/llvm-project/pull/49)
- [[Clang][XTHeadVector] Add unit-stride fault-only-first load intrinsics #50](https://github.com/ruyisdk/llvm-project/pull/50)
- [[LLVM][Clang][XTHeadVector] Add indexed load/store intrinsics #54](https://github.com/ruyisdk/llvm-project/pull/54)
- [[Clang][XTHeadVector] Add vector unit-stride segment load/store intrinsics #56](https://github.com/ruyisdk/llvm-project/pull/56)
- [[Clang][XTHeadVector] Implement vadd/vsub/vrsub/vneg intrinsics #58](https://github.com/ruyisdk/llvm-project/pull/58)
- [[Clang][XTHeadVector] Implement vwadd/vwsub/vwaddu/vwsubu intrinsics #59](https://github.com/ruyisdk/llvm-project/pull/59)

### Yongtai Li

- [flang] Remove duplicate tests. https://github.com/llvm/llvm-project/pull/77059
- [flang][runtime] Fix seg fault in intrinsic execute_command_line. https://github.com/llvm/llvm-project/pull/78126

### Junjie Zheng

- https://github.com/llvm/llvm-project/pull/76385 [InstCombine] Simplify compare abs(X) and X.

## gollvm

## LIBCXX Experimental/simd

本期共有4个PR提交至LLVM上游，其中，2个已合并，2个正在等待审核：

- [[libc++] <experimental/simd> Fix conversion constructor (Open)](https://github.com/llvm/llvm-project/pull/74693)
- [[libc++] <experimental/simd> Add load constructor for class simd/simd_mask (Merged)](https://github.com/llvm/llvm-project/pull/76610)
- [[libc++] <experimental/simd> Fix vector_aligned_tag to pass #76610 (Merged)](https://github.com/llvm/llvm-project/pull/76611)
- [[libc++] <experimental/simd> Add copy functions for class simd/simd_mask (Draft)](https://github.com/llvm/llvm-project/pull/78935)

目前项目共有17个patch已合并进入LLVM上游仓库。

## LuaJIT RV64G Porting

We discovered that `riscv_flush_icache` would not work properly in musl libc, which is used by our LuaJIT port and pratically many other JIT compilers. We have sent a patch to musl and have it merged, while also applied a workaround ourside.

- LuaJIT Port
  - [support: fix lj_mcode_sync, plus musl workaround](https://github.com/ruyisdk/LuaJIT/commit/3b6f3409e494efe178bd16849b5ff0df5dc885c2)
- musl libc
  - [riscv: correct symbol version of __vdso_flush_icache](https://www.openwall.com/lists/musl/2024/01/25/13)

## gem5

## Spike

## QEMU

## DynamoRIO RV64GC

- [i#5926: Update elfutils submodule to https protocol](https://github.com/DynamoRIO/dynamorio/pull/6560)
- [i#6508: Fix a compilation error in release build](https://github.com/DynamoRIO/dynamorio/pull/6555)
- [i#3544, i#1551, i#1569 signal: Remove a non-existing field in sigframe_rt_t](https://github.com/DynamoRIO/dynamorio/pull/6554)
- [i#3544 RV64: Enable reuse_distance test](https://github.com/DynamoRIO/dynamorio/pull/6540)
- [i#3544 RV64: Treat atomic instructions as load/store instructions](https://github.com/DynamoRIO/dynamorio/pull/6528)

## box64

xctan

  - [\[RV64_DYNAREC\] Fixed 66 87 XCHG opcode](https://github.com/ptitSeb/box64/pull/1198)
  - [\[RV64_DYNAREC\] Fixed 66 0F B6 MOVZX opcode](https://github.com/ptitSeb/box64/pull/1196)

ksco

  - [\[DYNAREC_RV64\] Enable basic simple wrapper optimization](https://github.com/ptitSeb/box64/pull/1215)
  - [\[DYNAREC_RV64\] Added more opcodes and fixed X87_PUSH/POP macros](https://github.com/ptitSeb/box64/pull/1194)
  - [\[DYNAREC_RV64\] Fixed a wrong Zba optimization](https://github.com/ptitSeb/box64/pull/1193)
  - [\[DYNAREC_RV64\] Added CALL/RET optimization](https://github.com/ptitSeb/box64/pull/1183)

## dynarmic

dynarmic 作为 AArch32 和 AArch64 的二进制翻译器被 Citra、yuzu 等模拟器使用，我们已经开始尝试为它增加 RISC-V backend，目前已提交的代码被合并到了上游的 [feature/rv64](https://github.com/merryhime/dynarmic/tree/feature/rv64) 分支中，待真正可用后会合并进主线。

- [backend/rv64: Initial implementation of terminals](https://github.com/merryhime/dynarmic/commit/5a8654d6efcbec7733b41779a2b6fa0e2a0142ba)
- [backend/rv64: Add StackLayout to stack](https://github.com/merryhime/dynarmic/commit/69864b7bab687a29eb470a3a584689ed0ea938cf)
- [backend/rv64: Implement UpdateAllUses](https://github.com/merryhime/dynarmic/commit/249cf18eedb170fcc9145fdd6b76efce689b7be5)
- [backend/rv64: Implement AssertNoMoreUses and some minor tweaks](https://github.com/merryhime/dynarmic/commit/66366ba10469d5cb3642326e47a8ceec52b94f4e)
- [backend/rv64: Use biscuit LI()](https://github.com/merryhime/dynarmic/commit/eab106e28210abfc6556d79c66cc405b64ac8665)
- [backend/rv64: Add minimal toy implementation enough to execute LSLS](https://github.com/merryhime/dynarmic/commit/7b6af427d1daf4b07d5996189a0932fb821863f5)
- [backend/rv64: Initial implementation of register allocator](https://github.com/merryhime/dynarmic/commit/4e7000a8b9bb71e1f15611ff779f638a1e2f06f2)
- [backend/rv64: Adjust how relocations are stored](https://github.com/merryhime/dynarmic/commit/2c182de503a85a1ae811f7e0b3ba6d4b4c8a9d17)
- [backend/rv64: Rework on pointer types](https://github.com/merryhime/dynarmic/commit/e8585fd8f59c51e12a90cafacea721c88f93d17a)
- [backend/rv64: Add a dummy code generation](https://github.com/merryhime/dynarmic/commit/1267ffb5e9bf5dbc45eb9907bc1296d3d0e672cd)
- [backend/rv64: Add biscuit as the assembler](https://github.com/merryhime/dynarmic/commit/7e47102a09bf3384c87c38d7e65ae5e5882acf8e)
- [backend/rv64: Add initial RISC-V framework](https://github.com/merryhime/dynarmic/commit/4fda3d331414a7c9f4477243bef91e754f430178)
- [github: Add basic RISC-V CI](https://github.com/merryhime/dynarmic/commit/17e0766152654be62ab282b78da5bd7159d1c4c0)

biscuit 是类似于 Xbyak 的运行时 RISC-V 汇编器，作为 dynarmic 的依赖用于代码生成。下面是 biscuit 的 PR：

- [assembler: Include  for std::exchange](https://github.com/lioncash/biscuit/pull/12)
- [assembler: Refine LI() and add LI64() to the assembler](https://github.com/lioncash/biscuit/pull/11)

## riscv-vector-tests

日常维护 RVV 测试集。

- [Add vxsat support](https://github.com/ksco/riscv-vector-tests/commit/4dc7375d8992fbe44dffc5a6bdff2361d9290808)
- [Fix a large imm issue for vlen 4096](https://github.com/ksco/riscv-vector-tests/commit/01c2ca1fcf1a3fa2e6631ba7bb6eec632ec583d1)
- [Add more cases for vl](https://github.com/ksco/riscv-vector-tests/commit/c3b739eeebda1d5c7be010ded5492b9f8dd1c5f8)

## SAIL/ACT

## openArkCompiler community

## MLIR

### Buddy Compiler

- Buddy Compiler 主页地址 - https://buddy-compiler.github.io/
- Buddy Compiler As A Service 地址 - https://buddy.isrc.ac.cn/

**buddy-mlir**

代码仓库：https://github.com/buddy-compiler/buddy-mlir

- Add initial vector GetVL and SetVL operation.
- Add initial Graph infrastructure.


**buddy-benchmark**

代码仓库：https://github.com/buddy-compiler/buddy-benchmark

- Update with latest developments in buddy-mlir.
- Update comparison projects (OpenCV, Eigen, etc.) to specific version.

## CAAT

## coreboot for riscv

本期没有新的进展。

## openocd

本期没有新的进展。

## opensbi

- 在fw_base.S中移除_runtime_offset变量。[1](https://lists.infradead.org/pipermail/opensbi/2024-January/006198.html)
- 优化fw_base.S中无符号32数的加载。[1](https://lists.infradead.org/pipermail/opensbi/2024-January/006199.html)
- Makefile为clang 移除编译选项-mstrict-align，否则clang 17.06会编译报错。[1](https://lists.infradead.org/pipermail/opensbi/2024-January/006302.html)
- 把部分汇编实现移动到C代码中，减少汇编代码大小。[1](https://lists.infradead.org/pipermail/opensbi/2024-January/006275.html)
- 修正startfive jh7110的系统时钟的dt兼容字符串。[1](https://lists.infradead.org/pipermail/opensbi/2024-January/006300.html)
- 修正jh7110 i2c的时钟使能代码。[1](https://lists.infradead.org/pipermail/opensbi/2024-January/006301.html)
- 添加dt节点用于指定哪些核心可以冷启动。[1](https://lists.infradead.org/pipermail/opensbi/2024-January/006326.html)
- 给链接器添加排除库文件的选项--exclude-libs。[1](https://lists.infradead.org/pipermail/opensbi/2024-January/006315.html)
- 添加dynsym段防止一些链接器抱怨。[1](https://lists.infradead.org/pipermail/opensbi/2024-January/006316.html)
- 允许平台代码处理load/store access fault（可以模拟设备，或者过滤一些物理设备的访问）。[1](https://lists.infradead.org/pipermail/opensbi/2024-January/006318.html)

## u-boot

本期没有新的进展。

## Aya Theorem Prover

## eBPF

## Benchmarking

## LibreOffice

- [Current State](https://lists.debian.org/debian-riscv/2024/01/msg00018.html)
- [Patch - Java Fix](https://gerrit.libreoffice.org/c/core/+/160970)
- [Patch - Bridge Code Tidy](https://gerrit.libreoffice.org/c/core/+/162607)
- [Debugging Memo - UITest](https://github.com/Sakura286/libreoffice-riscv-port-memo/blob/main/doc/Debug_UITest.md)
- [Debugging Memo - Java](https://github.com/Sakura286/libreoffice-riscv-port-memo/blob/main/doc/Debug_Java.md)
- [Debugging Memo - GDB Symbol Issue](https://github.com/Sakura286/libreoffice-riscv-port-memo/commit/5bcfe93)

## Arch Linux

(可以根据每个人的产出分开，按照人名增加三级缩进，也可以由 leader/mentor 汇总后统一PR)

## RevyOS (Debian)

- [月报仓库](https://github.com/revyos/Newsletter)维持月度更新
- 发布了新测试版本的[LicheePi4A镜像](https://mirror.iscas.ac.cn/revyos/extra/images/lpi4a/test/20240202/)，[LicheePi 4A&LicheePi Cluster 4A可共用的主线内核镜像](https://mirror.iscas.ac.cn/revyos/extra/images/lpi4amain/20240127/?C=N&O=D),[主线内核测试版本镜像](https://mirror.iscas.ac.cn/revyos/extra/images/lpi4amain/test/20240113/)，[SG2042镜像](https://mirror.iscas.ac.cn/revyos/extra/images/sg2042/20240119/)
- [ruyisdk/revyos](https://github.com/ruyisdk/revyos/commit/9d7f5d3505587c148d4fa405126f6e209a694741)及[revyos/revyos](https://github.com/revyos/revyos/commit/20bf5e2b901b89c41e0692dba0dda308fe12ad69)每月更新
- 在外网论坛进行了月报宣传
- 对[RevyOS docs](https://revyos.github.io/docs/)的进行了同步更新，因镜像增多改善了主页内容结构
- 发布了新测试版本的[LicheePi4A镜像](https://mirror.iscas.ac.cn/revyos/extra/images/lpi4a/test/20240202/)，[LicheePi 4A&LicheePi Console 4A可共用的主线内核镜像](https://mirror.iscas.ac.cn/revyos/extra/images/lpi4amain/20240127/?C=N&O=D),[主线内核测试版本镜像](https://mirror.iscas.ac.cn/revyos/extra/images/lpi4amain/test/20240113/)，[SG2042镜像](https://mirror.iscas.ac.cn/revyos/extra/images/sg2042/20240119/)
- [ruyisdk/revyos](https://github.com/ruyisdk/revyos/commit/9d7f5d3505587c148d4fa405126f6e209a694741)及[revyos/revyos](https://github.com/revyos/revyos/commit/20bf5e2b901b89c41e0692dba0dda308fe12ad69)每月更新
- 在外网论坛进行了月报宣传
- 对RevyOS docs的进行了同步更新，因镜像增多改善了主页内容结构

## Debian

2024年1月份的主要工作：

1. 修复 Debian unstable 中的 FTBFS 包，保证 riscv64 testing 及时合入更多的包
2. 向 upstream 报告 riscv64 build 问题
3. 协助转移实验室机器， 加入一台licheepi4a 到debci

以下是外部链接:

- https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=952388 [faker new upload]
- https://github.com/urwid/urwid/issues/728#issuecomment-1875444013 [urwid debian update]
- https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1055721 [python-wordcloud ftbfs done]
- https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1060203 [dde-store NMU Close]
- https://github.com/enthought/mayavi/issues/1287 [issue]
-  https://github.com/ParmEd/ParmEd/issues/1335 [test fail report]
- https://jira.ecmwf.int/browse/SUP-3898  [eccodes build issue]
- https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1059987 [endless-sky ftbfs done]
- https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1056849 [python-acora: ftbfs with cython 3.0.x done]
- http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1055707 [python-acora fbfs with Python 3.12 done]
- https://lists.gnu.org/archive/html/bug-mes/2024-01/msg00006.html [mes upstream issue]
- https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1060844 [paryfor support riscv64]
- https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1055545 [zfec ftbfs done]
- https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1060913 [sdaps NMU]
- https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1057613#24 [shed MR]
- https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1051998#87 [chromium rebase patch 120]
- https://github.com/yuzibo/vf2-debian-image/issues/4 [close issue]
- https://salsa.debian.org/ruby-team/ruby-devise/-/merge_requests/4 [ruby-devise debci support rv64 MR]
- https://salsa.debian.org/python-team/packages/pytermgui [new package]
- https://github.com/yuzibo/vf2-linux/tree/vf2-v6.7.2-dev [vf2 linux 6.7.2]
- https://github.com/yuzibo/vf2-debian-image/tree/vf2-v6.7.2-v1 [vf2 debian image on v6.7.2]
- https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1062075 [lomiri-app-launch ftbfs issue]
- https://salsa.debian.org/science-team/spopt/-/blob/master/debian/changelog?ref_type=heads [spopt ftbfs done
- https://bugs.launchpad.net/snapd/+bug/2051854 [snapd support rv64]
- https://salsa.debian.org/python-team/packages/python-whey [new package update]
- https://salsa.debian.org/ci-team/debian-ci-config/-/merge_requests/23 [update debci riscv64 worker info]

## Gentoo

## Nixpkgs
- starfive visionfive2: update u-boot to SDK version v5.10.3 https://github.com/NixOS/nixos-hardware/pull/818
- starfive visionfive2: use upstream u-boot v2024.01-rc5 https://github.com/NixOS/nixos-hardware/pull/819
- starfive visionfive2: update u-boot to 2024.01 https://github.com/NixOS/nixos-hardware/pull/842
- starfive visionfive2: update kernel to 6.6.0 https://github.com/NixOS/nixos-hardware/pull/849
- buildUBoot: specify absolute path of dtc, fix building u-boot 2023.10+ https://github.com/NixOS/nixpkgs/pull/277997
- libewf: fix cross compilation https://github.com/NixOS/nixpkgs/pull/280624
- aemu: restrict to supported platforms https://github.com/NixOS/nixpkgs/pull/280627
- nss_ldap: fix cross compilation https://github.com/NixOS/nixpkgs/pull/281253
- mingetty: fix cross compilation https://github.com/NixOS/nixpkgs/pull/281254
- testers.hasPkgConfigModules: misc fixes https://github.com/NixOS/nixpkgs/pull/284652

## openEuler

(可以根据每个人的产出分开，按照人名增加三级缩进，也可以由 leader/mentor 汇总后统一PR)

## Fedora

(可以根据每个人的产出分开，按照人名增加三级缩进，也可以由 leader/mentor 汇总后统一PR)

## openKylin

## openAnolis

## RT-Thread

## 第3测试小队

### 1. 测试规划和策略

#### 1.1 RuyiSDK

- [RuyiSDK 测试策略和测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/README.md)

- 基于VSCode进行Golang的编译调试
  
  - [PPT](https://github.com/YunxiangLuo/riscv-test/blob/main/202401/%E5%9F%BA%E4%BA%8EVSCode%E8%BF%9B%E8%A1%8CGolang%E7%9A%84%E7%BC%96%E8%AF%91%E8%B0%83%E8%AF%95.pptx)
  
  - [视频](https://github.com/YunxiangLuo/riscv-test/blob/main/202401/%E5%9F%BA%E4%BA%8EVSCode%E8%BF%9B%E8%A1%8CGolang%E7%9A%84%E7%BC%96%E8%AF%91%E8%B0%83%E8%AF%95.mp4)

- 基于VSCode介绍Rust在IDE上的交叉编译和调试
  
  - [任务](https://github.com/ruyisdk/pmd/issues/7)
  
  - [PPT](https://github.com/YunxiangLuo/riscv-test/blob/main/202401/%E5%9F%BA%E4%BA%8EVSCode%E4%BB%8B%E7%BB%8DRust%E5%9C%A8IDE%E4%B8%8A%E7%9A%84%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E5%92%8C%E8%B0%83%E8%AF%95.pptx)
  
  - [视频](https://github.com/YunxiangLuo/riscv-test/blob/main/202401/%E5%9F%BA%E4%BA%8EVSCode%E4%BB%8B%E7%BB%8DRust%E5%9C%A8IDE%E4%B8%8A%E7%9A%84%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E5%92%8C%E8%B0%83%E8%AF%95.mp4)
  
  - [文档](https://github.com/trdthg/plct/tree/main/doc/ruyi/vscode-rust.md)
    
    - 完成 lldb 调试器和 gdb 调试器调研
    
    - 附带基于 vscode 远程调试树莓派 (arm)

- 基于Eclipse介绍Rust在IDE上的交叉编译和调试 
  
  - [任务](https://github.com/ruyisdk/pmd/issues/6) 
  
  - [PPT](https://github.com/YunxiangLuo/riscv-test/blob/main/202401/%E5%9F%BA%E4%BA%8EEclipse%E4%BB%8B%E7%BB%8DRust%E5%9C%A8IDE%E4%B8%8A%E7%9A%84%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E5%92%8C%E8%B0%83%E8%AF%95.pptx) 
  
  - [视频](https://github.com/YunxiangLuo/riscv-test/blob/main/202401/%E5%9F%BA%E4%BA%8EEclipse%E4%BB%8B%E7%BB%8DRust%E5%9C%A8IDE%E4%B8%8A%E7%9A%84%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E5%92%8C%E8%B0%83%E8%AF%95.mp4) 
  
  - [文档](https://gitlab.inuyasha.love/weilinfox/plct-working/-/blob/master/Note/eclipse-riscv/rust.md)
  
  - [提纲](https://gitlab.inuyasha.love/weilinfox/plct-working/-/blob/master/Note/eclipse-riscv/eclipse-rust/eclipse-rust.md)
  
  - 提交 Eclipse Rust 调研报告
    
    | commit 标题                         | commit 链接                                                                                 |
    |:---------------------------------:|:-----------------------------------------------------------------------------------------:|
    | Add rust on eclipse investigation | [898c108](https://github.com/ruyisdk/pmd/commit/898c108e91aa432993039487d5a20594930cb6a7) |

#### 1.2 openEuler

2024.01.08 第三测试小队之前主导oerv的测试，2024.01.08吴洁老师回归oerv小队，第三测试小队主要测试内容为Ruyi项目，使用2周左右向吴洁老师进行了交接和支持。

- [开源自动化测试工具Mugen和openQA在openEuler RISC-V测试中的使用](https://github.com/YunxiangLuo/riscv-test/blob/main/202401/%E5%BC%80%E6%BA%90%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7Mugen%E5%92%8CopenQA%E5%9C%A8openEuler%20RISC-V%E6%B5%8B%E8%AF%95%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8.pdf)

- [oerv测试工具要求和现状分析](https://github.com/YunxiangLuo/riscv-test/blob/main/202401/oerv%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7%E8%A6%81%E6%B1%82%E5%92%8C%E7%8E%B0%E7%8A%B6%E5%88%86%E6%9E%90.xlsx)

- [关于openEuler 24.03 LTS RISC-V合入QA方面的一些思考和建议](https://gitee.com/yunxiangluo/openEuler-RISCV-2403LTS-Pretest/blob/master/%E5%85%B3%E4%BA%8EopenEuler%2024.03%20LTS%20RISC-V%E5%90%88%E5%85%A5QA%E6%96%B9%E9%9D%A2%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%9D%E8%80%83%E5%92%8C%E5%BB%BA%E8%AE%AE.pptx)

- [oerv 社区执行能力(基于oerv测试工具要求和现状分析)](https://gitee.com/yunxiangluo/openEuler-RISCV-2403LTS-Pretest/blob/master/%E7%A4%BE%E5%8C%BA%E6%89%A7%E8%A1%8C%E8%83%BD%E5%8A%9B.md)

- [openEuler RISC-V 24.03测试策略](https://gitee.com/yunxiangluo/openEuler-RISCV-2403LTS-Pretest/blob/master/README.md)

#### 1.3 基础设施建设

- Jenkins CI 架构调整

20240117 日开始 GitHub 无法裸连，需要添加一个旁路网关。由于测试 QEMU Agent 搭建在容器中，则需要一个新容器搭建网关。实体测试机则在同网段添加实体网关。远程测试机使用 TCP 模式也出现无法稳定连接 Jenkins CI 的情况，因此将主页转移到国内服务器。

```
                                           +---------+
+-------------------+                   +--| browser |
| main server       |      GuangZhou    |  +---------+
|    +------------+ |   +------------+  |  +--------+
|  +-| Jenkins CI ======= web server |<-+->| github |
|  | +------------+ |   +------------+  |  +--------+
|  |    +---------+ |                   |  +------------------------+
|  +----+ Agent 0 | |                   |  |   +------------------+ |
|  |    +---------+ |                   |  | +-+ External Agent 1 | |
|  |    +---------+ |                   |  | | +------------------+ |
|  +----+ Agent 1 | |                   |  | | +------------------+ |
|  |    +---------+ |                   |  | +-+ External Agent 2 | |
| ...       ...     |                   +--+ | +------------------+ |
|  |    +---------+ |                      |...        ...          |
|  +----+ Agent N | |                      | | +------------------+ |
|  |    +---------+ |                      | +-+ External Agent N | |
|  |    +---------+ |                      | | +------------------+ |
|  +----+ Gateway | |                      | | +---------+          |
|       +---------+ |                      | +-+ Gateway |          |
+-------------------+                      |   +---------+          |
                                           +------------------------+
```

- 山大 SG2042 服务器网络接入
  - 搭建 Tailscale DERP 中继节点，优化国内连接延迟
  - 尝试解决 Share out machine 无法使用自建 DERP 节点的问题
  - 记录 [文档](https://github.com/KevinMX/PLCT-Tarsier-Works/blob/main/misc/month9/tailscale.md)

### 2. 测试

#### 2.1 RuyiSDK 测试

- RuyiSDK v0.3 测试
  
  - [RuyiSDK v0.3 测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240116/README.md)
  
  - [SG2042 Pioneer Fedora 38 测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240116/fedora-SG2042-Pioneer.md)
  
  - [SG2042 Pioneer openEuler 23.09  测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240116/oERV2309-SG2042-Pioneer.md)
  
  - [LPi4A 和SG2042 Pioneer 镜像刷写测试](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240116/LPi4A-Pioneer-镜像刷写测试.md)
  
  - [Pi4A openEuler 23.09 测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240116/oERV2309-LPi4A.md)
  
  - [RevyOS openEuler 23.09 测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240116/RevyOS-LPi4A.md)
  
  - [MilkV Duo 镜像刷写测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240116/MilkV-Duo-镜像刷写测试.md)
  
  - [Ruyi 包管理 Container on RevyOS 测试报告（开发板测试）](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240116/RUYI_包管理_20231204_版本_Container_RevyOS_riscv64_测试结果.md)
  
  - [QEMU Fedora38 x86_64 测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240116/RUYI_包管理_20231204_版本_QEMU_Fedora38_x86_64_测试结果.md)
  
  - [QEMU openEuler23.09 x86_64 测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240116/RUYI_包管理_20231204_版本_QEMU_openEuler23.09_x86_64_测试结果.md)
  
  - [QEMU Ubuntu22.04 x86_64 测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240116/RUYI_包管理_20231204_版本_QEMU_ubuntu22.04_x86_64_测试结果.md)
  
  - [QEMU openEuler23.09 riscv64 测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240116/RUYI_包管理_20231204_版本_QEMU_openEuler23.09_riscv64_测试结果.md)
  
  - 遗留缺陷
    
    - https://github.com/ruyisdk/ruyi/issues/46 ruyi开发板系统镜像安装工具下载镜像时需要进行科学上网
    
    - https://github.com/ruyisdk/ruyi/issues/45 20240116 版本 self uninstall --purge 没有删除 state/ruyi 目录
    
    - https://github.com/ruyisdk/ruyi/issues/39 Device provision: warn users about adding udev rules for LPi4A 
  
  - 文档添加更新
    
    - [本版本mugen测试程序](./mugen测试程序)
    
    - [Ruyi手册](https://github.com/ruyisdk/doc4test/blob/main/README.md)

- RuyiSDK v0.4 测试

测试中，20240128对v0.4 Beta版本开始快速测试，部分缺陷修复后，20240130对v0.4版本开始正式测试

- [镜像下载常出现下载中断的情况，建议增加支持断点续传功能](https://github.com/ruyisdk/ruyi/issues/64)

- [emulator/qemu-system-riscv-upstream: missing libfdt.so.1 on Ubuntu 20.04.3 LTS](https://github.com/ruyisdk/ruyi/issues/60)

- [Device provision: link is dead](https://github.com/ruyisdk/ruyi/issues/59)

- 其他（文档添加，issue等）
  
  | pr 标题                 | pr 链接                                                    |
  |:---------------------:|:--------------------------------------------------------:|
  | 添加 ruyi-mugen 测试日志和报告 | [!2](https://gitee.com/yunxiangluo/ruyisdk-test/pulls/2) |
  | 添加自动化测试相关视频           | [!5](https://gitee.com/yunxiangluo/ruyisdk-test/pulls/5) |
  
  - RUYI 包管理 mugen 测试失败用例提交 issue
  
  | issue 标题                                              | issue 链接                                         |
  |:-----------------------------------------------------:|:------------------------------------------------:|
  | 20240116 版本 self uninstall --purge 没有删除 state/ruyi 目录 | [#45](https://github.com/ruyisdk/ruyi/issues/45) |
  | 镜像下载是否需要支持断点续传                                        | [#64](https://github.com/ruyisdk/ruyi/issues/64) |
  
  - RUYI 包管理文档添加，更新 ruyisdk/docs 仓库和 ruyisdk/doc4test 仓库
  
  | pr 标题                            | pr 链接                                          |
  |:--------------------------------:|:----------------------------------------------:|
  | Add new feature for v0.3 release | [#31](https://github.com/ruyisdk/docs/pull/31) |
  
  | commit 标题                             | commit 链接                                                                                      |
  |:-------------------------------------:|:----------------------------------------------------------------------------------------------:|
  | Add 20240116 new feature              | [c443cf7](https://github.com/ruyisdk/docs/commit/c443cf7fe3b8551865ccf48a929950c5611b3ed2)     |
  | Add 20240116 page to vitepress config | [b3da86d](https://github.com/ruyisdk/docs/commit/b3da86db9a689f570d5e483ea6d1cc1eda601fc8)     |
  | Add v0.3 note                         | [26ec191](https://github.com/ruyisdk/docs/commit/26ec19107226c7bacf9912eb18382fa53f4d3382)     |
  | Add github release note               | [1c0311b](https://github.com/ruyisdk/docs/commit/1c0311bd37b0ebec41e1cce71702adda059e04dc)     |
  | Add 20240116's new feature            | [2776153](https://github.com/ruyisdk/doc4test/commit/27761535219d2fb2ad69b9e91e77d5f28248f633) |
  | Add sudo note                         | [64dc1ac](https://github.com/ruyisdk/doc4test/commit/64dc1ac8828edee995458510be0dc77c2ebbde94) |
  
  - 发现ruyi镜像烧录工具在下载镜像时出现的网络错误 [#issue46](https://github.com/ruyisdk/ruyi/issues/46)
  
  | Issue                                                                                                                       | 详细信息                                                     |
  | --------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------- |
  | [RISC-V 开发板系统镜像安装工具，增加 4 款 RISC-V 开发板](https://github.com/ruyisdk/ruyi/issues/41)                                           | 确定 D1 两款开发板硬件 & DTB 情况：硬件略有不同，系统已兼容两种开发板，建议手动修改 GRUB 启动项 |
  | [Device provision: warn users about adding udev rules for LPi4A](https://github.com/ruyisdk/ruyi/issues/39)                 | fastboot 需要特权或配置 udev 规则，已修复                             |
  | [emulator/qemu-system-riscv-upstream: missing libfdt.so.1 on Ubuntu 20.04.3 LTS](https://github.com/ruyisdk/ruyi/issues/60) | 打包问题，已修复                                                 |
  | [Device provision: link is dead?](https://github.com/ruyisdk/ruyi/issues/59)                                                | package index 问题，已修复                                     |
  
  - buildroot
    
    - 镜像刷写测试 [Milk-V Duo 屏幕录像](https://asciinema.org/a/rsenSOJwdlmUXcJ8sQwubPgtr?autoplay=1)
    - 更新刷写文档：[commit](https://gitee.com/KevinMX/ruyisdk-test/commit/3a3c8798a4e24a148cb3efb804347f6b60f55230)
  
  - 发现ruyi镜像烧录工具在下载镜像时出现的网络错误 [#issue46](https://github.com/ruyisdk/ruyi/issues/46)

#### 2.2 openEuler RISC-V 24.03 测试准备和 23.09 独立版本测试

2024.01.08 第三测试小队之前主导oerv的测试，2024.01.08吴洁老师回归oerv小队，第三测试小队主要测试内容为Ruyi项目，使用2周时间向吴杰老师进行了交接和支持。

- oERV 24.03 测试调研工作
  
  - mmtest on SG2042 测试/摸底工作
    - SG2042 上能跑通，但出现了计划外的硬件问题（PCI-E Switch 风扇故障），更换了桥片风扇后继续进行测试
    - 测试 log 见 [mmtests](https://github.com/KevinMX/PLCT-Tarsier-Works/blob/main/misc/month9/mmtests/)
    - 结果分析见：[week1](https://github.com/KevinMX/PLCT-Tarsier-Works/blob/main/outcome/month9/weekly/week1.md)
    - mmtest 会拉起 LTP 进行测试，有重叠部分
    - 安装脚本更新：[commit](https://gitee.com/KevinMX/ltpstress-for-openeuler/commit/49135c9c02a2f8bfd2af28ae3756d9d8d4e56234)
  - 测试策略更新：[PR](https://gitee.com/yunxiangluo/openEuler-RISCV-2403LTS-Pretest/pulls/2)
  - 测试结果分析
    - LPi4A: LTP [oERV](https://github.com/KevinMX/PLCT-Tarsier-Works/blob/main/misc/month8/2309-hw-pre_mainline/LTP/LPi4A/)
    - Pioneer: LTP [oERV](https://github.com/KevinMX/PLCT-Tarsier-Works/blob/main/misc/month8/2309-hw-pre_mainline/LTP/Pioneer_v1p3/result_analysis.csv) / [RevyOS](https://github.com/KevinMX/PLCT-Tarsier-Works/blob/main/misc/month8/RevyOS_20231220_Pioneer_v1p3/result-analysis.csv)

- 修包工作：iozone spec 添加 riscv64 支持 [!PR](https://gitee.com/src-openeuler/iozone/pulls/7) （已合入）

- 调查 oERV perf top SIGSEGV 问题，并提交 core dump 结果：[I8TLYZ](https://gitee.com/openeuler/RISC-V/issues/I8TLYZ?from=project-issue#note_24150341_link)

- 对openEuler RISC-V 23.09 独立版本Mugen失败测试用例结果进行了分析，将分析结果提交了issue

| 测试用例名         | 测试用例                                  | 状态       | 原因                                                            | 行动                                                         |
| ------------- | ------------------------------------- | -------- | ------------------------------------------------------------- | ---------------------------------------------------------- |
| freeipmi      | oe_test_service_ipmiseld              | fail     | 服务无法启动                                                        | [I8U0BE](https://gitee.com/openeuler/RISC-V/issues/I8U0BE) |
| os-basic      | oe_test_power_powertop2tuned_optimize | fail     | Powertop版本不兼容                                                 | [I8U0JM](https://gitee.com/openeuler/RISC-V/issues/I8U0JM) |
|               | oe_test_ar                            | x86 fail | 未预装ar                                                         | [I8U0LF](https://gitee.com/openeuler/mugen/issues/I8U0LF)  |
|               | oe_test_aureport                      | x86 fail | 未预装auditd                                                     | [I8U0MM](https://gitee.com/openeuler/mugen/issues/I8U0MM)  |
|               | oe_test_envsubst                      | fail     | 未预装envsubst                                                   | [I8U0OK](https://gitee.com/openeuler/mugen/issues/I8U0OK)  |
|               | oe_test_glibc                         | x86 fail | 未预装gcc                                                        | [I8S53J](https://gitee.com/openeuler/mugen/issues/I8S53J)  |
|               | oe_test_c_stat                        | x86 fail | 未预装gcc                                                        | [I8S53J](https://gitee.com/openeuler/mugen/issues/I8S53J)  |
|               | oe_test_pcre_use                      | x86 fail | 未预装gcc                                                        | [I8S53J](https://gitee.com/openeuler/mugen/issues/I8S53J)  |
|               | oe_test_libunistring                  | x86 fail | 未预装gcc                                                        | [I8S53J](https://gitee.com/openeuler/mugen/issues/I8S53J)  |
|               | oe_test_cairo                         | x86 fail | 未预装gcc                                                        | [I8S53J](https://gitee.com/openeuler/mugen/issues/I8S53J)  |
|               | oe_test_libidn                        | fail     | 未安装gcc                                                        | [I8S53J](https://gitee.com/openeuler/mugen/issues/I8S53J)  |
| kpatch        | oe_test_service_kpatch                | fail     | 软件源内没有kpatch                                                  | [I8U0NB](https://gitee.com/openeuler/RISC-V/issues/I8U0NB) |
| amanda        | oe_test_amanda_amcheck                | fail     | /usr/bin/gettext: No such file or directory                   | [I8RX4Z](https://gitee.com/openeuler/RISC-V/issues/I8RX4Z) |
| clevis        | oe_test_install_clevis                | fail     | 密钥不可用                                                         | [I8S2GB](https://gitee.com/openeuler/RISC-V/issues/I8S2GB) |
|               | oe_test_high_nbde                     | fail     | 软件源没有包cryptsetup-reencrypt                                    | [I8S2JX](https://gitee.com/openeuler/RISC-V/issues/I8S2JX) |
|               | oe_test_tang_encrypt                  | x86 fail | 无法连接至目标端口                                                     | [I8S31S](https://gitee.com/openeuler/mugen/issues/I8S31S)  |
|               | oe_test_service_clevis-luks-askpass   | x86 fail | 测试用例编写错误？                                                     | [I8S30G](https://gitee.com/openeuler/mugen/issues/I8S30G)  |
| pywbem_0.12.4 | oe_test_pywbem_base_mof_compiler_01   | fail     | 连接失败                                                          | [I8VSD0](https://gitee.com/openeuler/RISC-V/issues/I8VSD0) |
|               | oe_test_pywbem_base_mof_compiler_02   | fail     | 连接失败                                                          | [I8VSD0](https://gitee.com/openeuler/RISC-V/issues/I8VSD0) |
| wsmancli      | oe_test_wsmancli_wseventmgr_02        | fail     | 网络原因无法下载对应测试文件                                                | [I8VSDM](https://gitee.com/openeuler/RISC-V/issues/I8VSDM) |
|               | oe_test_wsmancli_wseventmgr_01        | fail     | 网络原因无法下载对应测试文件                                                | [I8VSDM](https://gitee.com/openeuler/RISC-V/issues/I8VSDM) |
|               | oe_test_wsmancli_wsman_06             | fail     | 连接smash/ipmi时超时                                               | [I8VSDM](https://gitee.com/openeuler/RISC-V/issues/I8VSDM) |
|               | oe_test_wsmancli_wsman_07             | fail     | 连接网络时超时                                                       | [I8VSDM](https://gitee.com/openeuler/RISC-V/issues/I8VSDM) |
|               | oe_test_wsmancli_wsman_05             | fail     | 连接网络时超时                                                       | [I8VSDM](https://gitee.com/openeuler/RISC-V/issues/I8VSDM) |
|               | oe_test_wsmancli_wsman_02             | fail     | 缺少对应docker                                                    | [I8VSDM](https://gitee.com/openeuler/RISC-V/issues/I8VSDM) |
| hbase         | oe_test_service_hbase-regionserver    | fail     | 没有包hbase，hadoop-3.1-hdfs，hadoop-3.1-mapreduce，hadoop-3.1-yarn | [I8VS5N](https://gitee.com/openeuler/RISC-V/issues/I8VS5N) |
|               | oe_test_service_hbase-rest            | fail     | 没有包hbase，hadoop-3.1-hdfs，hadoop-3.1-mapreduce，hadoop-3.1-yarn | [I8VS5N](https://gitee.com/openeuler/RISC-V/issues/I8VS5N) |
|               | oe_test_service_hbase-thrift          | fail     | 没有包hbase，hadoop-3.1-hdfs，hadoop-3.1-mapreduce，hadoop-3.1-yarn | [I8VS5N](https://gitee.com/openeuler/RISC-V/issues/I8VS5N) |

- 截止目前为止将当前的测试分析结果整合进主文档 [pr#11](https://gitee.com/yunxiangluo/openEuler-RISC-V-23.09-independent/pulls/11)

- 将剩余的仅RV失败的测试用例提交至riscv issue [#I8XL9B](https://gitee.com/openeuler/RISC-V/issues/I8XL9B)

- 其他 mugen 测试失败issue

| issue 链接                                                   | issue 标题                                                                                                               |
|:----------------------------------------------------------:|:---------------------------------------------------------------------------------------------------------------------- |
| [I8T734](https://gitee.com/openeuler/mugen/issues/I8T734)  | smoke-basic-os 测试套 oe\_test\_CPUinfo\_001 用例在 openEuler 2309 RISC-V 测试失败                                               |
| [I8T7KM](https://gitee.com/openeuler/mugen/issues/I8T7KM)  | smoke-basic-os 测试套 oe\_test\_skopeo 用例在 openEuler 2309 RISC-V 测试失败                                                     |
| [I8TABT](https://gitee.com/openeuler/mugen/issues/I8TABT)  | libreswan 测试套 oe\_test\_libreswan\_ipsec\_setup 和 oe\_test\_libreswan\_ipsec\_systemctl 用例在 openEuler 2309 RISC-V 测试失败 |
| [I8T97I](https://gitee.com/openeuler/RISC-V/issues/I8T97I) | 2309 版本 mugen 测试 vdo 测试套部分用例超时                                                                                         |
| [I8TIK4](https://gitee.com/openeuler/mugen/issues/I8TIK4)  | smoke-basic-os 测试套 oe\_test\_MEMinfo\_001 用例在 openEuler 2309 RISC-V 测试失败                                               |
| [I8TLYZ](https://gitee.com/openeuler/RISC-V/issues/I8TLYZ) | smoke-basic-os 测试套 oe\_test\_perf\_top\_01 用例在 openEuler 2309 RISC-V QEMU 环境测试失败                                       |
| [I8TM3K](https://gitee.com/openeuler/RISC-V/issues/I8TM3K) | smoke-basic-os 测试套 oe\_test\_yumgroup\_001 用例在 openEuler 2309 RISC-V 测试失败                                              |
| [I8TMKQ](https://gitee.com/openeuler/mugen/issues/I8TMKQ)  | iSulad 测试套部分用例使用的 docker 镜像只支持 x86\_64 和 aarch64 架构                                                                    |
| [I8TMQ8](https://gitee.com/openeuler/RISC-V/issues/I8TMQ8) | iSulad 测试套部分用例在 openEuler 2309 RISC-V 测试失败                                                                             |
| [I8TNLH](https://gitee.com/openeuler/RISC-V/issues/I8TNLH) | audit 测试套部分用例在 openEuler 2309 RISC-V 异常超时                                                                              |
| [I8TNQ4](https://gitee.com/openeuler/mugen/issues/I8TNQ4)  | kernel 测试套 oe\_test\_kernel\_cmd\_01 用例在 openEuler 2309 测试失败                                                           |
| [I8TO6D](https://gitee.com/openeuler/RISC-V/issues/I8TO6D) | kernel 测试套 oe\_test\_hinic 用例在 openEuler 2309 RISC-V 测试失败                                                              |
| [I8TO66](https://gitee.com/openeuler/mugen/issues/I8TO66)  | kernel 测试套 oe\_test\_hinic 用例期望的内核模块名与实际不符                                                                             |
| [I8TPY5](https://gitee.com/openeuler/mugen/issues/I8TPY5)  | kernel 测试套 oe\_test\_nbd 用例在 openEuler 2309 有概率测试失败                                                                    |

#### 2.3 独立测试

- [RepChain技术支持](https://gitee.com/yunxiangluo/monthly/blob/master/202401/LicheePi4A%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%95.md)

- SG2042 / Milk-V Pioneer InferGLM / ChatGLM 测试
  
  - InferLLM 带 Vector 加速
  - ChatGLM.cpp 不带 Vector 加速
  - 产出文档 [InferLLM](https://github.com/KevinMX/PLCT-Tarsier-Works/blob/main/misc/month9/InferLLM/README.md)

### 3. 自动化测试工具开发

#### 3.1 Ruyi Mugen 开发

- mugen-ruyi 测试仓库从 Gitee 迁移到 GitHub [ruyi-mugen](https://github.com/weilinfox/ruyi-mugen) ，同时清除上游无用测试套及其历史，缩减仓库体积。 Jenkins CI 在已有环境的基础上做 ruyi-mugen 仓库的 GitHub 集成。

- ruyi-mugen 增加测试用例
  
  | 用例名                                                                                                                                     | 变更                         |
  |:---------------------------------------------------------------------------------------------------------------------------------------:|:-------------------------- |
  | [ruyi\_test\_common](https://github.com/weilinfox/ruyi-mugen/blob/ruyisdk/testcases/cli-test/ruyi/ruyi_test_common.sh)                  | 增加 ~/.local/state 目录测试     |
  | [ruyi\_test\_xdg](https://github.com/weilinfox/ruyi-mugen/blob/ruyisdk/testcases/cli-test/ruyi/ruyi_test_xdg.sh)                        | 增加 $XDG\_STATE\_DIR 环境变量测试 |
  | [ruyi\_test\_news](https://github.com/weilinfox/ruyi-mugen/blob/ruyisdk/testcases/cli-test/ruyi/ruyi_test_news.sh)                      | 新增用例， news 命令测试            |
  | [ruyi\_test\_device](https://github.com/weilinfox/ruyi-mugen/blob/ruyisdk/testcases/cli-test/ruyi/ruyi_test_device/ruyi_test_device.sh) | 新增用例， device 命令测试          |

- ruyi-mugen 测试用例 ruyi\_test\_device 更新
  
  | commit 标题                                               | commit 链接                                                                                          |
  |:-------------------------------------------------------:|:--------------------------------------------------------------------------------------------------:|
  | Update Jenkinsfile                                      | [ea9e2c5](https://github.com/weilinfox/ruyi-mugen/commit/ea9e2c5e361485c4ad797f1743102289e133e025) |
  | Run test with sudo                                      | [33d3bfa](https://github.com/weilinfox/ruyi-mugen/commit/33d3bfa9d0a83aabe035d536230ff58b5662c0e3) |
  | Run dep\_install with sudo                              | [8e32995](https://github.com/weilinfox/ruyi-mugen/commit/8e329950ed79d72796ba54ec41ca28ff7cd98f8b) |
  | Delete huawei oErv 2309 support                         | [829051f](https://github.com/weilinfox/ruyi-mugen/commit/829051f7edb239258fa9480a1f620a2487f7de75) |
  | chown log files                                         | [b0d2de4](https://github.com/weilinfox/ruyi-mugen/commit/b0d2de43c9a8c2b680e96e9fa378710b1c2ef658) |
  | Update README                                           | [842871d](https://github.com/weilinfox/ruyi-mugen/commit/842871df694d4986bdab297dff06af57022c3a3c) |
  | Update oe\_test\_ruyi\_cmake\_ninja execute time to 60m | [0a3d6e1](https://github.com/weilinfox/ruyi-mugen/commit/0a3d6e1c4b2267bdc7f53b5e897e1927adf5c7be) |
  | Update ruyi test version and remove oe from test names  | [22f7d72](https://github.com/weilinfox/ruyi-mugen/commit/22f7d726cfdbff928a8fd931344b6a54c5481171) |
  | Merge pull request #1 from KotorinMinami/ruyisdk        | [6f656fb](https://github.com/weilinfox/ruyi-mugen/commit/6f656fb2a638d16f67497229bd77170877df45de) |
  | Change device test tmp dir                              | [d984e0d](https://github.com/weilinfox/ruyi-mugen/commit/d984e0d529085ed88c1df376788db72a355d7752) |
  | Fix device test                                         | [b845e1f](https://github.com/weilinfox/ruyi-mugen/commit/b845e1fbab16560e0fec64d9ad7c12c9dcb3f6e3) |
  | Check ruyi install failure message                      | [7638bb4](https://github.com/weilinfox/ruyi-mugen/commit/7638bb451541b0b96e1a8d8a27855fc56b4ef886) |
  | Backup device logs                                      | [1fd449f](https://github.com/weilinfox/ruyi-mugen/commit/1fd449f423bb1594be5e36a35a0c7ab7315d4adf) |
  | Update device test timeout to 1440 min                  | [56dcce6](https://github.com/weilinfox/ruyi-mugen/commit/56dcce6e6d68b35c52fbf5a2f975e86f731e446a) |
  | Add ruyi unzip dependency                               | [916c6ba](https://github.com/weilinfox/ruyi-mugen/commit/916c6ba41b1a3684c74319069abc29b4afcab802) |
  | Update jenkins testing time to 24 hrs                   | [1400e23](https://github.com/weilinfox/ruyi-mugen/commit/1400e232b4510507f27715e87ef644adc4e384c3) |
  | Clean after each image test                             | [c5c70c5](https://github.com/weilinfox/ruyi-mugen/commit/c5c70c5ef0bc4acc0d04b1c8420ce6d91ac8a309) |
  | Add recursion\_run check point                          | [5b48c59](https://github.com/weilinfox/ruyi-mugen/commit/5b48c5915e8567a049c62b1a72c90e2d93d836bc) |
  | Update device log tarball name                          | [b303609](https://github.com/weilinfox/ruyi-mugen/commit/b303609247e524de7b700e097be3f65bff50f895) |
  | Check parameter length                                  | [8023e22](https://github.com/weilinfox/ruyi-mugen/commit/8023e2289146a35c7abe85ebc63c5ffc26653b26) |
  | Fix source libs                                         | [9bdd1e6](https://github.com/weilinfox/ruyi-mugen/commit/9bdd1e6e17fc2c479107d372036059fa5b465ac2) |
  | Fix log files                                           | [a02b4ec](https://github.com/weilinfox/ruyi-mugen/commit/a02b4ecb87b88c8297c24ea5a4ecb853cf454eba) |
  | Update test admin                                       | [af89fae](https://github.com/weilinfox/ruyi-mugen/commit/af89fae5505903dcbcb7718ff7436b8e7ca4da2c) |
  | Update ruyi                                             | [bd64974](https://github.com/weilinfox/ruyi-mugen/commit/bd649745b064797606604116c85d8b7cc7a04f51) |
  | Retry when download failed                              | [a38f1f3](https://github.com/weilinfox/ruyi-mugen/commit/a38f1f3cf5771eae7b0470bc0260980f0cbd553b) |
  | Redirect full log to tmp output file                    | [98ae4d7](https://github.com/weilinfox/ruyi-mugen/commit/98ae4d725b3f01025a36dcd2181e1d1f2f49791c) |

#### 3.2 Ruyi openQA 开发

##### 3.2.1 [autotest](https://github.com/trdthg/t-autotest)

搭建自动化测试框架

- Release
  目前提供了 Windows, Mac, Linux 三平台二进制文件，下载地址：<https://github.com/trdthg/t-autotest/releases>
  目前已发布版本：
  
  - [v0.2.0-rc2](https://github.com/trdthg/t-autotest/releases/tag/v0.2.0-rc2)
  - [v0.2.0-rc1](https://github.com/trdthg/t-autotest/releases/tag/v0.2.0-rc1)
  - [v0.1.0](https://github.com/trdthg/t-autotest/releases/tag/v0.1.0)

- Usage

`autotest -f <config.toml> -c <case.js>`

- 模块
  
  - cli 模块 (提供命令行工具入口进程)
    
    - Feature
      - autotest: 提供命令行入口
  
  - console 模块 (负责和机器终端交互)
    
    - ssh
      - Feature
        - 支持 private_key, password 登录
        - 在全局 shell session 交互式运行脚本
        - 在单独 shell session 运行命令
        - 等待 ssh tty 输出匹配文本
    - serial
      - Feature
        - 支持 password 登录
        - 在全局 session 交互式运行脚本
        - 等待 tty 输出匹配文本
        - 捕获所有串口输出文本，包括系统 boot 阶段 [输出参考](../doc/autotest/serial-log-example.txt)
    - vnc
      - Feature
        - 支持 vnc 连接，密码登录
        - 提供密码登录
  
  - binding 模块 (负责测试脚本对接)
    
    - 语言支持
      - js (基于 quickjs 完成 JS 测试脚本运行)
    - api
      - 通用
      - sleep: 为脚本提供统一的 sleep 函数实现
      - get_env: 获取 `config.toml` 定义的环境变量
      - assert_script_run: 根据配置文件自动选择 console, serial 优先于 ssh. 根据命令返回值判断，如果不为 0, 则会 panic
      - script_run: 同上，只运行命令，不处理返回值
      - write_string: 同上，只输入一段字符串，不包含控制字符
      - ssh
      - ssh_assert_script_run_global: 调用 ssh 在主 session 执行脚本，断言命令返回值
      - ssh_script_run_seperate: 调用 ssh 在分离 session 执行脚本，其他同上
      - ssh_script_run_global: 调用 ssh 在主 session 执行脚本，只确保执行完成，不超时
      - ssh_write_string: 调用 ssh 在主 session 写入文本
      - serial
      - serial_assert_script_run_global: 调用 serial 在主 session 执行脚本
      - serial_script_run_global: 调用 serial 在主 session 执行脚本，断言命令返回值
      - serial_write_string: 调用 serial 在主 session 执行脚本
      - vnc
      - assert_screen: 调用 vnc 断言屏幕
      - check_screen: 调用 vnc 比较屏幕
      - mouse_click: 调用 vnc 鼠标点击
      - mouse_move: 调用 vnc 移动鼠标
      - mouse_hide: 调用 vnc 隐藏鼠标
  
  - t-vnc 模块 ([fork](https://github.com/trdthg/rust-vnc) 自 whitequark/rust-vnc, MIT)
    
    - 解决 windows 无法编译
  
  - config 模块 (提供测试，命令行 需要的通用配置文件解析)
  
  - util 模块 (工具库)
  
  - ci (github action)
    
    - [`test.yaml`](https://github.com/trdthg/t-autotest/actions/workflows/test.yaml): 提交代码或 pr 时运行 cargo check, test, fmt, clippy, build(linux)
    - [`build.yaml`](https://github.com/trdthg/t-autotest/actions/workflows/release.yaml): 自动分发 linux, macos, windows 三平台二进制文件。[下载地址](https://github.com/trdthg/t-autotest/releases)

- 测试用例
  
  - ruyi 测试
  
  - 测试用例：[ruyisdk.js](https://gitee.com/yan-mingzhu/autotest-examples/blob/master/ruyi/ruyisdk.js)
  
  - poineerbox - riscv - debian
    
    - 宿主机：wiondows
    - 测试方法：ssh
    - 配置文件：<https://gitee.com/yan-mingzhu/autotest-examples/blob/master/machine/poiner.toml>
  
  - VF2 - riscv - ubuntu
    
    - 宿主机：arch
    - 测试方法：serial
    - 配置文件：<https://gitee.com/yan-mingzhu/autotest-examples/blob/master/machine/VF2.toml>
  
  - 树莓派 3B 1.2 - aarch - debian-bookworm (手边无RISC-V开发板，使用arm开发板模拟串口测试过程)
    
    - 宿主机：nixos
    - 测试方法：ssh + serial
    - 配置文件：<https://gitee.com/yan-mingzhu/autotest-examples/blob/master/machine/rasp-pi.toml>

#### 3.3 openEuler Mugen 开发

- mugen pr

| pr 链接                                                | pr 标题                                                                                                    |
|:----------------------------------------------------:|:-------------------------------------------------------------------------------------------------------- |
| [2313](https://gitee.com/openeuler/mugen/pulls/2313) | smoke-basic-os: oe\_test\_CPUinfo\_001 failed on riscv64                                                 |
| [2314](https://gitee.com/openeuler/mugen/pulls/2314) | smoke-basic-os: oe\_test\_skopeo failed on riscv64                                                       |
| [2319](https://gitee.com/openeuler/mugen/pulls/2319) | libreswan: oe\_test\_libreswan\_ipsec\_systemctl and oe\_test\_libreswan\_ipsec\_setup failed on riscv64 |
| [2325](https://gitee.com/openeuler/mugen/pulls/2325) | smoke-basic-os: oe\_test\_MEMinfo\_001 failed on riscv64                                                 |
| [2330](https://gitee.com/openeuler/mugen/pulls/2330) | kernel: oe\_test\_nbd add sleep time                                                                     |
| [2331](https://gitee.com/openeuler/mugen/pulls/2331) | kernel: oe\_test\_kernel\_cmd\_01 test failed on openEuler 2309                                          |

- mugen docs

mugen 测试详细文档 《 mugen 原理和扩展应用》 [文档](https://gitlab.inuyasha.love/weilinfox/plct-working/-/blob/master/Note/mugen-last/mugen-last.md)

- 进行mugen的样例分析，[commit](https://github.com/KotorinMinami/plct-working/commit/d066b00565ef8af997115451ede3c18f65148e3b)

- 对分析得到的问题进行issue的提交, include：
  
  - pyyaml解析问题：[I8U4TG](https://gitee.com/openeuler/mugen/issues/I8U4TG?from=project-issue)
  
  - 输出与预期匹配问题：[I8U4Z0](https://gitee.com/openeuler/mugen/issues/I8U4Z0?from=project-issue)
  
  - 软件安装后仍command not found问题：[I8U4S6](https://gitee.com/openeuler/mugen/issues/I8U4S6?from=project-issue)

### 4. 技术调研

#### 4.1 RISC-V 开发板对操作系统的支持情况调研

- [调研主表格(每3个月进行更新)](https://docs.qq.com/sheet/DUE9kU0RQR1lBUVh6?tab=7qvj2j&login_t=1706737934140)

从基础7种开发板，扩展为72种开发板，24种操作系统。

- 完成 SOC 系统集成调研条目 18 条，关联 GD32VF 系列、 CH32V 系列、 ESP32-C3 系列、INTEL Nios V 系列和 Renode 模拟器，产出调研文档 [mcu\_invest.md](https://gitlab.inuyasha.love/weilinfox/plct-working/-/tree/master/Note/ruyisdk/MCU/mcu_invest.md)

- [Aries Embedded FIVEBerry-A0A](https://github.com/Pagerd/PLCT/tree/main/Report/24-Jan/week30/investigation/AriesEmbeddedFIVEBerry-A0A.md)

- [DongshanNezhaSTU RISCV64 Allwinner D1-H Board](https://github.com/Pagerd/PLCT/tree/main/Report/24-Jan/week30/investigation/DongshanNezhaSTURISCV64AllwinnerD1-HBoard.md)

- [MangoPi MQ-Pro SBC](https://github.com/Pagerd/PLCT/tree/main/Report/24-Jan/week30/investigation/MangoPiMQ-ProSBC.md)

- [OpenISAVEGAboard](https://github.com/Pagerd/PLCT/tree/main/Report/24-Jan/week30/investigation/OpenISAVEGAboard.md)

- [Sipeed M1s Dock](https://github.com/Pagerd/PLCT/tree/main/Report/24-Jan/week30/investigation/SipeedM1sDock.md)

- [SipeedLonganNano](https://github.com/Pagerd/PLCT/tree/main/Report/24-Jan/week30/investigation/SipeedLonganNano.md)

- [SparkFunRED-VThingsPlus](https://github.com/Pagerd/PLCT/tree/main/Report/24-Jan/week30/investigation/SparkFunRED-VThingsPlus.md)

- [STAR64 Model-A](https://github.com/Pagerd/PLCT/tree/main/Report/24-Jan/week30/investigation/STAR64Model-A.md)

- [TelinkTLSR9518ADK80D](https://github.com/Pagerd/PLCT/tree/main/Report/24-Jan/week30/investigation/TelinkTLSR9518ADK80D.md)

- [XIAOESP32C3](https://github.com/Pagerd/PLCT/tree/main/Report/24-Jan/week30/investigation/XIAOESP32C3.md)

- [以下开发板操作系统支持情况](https://github.com/trdthg/plct/tree/main/doc/ruyi/board-os-support.md)
  
  - M5Stack STAMP-C3
  - ITE IT82XX2 series
  - ITE IT8XXX2 series
  - Microchip M2GL025 Mi-V
  - Microchip mpfs_icicle

- [以下开发板操作系统支持情况](https://github.com/KotorinMinami/plct-working/blob/main/RUYI/borad_OS.md) 
  
  - ICE-V Wireless 
  - OpenTitan Earl Grey 
  - BeagleV Ahead 

#### 4.2 RISC-V IDE 调研（未进行技术分享内容）

- [基于 VSCode，尝试走通 RISC-V 架构 C 的编译、调试流程](https://github.com/ruyisdk/pmd/issues/5) -> 文档见 [此处](https://github.com/KevinMX/PLCT-Tarsier-Works/blob/main/misc/month9/vscode.md)

- [基于 Eclipse CDT ，了解并以任一个demo走通RISC-V GDB调试过程，输出文档和视频 #4](https://github.com/ruyisdk/pmd/issues/4)进行了初步的阶段性结果，当前Eclipse CDT并不支持RISC-V GDB调试，添加了调研[结果文档](./week30/Eclipse_CDT.md)[commit](https://github.com/ruyisdk/pmd/commit/99e261e2a7cc7741a1ff43bb5ebadeeadd5a1f92)

- 调研 Go 在 VSCode 上的交叉编译，见 [基于VS Code 实现Golang 的 RISC-V 开发](https://github.com/ArielHeleneto/Work-PLCT/blob/master/goriscv/README.md)。

#### 4.3 进行DynamoRIO的学习，尝试跑通RISC-V上的用例

#### 4.4 其他RuyiSDK发布的调研

- [香山标准指令集工具链调研测试](https://github.com/ruyisdk/pmd/issues/13)：详见 ruyisdk/ruyi#55

### 5. 其他项目

#### 5.1 qtrvsim

- 处理闪退缺陷，见 [cvut/qtrvsim#95](https://github.com/cvut/qtrvsim/issues/95#issuecomment-1911872209)
- 验证不支持指令集情况，见 [cvut/qtrvsim#96](https://github.com/cvut/qtrvsim/issues/96)

#### 5.2 SAIL

任务分配，继续2024.11月-12月的基础继续进行技术储备，详见之前的PLCT技术分享

### 6. 职工

#### 6.1 蔡玮霖

##### 6.1.1 RuyiSDK

- 完成调研任务《基于 Eclipse 以任一个 demo 走通 RUST RISC-V 交叉编译和运行过程》，产出调研文档《Eclipse Rust 交叉编译环境的配置和简单调试的实现》 [任务页面](https://github.com/ruyisdk/pmd/issues/6) [文档](https://gitlab.inuyasha.love/weilinfox/plct-working/-/blob/master/Note/eclipse-riscv/rust.md)

- 提交 Eclipse Rust 调研报告
  
  | commit 标题                         | commit 链接                                                                                 |
  |:---------------------------------:|:-----------------------------------------------------------------------------------------:|
  | Add rust on eclipse investigation | [898c108](https://github.com/ruyisdk/pmd/commit/898c108e91aa432993039487d5a20594930cb6a7) |

- 完成 SOC 系统集成调研条目 18 条，关联 GD32VF 系列、 CH32V 系列、 ESP32-C3 系列、INTEL Nios V 系列和 Renode 模拟器，产出调研文档 [mcu\_invest.md](https://gitlab.inuyasha.love/weilinfox/plct-working/-/tree/master/Note/ruyisdk/MCU/mcu_invest.md)

- mugen-ruyi 测试仓库从 Gitee 迁移到 GitHub [ruyi-mugen](https://github.com/weilinfox/ruyi-mugen) ，同时清除上游无用测试套及其历史，缩减仓库体积。 Jenkins CI 在已有环境的基础上做 ruyi-mugen 仓库的 GitHub 集成。

- ruyi-mugen 增加测试用例
  
  | 用例名                                                                                                                                     | 变更                         |
  |:---------------------------------------------------------------------------------------------------------------------------------------:|:-------------------------- |
  | [ruyi\_test\_common](https://github.com/weilinfox/ruyi-mugen/blob/ruyisdk/testcases/cli-test/ruyi/ruyi_test_common.sh)                  | 增加 ~/.local/state 目录测试     |
  | [ruyi\_test\_xdg](https://github.com/weilinfox/ruyi-mugen/blob/ruyisdk/testcases/cli-test/ruyi/ruyi_test_xdg.sh)                        | 增加 $XDG\_STATE\_DIR 环境变量测试 |
  | [ruyi\_test\_news](https://github.com/weilinfox/ruyi-mugen/blob/ruyisdk/testcases/cli-test/ruyi/ruyi_test_news.sh)                      | 新增用例， news 命令测试            |
  | [ruyi\_test\_device](https://github.com/weilinfox/ruyi-mugen/blob/ruyisdk/testcases/cli-test/ruyi/ruyi_test_device/ruyi_test_device.sh) | 新增用例， device 命令测试          |
+ ruyi-mugen 测试用例 ruyi\_test\_device 更新
  
  | commit 标题                                               | commit 链接                                                                                          |
  |:-------------------------------------------------------:|:--------------------------------------------------------------------------------------------------:|
  | Update Jenkinsfile                                      | [ea9e2c5](https://github.com/weilinfox/ruyi-mugen/commit/ea9e2c5e361485c4ad797f1743102289e133e025) |
  | Run test with sudo                                      | [33d3bfa](https://github.com/weilinfox/ruyi-mugen/commit/33d3bfa9d0a83aabe035d536230ff58b5662c0e3) |
  | Run dep\_install with sudo                              | [8e32995](https://github.com/weilinfox/ruyi-mugen/commit/8e329950ed79d72796ba54ec41ca28ff7cd98f8b) |
  | Delete huawei oErv 2309 support                         | [829051f](https://github.com/weilinfox/ruyi-mugen/commit/829051f7edb239258fa9480a1f620a2487f7de75) |
  | chown log files                                         | [b0d2de4](https://github.com/weilinfox/ruyi-mugen/commit/b0d2de43c9a8c2b680e96e9fa378710b1c2ef658) |
  | Update README                                           | [842871d](https://github.com/weilinfox/ruyi-mugen/commit/842871df694d4986bdab297dff06af57022c3a3c) |
  | Update oe\_test\_ruyi\_cmake\_ninja execute time to 60m | [0a3d6e1](https://github.com/weilinfox/ruyi-mugen/commit/0a3d6e1c4b2267bdc7f53b5e897e1927adf5c7be) |
  | Update ruyi test version and remove oe from test names  | [22f7d72](https://github.com/weilinfox/ruyi-mugen/commit/22f7d726cfdbff928a8fd931344b6a54c5481171) |
  | Merge pull request #1 from KotorinMinami/ruyisdk        | [6f656fb](https://github.com/weilinfox/ruyi-mugen/commit/6f656fb2a638d16f67497229bd77170877df45de) |
  | Change device test tmp dir                              | [d984e0d](https://github.com/weilinfox/ruyi-mugen/commit/d984e0d529085ed88c1df376788db72a355d7752) |
  | Fix device test                                         | [b845e1f](https://github.com/weilinfox/ruyi-mugen/commit/b845e1fbab16560e0fec64d9ad7c12c9dcb3f6e3) |
  | Check ruyi install failure message                      | [7638bb4](https://github.com/weilinfox/ruyi-mugen/commit/7638bb451541b0b96e1a8d8a27855fc56b4ef886) |
  | Backup device logs                                      | [1fd449f](https://github.com/weilinfox/ruyi-mugen/commit/1fd449f423bb1594be5e36a35a0c7ab7315d4adf) |
  | Update device test timeout to 1440 min                  | [56dcce6](https://github.com/weilinfox/ruyi-mugen/commit/56dcce6e6d68b35c52fbf5a2f975e86f731e446a) |
  | Add ruyi unzip dependency                               | [916c6ba](https://github.com/weilinfox/ruyi-mugen/commit/916c6ba41b1a3684c74319069abc29b4afcab802) |
  | Update jenkins testing time to 24 hrs                   | [1400e23](https://github.com/weilinfox/ruyi-mugen/commit/1400e232b4510507f27715e87ef644adc4e384c3) |
  | Clean after each image test                             | [c5c70c5](https://github.com/weilinfox/ruyi-mugen/commit/c5c70c5ef0bc4acc0d04b1c8420ce6d91ac8a309) |
  | Add recursion\_run check point                          | [5b48c59](https://github.com/weilinfox/ruyi-mugen/commit/5b48c5915e8567a049c62b1a72c90e2d93d836bc) |
  | Update device log tarball name                          | [b303609](https://github.com/weilinfox/ruyi-mugen/commit/b303609247e524de7b700e097be3f65bff50f895) |
  | Check parameter length                                  | [8023e22](https://github.com/weilinfox/ruyi-mugen/commit/8023e2289146a35c7abe85ebc63c5ffc26653b26) |
  | Fix source libs                                         | [9bdd1e6](https://github.com/weilinfox/ruyi-mugen/commit/9bdd1e6e17fc2c479107d372036059fa5b465ac2) |
  | Fix log files                                           | [a02b4ec](https://github.com/weilinfox/ruyi-mugen/commit/a02b4ecb87b88c8297c24ea5a4ecb853cf454eba) |
  | Update test admin                                       | [af89fae](https://github.com/weilinfox/ruyi-mugen/commit/af89fae5505903dcbcb7718ff7436b8e7ca4da2c) |
  | Update ruyi                                             | [bd64974](https://github.com/weilinfox/ruyi-mugen/commit/bd649745b064797606604116c85d8b7cc7a04f51) |
  | Retry when download failed                              | [a38f1f3](https://github.com/weilinfox/ruyi-mugen/commit/a38f1f3cf5771eae7b0470bc0260980f0cbd553b) |
  | Redirect full log to tmp output file                    | [98ae4d7](https://github.com/weilinfox/ruyi-mugen/commit/98ae4d725b3f01025a36dcd2181e1d1f2f49791c) |
- RUYI 包管理 v0.3 测试，提交 x86\_64 Fedora 38 、 x86\_64 Ubuntu 22.04 LTS 、 x86\_64 openEuler 23.09 、 riscv64 Container RevyOS 20231210 、 riscv64 openEuler 23.09 五个环境的测试结果
  
  | pr 标题                 | pr 链接                                                    |
  |:---------------------:|:--------------------------------------------------------:|
  | 添加 ruyi-mugen 测试日志和报告 | [!2](https://gitee.com/yunxiangluo/ruyisdk-test/pulls/2) |
  | 添加自动化测试相关视频           | [!5](https://gitee.com/yunxiangluo/ruyisdk-test/pulls/5) |

- RUYI 包管理 mugen 测试失败用例提交 issue
  
  | issue 标题                                              | issue 链接                                         |
  |:-----------------------------------------------------:|:------------------------------------------------:|
  | 20240116 版本 self uninstall --purge 没有删除 state/ruyi 目录 | [#45](https://github.com/ruyisdk/ruyi/issues/45) |
  | 镜像下载是否需要支持断点续传                                        | [#64](https://github.com/ruyisdk/ruyi/issues/64) |

- RUYI 包管理文档添加，更新 ruyisdk/docs 仓库和 ruyisdk/doc4test 仓库
  
  | pr 标题                            | pr 链接                                          |
  |:--------------------------------:|:----------------------------------------------:|
  | Add new feature for v0.3 release | [#31](https://github.com/ruyisdk/docs/pull/31) |
  
  | commit 标题                             | commit 链接                                                                                      |
  |:-------------------------------------:|:----------------------------------------------------------------------------------------------:|
  | Add 20240116 new feature              | [c443cf7](https://github.com/ruyisdk/docs/commit/c443cf7fe3b8551865ccf48a929950c5611b3ed2)     |
  | Add 20240116 page to vitepress config | [b3da86d](https://github.com/ruyisdk/docs/commit/b3da86db9a689f570d5e483ea6d1cc1eda601fc8)     |
  | Add v0.3 note                         | [26ec191](https://github.com/ruyisdk/docs/commit/26ec19107226c7bacf9912eb18382fa53f4d3382)     |
  | Add github release note               | [1c0311b](https://github.com/ruyisdk/docs/commit/1c0311bd37b0ebec41e1cce71702adda059e04dc)     |
  | Add 20240116's new feature            | [2776153](https://github.com/ruyisdk/doc4test/commit/27761535219d2fb2ad69b9e91e77d5f28248f633) |
  | Add sudo note                         | [64dc1ac](https://github.com/ruyisdk/doc4test/commit/64dc1ac8828edee995458510be0dc77c2ebbde94) |

##### 6.1.2 技术分享

- 1 月 24 日周三做技术分享《基于 Eclipse 介绍 Rust 在 IDE 上的交叉编译和调试》，[提纲](https://gitlab.inuyasha.love/weilinfox/plct-working/-/blob/master/Note/eclipse-riscv/eclipse-rust/eclipse-rust.md)和 [PPT](https://gitlab.inuyasha.love/weilinfox/plct-working/-/blob/master/Note/eclipse-riscv/eclipse-rust/%E5%9F%BA%E4%BA%8E_Eclipse_%E4%BB%8B%E7%BB%8D_Rust_%E5%9C%A8_IDE_%E4%B8%8A%E7%9A%84%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E5%92%8C%E8%B0%83%E8%AF%95.pptx)

##### 6.1.3 Jenkins CI 架构调整

17 日开始 GitHub 无法裸连，需要添加一个旁路网关。由于测试 QEMU Agent 搭建在容器中，则需要一个新容器搭建网关。实体测试机则在同网段添加实体网关。

另外远程测试机使用 TCP 模式也出现无法稳定连接 Jenkins CI 的情况，故将主页转移到境内。

```
                                           +---------+
+-------------------+                   +--| browser |
| main server       |      GuangZhou    |  +---------+
|    +------------+ |   +------------+  |  +--------+
|  +-| Jenkins CI ======= web server |<-+->| github |
|  | +------------+ |   +------------+  |  +--------+
|  |    +---------+ |                   |  +------------------------+
|  +----+ Agent 0 | |                   |  |   +------------------+ |
|  |    +---------+ |                   |  | +-+ External Agent 1 | |
|  |    +---------+ |                   |  | | +------------------+ |
|  +----+ Agent 1 | |                   |  | | +------------------+ |
|  |    +---------+ |                   |  | +-+ External Agent 2 | |
| ...       ...     |                   +--+ | +------------------+ |
|  |    +---------+ |                      |...        ...          |
|  +----+ Agent N | |                      | | +------------------+ |
|  |    +---------+ |                      | +-+ External Agent N | |
|  |    +---------+ |                      | | +------------------+ |
|  +----+ Gateway | |                      | | +---------+          |
|       +---------+ |                      | +-+ Gateway |          |
+-------------------+                      |   +---------+          |
                                           +------------------------+
```

##### 6.1.4 oErv

- mugen issue

| issue 链接                                                   | issue 标题                                                                                                               |
|:----------------------------------------------------------:|:---------------------------------------------------------------------------------------------------------------------- |
| [I8T734](https://gitee.com/openeuler/mugen/issues/I8T734)  | smoke-basic-os 测试套 oe\_test\_CPUinfo\_001 用例在 openEuler 2309 RISC-V 测试失败                                               |
| [I8T7KM](https://gitee.com/openeuler/mugen/issues/I8T7KM)  | smoke-basic-os 测试套 oe\_test\_skopeo 用例在 openEuler 2309 RISC-V 测试失败                                                     |
| [I8TABT](https://gitee.com/openeuler/mugen/issues/I8TABT)  | libreswan 测试套 oe\_test\_libreswan\_ipsec\_setup 和 oe\_test\_libreswan\_ipsec\_systemctl 用例在 openEuler 2309 RISC-V 测试失败 |
| [I8T97I](https://gitee.com/openeuler/RISC-V/issues/I8T97I) | 2309 版本 mugen 测试 vdo 测试套部分用例超时                                                                                         |
| [I8TIK4](https://gitee.com/openeuler/mugen/issues/I8TIK4)  | smoke-basic-os 测试套 oe\_test\_MEMinfo\_001 用例在 openEuler 2309 RISC-V 测试失败                                               |
| [I8TLYZ](https://gitee.com/openeuler/RISC-V/issues/I8TLYZ) | smoke-basic-os 测试套 oe\_test\_perf\_top\_01 用例在 openEuler 2309 RISC-V QEMU 环境测试失败                                       |
| [I8TM3K](https://gitee.com/openeuler/RISC-V/issues/I8TM3K) | smoke-basic-os 测试套 oe\_test\_yumgroup\_001 用例在 openEuler 2309 RISC-V 测试失败                                              |
| [I8TMKQ](https://gitee.com/openeuler/mugen/issues/I8TMKQ)  | iSulad 测试套部分用例使用的 docker 镜像只支持 x86\_64 和 aarch64 架构                                                                    |
| [I8TMQ8](https://gitee.com/openeuler/RISC-V/issues/I8TMQ8) | iSulad 测试套部分用例在 openEuler 2309 RISC-V 测试失败                                                                             |
| [I8TNLH](https://gitee.com/openeuler/RISC-V/issues/I8TNLH) | audit 测试套部分用例在 openEuler 2309 RISC-V 异常超时                                                                              |
| [I8TNQ4](https://gitee.com/openeuler/mugen/issues/I8TNQ4)  | kernel 测试套 oe\_test\_kernel\_cmd\_01 用例在 openEuler 2309 测试失败                                                           |
| [I8TO6D](https://gitee.com/openeuler/RISC-V/issues/I8TO6D) | kernel 测试套 oe\_test\_hinic 用例在 openEuler 2309 RISC-V 测试失败                                                              |
| [I8TO66](https://gitee.com/openeuler/mugen/issues/I8TO66)  | kernel 测试套 oe\_test\_hinic 用例期望的内核模块名与实际不符                                                                             |
| [I8TPY5](https://gitee.com/openeuler/mugen/issues/I8TPY5)  | kernel 测试套 oe\_test\_nbd 用例在 openEuler 2309 有概率测试失败                                                                    |

- mugen pr

| pr 链接                                                | pr 标题                                                                                                    |
|:----------------------------------------------------:|:-------------------------------------------------------------------------------------------------------- |
| [2313](https://gitee.com/openeuler/mugen/pulls/2313) | smoke-basic-os: oe\_test\_CPUinfo\_001 failed on riscv64                                                 |
| [2314](https://gitee.com/openeuler/mugen/pulls/2314) | smoke-basic-os: oe\_test\_skopeo failed on riscv64                                                       |
| [2319](https://gitee.com/openeuler/mugen/pulls/2319) | libreswan: oe\_test\_libreswan\_ipsec\_systemctl and oe\_test\_libreswan\_ipsec\_setup failed on riscv64 |
| [2325](https://gitee.com/openeuler/mugen/pulls/2325) | smoke-basic-os: oe\_test\_MEMinfo\_001 failed on riscv64                                                 |
| [2330](https://gitee.com/openeuler/mugen/pulls/2330) | kernel: oe\_test\_nbd add sleep time                                                                     |
| [2331](https://gitee.com/openeuler/mugen/pulls/2331) | kernel: oe\_test\_kernel\_cmd\_01 test failed on openEuler 2309                                          |

- mugen docs

mugen 测试详细文档 《 mugen 原理和扩展应用》 [文档](https://gitlab.inuyasha.love/weilinfox/plct-working/-/blob/master/Note/mugen-last/mugen-last.md)

#### 6.2 郑景坤

##### 6.2.1 RuyiSDK

- RuyiSDK IDE 调研工作：[基于 VSCode，尝试走通 RISC-V 架构 C 的编译、调试流程](https://github.com/ruyisdk/pmd/issues/5) -> 文档见 [此处](https://github.com/KevinMX/PLCT-Tarsier-Works/blob/main/misc/month9/vscode.md)
- RuyiSDK / 开发板操作系统支持情况调研
  - BeagleV Fire
  - ESP32C3 LUATOS CORE
  - SiFive HiFive 1
  - SiFive HiFive 1 Rev B

##### 6.2.2 RuyiSDK 测试

LPi4A：

- openEuler
  - mugen 自动化测试 [Gitee](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240116/oERV2309-LPi4A.md)
  - 镜像刷写测试 [Gitee](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240116/LPi4A-Pioneer-%E9%95%9C%E5%83%8F%E5%88%B7%E5%86%99%E6%B5%8B%E8%AF%95.md)

Milk-V Pioneer / SG2042

- openEuler
  - mugen 自动化测试 [Gitee](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240116/oERV2309-SG2042-Pioneer.md)
  - 镜像刷写测试 [Gitee](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240116/LPi4A-Pioneer-%E9%95%9C%E5%83%8F%E5%88%B7%E5%86%99%E6%B5%8B%E8%AF%95.md)
- Fedora
  - mugen 自动化测试 [Gitee](https://gitee.com/yunxiangluo/ruyisdk-test/pulls/4)

Milk-V Duo

- buildroot
  - 镜像刷写测试 [屏幕录像](https://asciinema.org/a/rsenSOJwdlmUXcJ8sQwubPgtr?autoplay=1)

更新刷写文档：[commit](https://gitee.com/KevinMX/ruyisdk-test/commit/3a3c8798a4e24a148cb3efb804347f6b60f55230)

- 缺陷列表

| Issue                                                                                                                       | 详细信息                                                     |
| --------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------- |
| [RISC-V 开发板系统镜像安装工具，增加 4 款 RISC-V 开发板](https://github.com/ruyisdk/ruyi/issues/41)                                           | 确定 D1 两款开发板硬件 & DTB 情况：硬件略有不同，系统已兼容两种开发板，建议手动修改 GRUB 启动项 |
| [Device provision: warn users about adding udev rules for LPi4A](https://github.com/ruyisdk/ruyi/issues/39)                 | fastboot 需要特权或配置 udev 规则，已修复                             |
| [emulator/qemu-system-riscv-upstream: missing libfdt.so.1 on Ubuntu 20.04.3 LTS](https://github.com/ruyisdk/ruyi/issues/60) | 打包问题，已修复                                                 |
| [Device provision: link is dead?](https://github.com/ruyisdk/ruyi/issues/59)                                                | package index 问题，已修复                                     |

##### 6.2.2 openEuler RISC-V

- oERV 24.03 测试调研工作
  - mmtest on SG2042 测试/摸底工作
    - SG2042 上能跑通，但出现了计划外的硬件问题（PCI-E Switch 风扇故障），更换了桥片风扇后继续进行测试
    - 测试 log 见 [mmtests](https://github.com/KevinMX/PLCT-Tarsier-Works/blob/main/misc/month9/mmtests/)
    - 结果分析见：[week1](https://github.com/KevinMX/PLCT-Tarsier-Works/blob/main/outcome/month9/weekly/week1.md)
    - mmtest 会拉起 LTP 进行测试，有重叠部分
    - 安装脚本更新：[commit](https://gitee.com/KevinMX/ltpstress-for-openeuler/commit/49135c9c02a2f8bfd2af28ae3756d9d8d4e56234)
  - 测试策略更新：[PR](https://gitee.com/yunxiangluo/openEuler-RISCV-2403LTS-Pretest/pulls/2)
  - 测试结果分析
    - LPi4A: LTP [oERV](https://github.com/KevinMX/PLCT-Tarsier-Works/blob/main/misc/month8/2309-hw-pre_mainline/LTP/LPi4A/)
    - Pioneer: LTP [oERV](https://github.com/KevinMX/PLCT-Tarsier-Works/blob/main/misc/month8/2309-hw-pre_mainline/LTP/Pioneer_v1p3/result_analysis.csv) / [RevyOS](https://github.com/KevinMX/PLCT-Tarsier-Works/blob/main/misc/month8/RevyOS_20231220_Pioneer_v1p3/result-analysis.csv)
- 修包工作：iozone spec 添加 riscv64 支持 [!PR](https://gitee.com/src-openeuler/iozone/pulls/7) （已合入）
- 调查 oERV perf top SIGSEGV 问题，并提交 core dump 结果：[I8TLYZ](https://gitee.com/openeuler/RISC-V/issues/I8TLYZ?from=project-issue#note_24150341_link)

##### 6.2.3 其他工作

- 山大 SG2042 服务器网络接入
  - 搭建 Tailscale DERP 中继节点，优化国内连接延迟
  - 尝试解决 Share out machine 无法使用自建 DERP 节点的问题
  - 记录 [文档](https://github.com/KevinMX/PLCT-Tarsier-Works/blob/main/misc/month9/tailscale.md)
- 技术报告：[开源自动化测试工具 openQA 在 openEuler RISC-V 测试中的使用](https://github.com/KevinMX/PLCT-Tarsier-Works/blob/main/reports/month9/开源自动化测试工具openQA在openEuler%20RISC-V测试中的使用.pdf)
- SG2042 / Milk-V Pioneer InferGLM / ChatGLM 测试
  - InferLLM 带 Vector 加速
  - ChatGLM.cpp 不带 Vector 加速
  - 产出文档 [InferLLM](https://github.com/KevinMX/PLCT-Tarsier-Works/blob/main/misc/month9/InferLLM/README.md)

#### 6.3 朱旭昌

##### 6.3.1 RuyiSDK

- 在Lpi4A的revyos系统上进行了ruyi 20240116 mugen自动测试，测试用例全部通过，产出文档 [md](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240116/RevyOS-LPi4A.md)

- 在pioneer box SG2042的fedora系统上进行了ruyi 20240116 mugen自动测试，测试用例全部通过，产出文档 [md](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240116/fedora-SG2042-Pioneer.md)

- 对ruyi镜像烧录工具进行了测试，在Milk V duo上成功使用ruyi镜像烧录工具烧录镜像并启动 [md](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240116/MilkV-Duo-%E9%95%9C%E5%83%8F%E5%88%B7%E5%86%99%E6%B5%8B%E8%AF%95.md)

- 发现ruyi镜像烧录工具在下载镜像时出现的网络错误 [#issue46](https://github.com/ruyisdk/ruyi/issues/46)

- 对调研 [基于 Eclipse CDT ，了解并以任一个demo走通RISC-V GDB调试过程，输出文档和视频 #4](https://github.com/ruyisdk/pmd/issues/4)进行了初步的阶段性结果，当前Eclipse CDT并不支持RISC-V GDB调试，添加了调研[结果文档](./week30/Eclipse_CDT.md)[commit](https://github.com/ruyisdk/pmd/commit/99e261e2a7cc7741a1ff43bb5ebadeeadd5a1f92)

- 进行开发板调研工作，目前共调研了10个开发板
  
  - [Aries Embedded FIVEBerry-A0A](https://github.com/Pagerd/PLCT/tree/main/Report/24-Jan/week30/investigation/AriesEmbeddedFIVEBerry-A0A.md)
  - [DongshanNezhaSTU RISCV64 Allwinner D1-H Board](https://github.com/Pagerd/PLCT/tree/main/Report/24-Jan/week30/investigation/DongshanNezhaSTURISCV64AllwinnerD1-HBoard.md)
  - [MangoPi MQ-Pro SBC](https://github.com/Pagerd/PLCT/tree/main/Report/24-Jan/week30/investigation/MangoPiMQ-ProSBC.md)
  - [OpenISAVEGAboard](https://github.com/Pagerd/PLCT/tree/main/Report/24-Jan/week30/investigation/OpenISAVEGAboard.md)
  - [Sipeed M1s Dock](https://github.com/Pagerd/PLCT/tree/main/Report/24-Jan/week30/investigation/SipeedM1sDock.md)
  - [SipeedLonganNano](https://github.com/Pagerd/PLCT/tree/main/Report/24-Jan/week30/investigation/SipeedLonganNano.md)
  - [SparkFunRED-VThingsPlus](https://github.com/Pagerd/PLCT/tree/main/Report/24-Jan/week30/investigation/SparkFunRED-VThingsPlus.md)
  - [STAR64 Model-A](https://github.com/Pagerd/PLCT/tree/main/Report/24-Jan/week30/investigation/STAR64Model-A.md)
  - [TelinkTLSR9518ADK80D](https://github.com/Pagerd/PLCT/tree/main/Report/24-Jan/week30/investigation/TelinkTLSR9518ADK80D.md)
  - [XIAOESP32C3](https://github.com/Pagerd/PLCT/tree/main/Report/24-Jan/week30/investigation/XIAOESP32C3.md)

##### 6.3.2 openEuler

- 对Mugen仓库失败测试用例结果进行了分析，将分析结果提交了issue

| 测试用例名         | 测试用例                                  | 状态       | 原因                                                            | 行动                                                         |
| ------------- | ------------------------------------- | -------- | ------------------------------------------------------------- | ---------------------------------------------------------- |
| freeipmi      | oe_test_service_ipmiseld              | fail     | 服务无法启动                                                        | [I8U0BE](https://gitee.com/openeuler/RISC-V/issues/I8U0BE) |
| os-basic      | oe_test_power_powertop2tuned_optimize | fail     | Powertop版本不兼容                                                 | [I8U0JM](https://gitee.com/openeuler/RISC-V/issues/I8U0JM) |
|               | oe_test_ar                            | x86 fail | 未预装ar                                                         | [I8U0LF](https://gitee.com/openeuler/mugen/issues/I8U0LF)  |
|               | oe_test_aureport                      | x86 fail | 未预装auditd                                                     | [I8U0MM](https://gitee.com/openeuler/mugen/issues/I8U0MM)  |
|               | oe_test_envsubst                      | fail     | 未预装envsubst                                                   | [I8U0OK](https://gitee.com/openeuler/mugen/issues/I8U0OK)  |
|               | oe_test_glibc                         | x86 fail | 未预装gcc                                                        | [I8S53J](https://gitee.com/openeuler/mugen/issues/I8S53J)  |
|               | oe_test_c_stat                        | x86 fail | 未预装gcc                                                        | [I8S53J](https://gitee.com/openeuler/mugen/issues/I8S53J)  |
|               | oe_test_pcre_use                      | x86 fail | 未预装gcc                                                        | [I8S53J](https://gitee.com/openeuler/mugen/issues/I8S53J)  |
|               | oe_test_libunistring                  | x86 fail | 未预装gcc                                                        | [I8S53J](https://gitee.com/openeuler/mugen/issues/I8S53J)  |
|               | oe_test_cairo                         | x86 fail | 未预装gcc                                                        | [I8S53J](https://gitee.com/openeuler/mugen/issues/I8S53J)  |
|               | oe_test_libidn                        | fail     | 未安装gcc                                                        | [I8S53J](https://gitee.com/openeuler/mugen/issues/I8S53J)  |
| kpatch        | oe_test_service_kpatch                | fail     | 软件源内没有kpatch                                                  | [I8U0NB](https://gitee.com/openeuler/RISC-V/issues/I8U0NB) |
| amanda        | oe_test_amanda_amcheck                | fail     | /usr/bin/gettext: No such file or directory                   | [I8RX4Z](https://gitee.com/openeuler/RISC-V/issues/I8RX4Z) |
| clevis        | oe_test_install_clevis                | fail     | 密钥不可用                                                         | [I8S2GB](https://gitee.com/openeuler/RISC-V/issues/I8S2GB) |
|               | oe_test_high_nbde                     | fail     | 软件源没有包cryptsetup-reencrypt                                    | [I8S2JX](https://gitee.com/openeuler/RISC-V/issues/I8S2JX) |
|               | oe_test_tang_encrypt                  | x86 fail | 无法连接至目标端口                                                     | [I8S31S](https://gitee.com/openeuler/mugen/issues/I8S31S)  |
|               | oe_test_service_clevis-luks-askpass   | x86 fail | 测试用例编写错误？                                                     | [I8S30G](https://gitee.com/openeuler/mugen/issues/I8S30G)  |
| pywbem_0.12.4 | oe_test_pywbem_base_mof_compiler_01   | fail     | 连接失败                                                          | [I8VSD0](https://gitee.com/openeuler/RISC-V/issues/I8VSD0) |
|               | oe_test_pywbem_base_mof_compiler_02   | fail     | 连接失败                                                          | [I8VSD0](https://gitee.com/openeuler/RISC-V/issues/I8VSD0) |
| wsmancli      | oe_test_wsmancli_wseventmgr_02        | fail     | 网络原因无法下载对应测试文件                                                | [I8VSDM](https://gitee.com/openeuler/RISC-V/issues/I8VSDM) |
|               | oe_test_wsmancli_wseventmgr_01        | fail     | 网络原因无法下载对应测试文件                                                | [I8VSDM](https://gitee.com/openeuler/RISC-V/issues/I8VSDM) |
|               | oe_test_wsmancli_wsman_06             | fail     | 连接smash/ipmi时超时                                               | [I8VSDM](https://gitee.com/openeuler/RISC-V/issues/I8VSDM) |
|               | oe_test_wsmancli_wsman_07             | fail     | 连接网络时超时                                                       | [I8VSDM](https://gitee.com/openeuler/RISC-V/issues/I8VSDM) |
|               | oe_test_wsmancli_wsman_05             | fail     | 连接网络时超时                                                       | [I8VSDM](https://gitee.com/openeuler/RISC-V/issues/I8VSDM) |
|               | oe_test_wsmancli_wsman_02             | fail     | 缺少对应docker                                                    | [I8VSDM](https://gitee.com/openeuler/RISC-V/issues/I8VSDM) |
| hbase         | oe_test_service_hbase-regionserver    | fail     | 没有包hbase，hadoop-3.1-hdfs，hadoop-3.1-mapreduce，hadoop-3.1-yarn | [I8VS5N](https://gitee.com/openeuler/RISC-V/issues/I8VS5N) |
|               | oe_test_service_hbase-rest            | fail     | 没有包hbase，hadoop-3.1-hdfs，hadoop-3.1-mapreduce，hadoop-3.1-yarn | [I8VS5N](https://gitee.com/openeuler/RISC-V/issues/I8VS5N) |
|               | oe_test_service_hbase-thrift          | fail     | 没有包hbase，hadoop-3.1-hdfs，hadoop-3.1-mapreduce，hadoop-3.1-yarn | [I8VS5N](https://gitee.com/openeuler/RISC-V/issues/I8VS5N) |

- 截止目前为止将当前的测试分析结果整合进主文档 [pr#11](https://gitee.com/yunxiangluo/openEuler-RISC-V-23.09-independent/pulls/11)

- 编写了Mugen RISC-V测试策略[ppt](https://github.com/Pagerd/PLCT/tree/main/Report/24-Jan/week28/开源自动化测试工具Mugen和openQA在openEuler RISC-V测试中的使用.pptx)

- 将剩余的仅RV失败的测试用例提交至riscv issue [#I8XL9B](https://gitee.com/openeuler/RISC-V/issues/I8XL9B)

## SG2042 Upstream

- linux upstream 工作进展：

  - [[PATCH v7 0/4] riscv: sophgo: add clock support for sg2042][lk-1]: 为 SG2042 添加 clock 支持，第 7 版。
  - [[PATCH v8 0/5] riscv: sophgo: add clock support for sg2042][lk-3]: 为 SG2042 添加 clock 支持，第 8 版。
  - [[PATCH 0/4] riscv: sophgo: add reset support for SG2042][lk-2]: 为 SG2042 添加 reset 支持，第 1 版。
  - [[PATCH v2 0/4] riscv: sophgo: add reset support for SG2042][lk-4]: 为 SG2042 添加 reset 支持，第 2 版。
  - [[PATCH v3 0/4] riscv: sophgo: add reset support for SG2042][lk-6]: 为 SG2042 添加 reset 支持，第 3 版。
  - 新建了 Sophgo Platform Maintain 仓库: https://github.com/sophgo/linux。目前主要用于搜集和维护 Sophgo 相关产品的 DTS 以及 Driver 等 patch，并向上游提交。具体参考:
    - [[PATCH] MAINTAINERS: Setup proper info for SOPHGO vendor support][lk-5]
    - [Include in next: sophgo/linux.git][lk-7]

[lk-1]: https://lore.kernel.org/linux-riscv/cover.1704694903.git.unicorn_wang@outlook.com/
[lk-2]: https://lore.kernel.org/linux-riscv/cover.1704790558.git.unicorn_wang@outlook.com/
[lk-3]: https://lore.kernel.org/linux-riscv/cover.1705388518.git.unicorn_wang@outlook.com/
[lk-4]: https://lore.kernel.org/linux-riscv/cover.1706161530.git.unicorn_wang@outlook.com/
[lk-5]: https://lore.kernel.org/linux-riscv/IA1PR20MB49534A5DE79A6CEE57301737BB792@IA1PR20MB4953.namprd20.prod.outlook.com/
[lk-6]: https://lore.kernel.org/linux-riscv/cover.1706577450.git.unicorn_wang@outlook.com/
[lk-7]: https://lore.kernel.org/linux-next/MA0P287MB2822E0B2A8CCC033CC5AB2CDFE7D2@MA0P287MB2822.INDP287.PROD.OUTLOOK.COM/

## Duo Upstream

## RVI Collaborations

### Jie Wu

## 参考链接

- [PLCT 实验室的开放职位（实习生）](https://github.com/plctlab/weloveinterns/blob/master/open-internships.md)
- [PLCT 开源进展 (PLCT Weekly)](https://github.com/plctlab/PLCT-Weekly)
- [PLCT 公开报告幻灯片（选集）](https://github.com/plctlab/PLCT-Open-Reports)
