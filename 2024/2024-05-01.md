# PLCT 开源进展·第 57 期·2024 年 5 月 1 日

## 卷首语

（主编鸽了）

## 本期亮点

PLCT实验室的亮点产出通过「RuyiSDK」微信公众号（ID：RuyiSDK）和英文网站提供更新服务：

- https://plctlab.org/en/news/

为了减少冗余工作量，已经在微信公众号推送的中文信息默认不再搬运。

## RuyiSDK IDE

IDE部分目前仍缺乏开发人员，暂无显著进展。

## RuyiSDK 包管理器

项目地址：https://github.com/ruyisdk/ruyi

4 月份 RuyiSDK 包管理器发布了 2 个新版本：0.8.0 与 0.9.0，对应
RuyiSDK 整体的 0.8 与 0.9 两个正式版本。您可移步
[GitHub Releases][GitHub Releases] 或 [ISCAS 镜像源][iscas]下载体验。

[GitHub Releases]: https://github.com/ruyisdk/ruyi/releases/tag/0.9.0
[iscas]: https://mirror.iscas.ac.cn/ruyisdk/ruyi/tags/0.9.0/

本月 RuyiSDK 软件源的格式得到了一轮迭代，意在降低维护软件源的心智负担，以及使得后续迭代更加便利。

* 支持以 TOML 格式撰写软件源全局配置及包定义文件。相比先前采用的 JSON 格式，更便于手工编辑、添加注释、标记文件格式版本等，有利于维护。
* 支持定义上游镜像了。后续对那些本身也通过镜像分发的软件包，也能借助此功能，利用上它们的镜像了，有利于提高用户一侧的下载速度与可靠性。

其余的主要工作如下：

* 默认禁止了以 `root` 身份运行 `ruyi`，以提升安全性。如确有需要，可按程序提示设置环境变量以绕过检查，但我们不推荐这么做。
* 支持在 `wget` 与 `curl` 均不可用的系统上下载文件了。
* 支持解包 LZ4 格式的压缩文件了。
* 安装软件包时的解包操作现在具备原子性了。这意味着一旦解包被中断，重试时，`ruyi` 不会错误以为该包已经安装完成了。
* 持续优化工程实践：
    * 目前所有代码贡献都会在代码风格、类型注解、开源许可证遵守方面接受检查了。
    * 改进了打包流程，使 `ruyi` 官方二进制的包体得到了一定的瘦身。

从 4 月开始，RuyiSDK 软件源已包含矽速（Sipeed）全线 RISC-V 产品的支持。Ruyi
设备安装器现已新增支持以下设备型号：

* Sipeed LicheeRV Nano
* Sipeed Lichee Cluster 4A
* Sipeed Lichee Console 4A
* Sipeed Maix-I
* Sipeed Tang Mega 138K Pro

欢迎试用或来上游围观；您的需求是我们迭代开发的目标和动力。

## V8

5442563: [riscv] Using sys_riscv_hwprobe to detect risc-v ISA | https://chromium-review.googlesource.com/c/v8/v8/+/5442563  
根据编译器宏定义检测zbb/zbs/zba  
5443166: [riscv] Detect zbb/zbs/zba by complier define | https://chromium-review.googlesource.com/c/v8/v8/+/5443166  
5430889: [riscv] Skip check sv57 when enable pointer compress | https://chromium-review.googlesource.com/c/v8/v8/+/5430889  
5430887: [riscv][turboshaft] Fix more issues in Turboshaft's builtin pipeline | https://chromium-review.googlesource.com/c/v8/v8/+/5430887  

#### Port Upstream  
5437758: [riscv][wasm] Call on-heap import wrappers via a trampoline | https://chromium-review.googlesource.com/c/v8/v8/+/5437758  
5402404: [riscv] Add check before using int64_value() | https://chromium-review.googlesource.com/c/v8/v8/+/5402404  
5390231: [sandbox][riscv64] Fix instruction schedule for sandbox related opcode | https://chromium-review.googlesource.com/c/v8/v8/+/5390231  
5390228: [riscv][turboshaft] Port ISEL unittests part 2 | https://chromium-review.googlesource.com/c/v8/v8/+/5390228  
5470544: [riscv][fastcall] Allow reentrance to JavaScript | https://chromium-review.googlesource.com/c/v8/v8/+/5470544  
5454820: [riscv][codegen] Introduce MemoryRepresentation::kProtectedPointer | https://chromium-review.googlesource.com/c/v8/v8/+/5454820  

#### Review  
5454696: [riscv][turbofan] Implements 32-bit compare against zero | https://chromium-review.googlesource.com/c/v8/v8/+/5454696  


## Spidermonkey

## OpenJDK Upstream
1. Authored JDK-mainline PRs:
- https://github.com/openjdk/jdk/pull/18558 (8329355: Test compiler/c2/irTests/TestIfMinMax.java fails on RISC-V)

2. Reviewed JDK-mainline PRs:
- https://github.com/openjdk/jdk/pull/17745 (8321010: RISC-V: C2 RoundVF
                                                                      8321011: RISC-V: C2 RoundVD)
- https://github.com/openjdk/jdk/pull/18040 (8321021: RISC-V: C2 VectorUCastB2X
                                                                      8321023: RISC-V: C2 VectorUCastS2X
                                                                      8321024: RISC-V: C2 VectorUCastI2X)
- https://github.com/openjdk/jdk/pull/18175 (8327716: RISC-V: Change type of vector_length param of several assembler functions from int to uint)
- https://github.com/openjdk/jdk/pull/18191 (8327794: RISC-V: enable extension features based on impid (Rivos specific change))
- https://github.com/openjdk/jdk/pull/18370 (8328404: RISC-V: Fix potential crash in C2_MacroAssembler::arrays_equals)
- https://github.com/openjdk/jdk/pull/18435 (8326960: GHA: RISC-V sysroot cannot be debootstrapped due to ongoing Debian t64 transition)
- https://github.com/openjdk/jdk/pull/18382 (8317720: RISC-V: Implement Adler32 intrinsic)
- https://github.com/openjdk/jdk/pull/18599 (8329083: RISC-V: Update profiles supported on riscv)
- https://github.com/openjdk/jdk/pull/18611 (8329641: RISC-V: Enable some tests related to SHA-2 instrinsic)
- https://github.com/openjdk/jdk/pull/18668 (8329823: RISC-V: Need to sync CPU features with related JVM flags)
- https://github.com/openjdk/jdk/pull/18445 (8327743: JVM crash in hotspot/share/runtime/javaThread.cpp - failed: held monitor count should be equal to jni: 0 != 1)

3. Reviewed riscv-port-jdk11u backport PRs:
- https://github.com/openjdk/riscv-port-jdk11u/pull/11 (8328065: RISC-V: Add isolation for shared code changes)
- https://github.com/openjdk/riscv-port-jdk11u/pull/12 (8328580: Remove trivial shared code changes which are leftover from riscv port)
- https://github.com/openjdk/riscv-port-jdk11u/pull/13 (8283865: riscv: Break down -XX:+UseRVB into seperate options for each bitmanip extension)
- https://github.com/openjdk/riscv-port-jdk11u/pull/16 (8291893: riscv: remove fence.i used in user space
                                                        8291947: riscv: fail to build after JDK-8290840
                                                        8310656: RISC-V: __builtin___clear_cache can fail silently)
- https://github.com/openjdk/riscv-port-jdk11u/pull/17 (8284937: riscv: should not allocate special register for temp)
- https://github.com/openjdk/riscv-port-jdk11u/pull/18 (8285303: riscv: Incorrect register mask in call_native_base)
- https://github.com/openjdk/riscv-port-jdk11u/pull/19 (8297697: RISC-V: Add support for SATP mode detection
                                                        8301067: RISC-V: better error message when reporting unsupported satp modes)

4. CFV: New RISC-V Port Committer: Gui Cao
- https://mail.openjdk.org/pipermail/riscv-port-dev/2024-April/001345.html
- https://mail.openjdk.org/pipermail/riscv-port-dev/2024-April/001367.html

5. OpenJDK PRs
- https://github.com/openjdk/jdk/pull/18611 (8329641: RISC-V: Enable some tests related to SHA-2 instrinsic)
- https://github.com/openjdk/jdk/pull/18668 (8329823: RISC-V: Need to sync CPU features with related JVM flags)
- https://github.com/openjdk/jdk/pull/18737 (8330095: RISC-V: Remove obsolete vandn_vi instruction)
- https://github.com/openjdk/jdk/pull/18780 (8330242: RISC-V: Simplify and remove CORRECT_COMPILER_ATOMIC_SUPPORT in atomic_linux_riscv.hpp)

6. OpenJDK backport PRs
- https://github.com/openjdk/jdk22u/pull/135 (8329823: RISC-V: Need to sync CPU features with related JVM flags)
- https://github.com/openjdk/jdk22u/pull/146 (8330242: RISC-V: Simplify and remove CORRECT_COMPILER_ATOMIC_SUPPORT in atomic_linux_riscv.hpp)
- https://github.com/openjdk/jdk21u-dev/pull/480 (8329823: RISC-V: Need to sync CPU features with related JVM flags)
- https://github.com/openjdk/jdk21u-dev/pull/507 (8326936: RISC-V: Shenandoah GC crashes due to incorrect atomic memory operations)
- https://github.com/openjdk/jdk17u-dev/pull/2377 (8315652: RISC-V: Features string uses wrong separator for jtreg)
- https://github.com/openjdk/jdk17u-dev/pull/2385 (8329823: RISC-V: Need to sync CPU features with related JVM flags)
- https://github.com/openjdk/jdk17u-dev/pull/2417 (8326936: RISC-V: Shenandoah GC crashes due to incorrect atomic memory operations)
- https://github.com/openjdk/riscv-port-jdk11u/pull/16 (8291893: riscv: remove fence.i used in user space)
- https://github.com/openjdk/riscv-port-jdk11u/pull/17 (8284937: riscv: should not allocate special register for temp)
- https://github.com/openjdk/riscv-port-jdk11u/pull/18 (8285303: riscv: Incorrect register mask in call_native_base)
- https://github.com/openjdk/riscv-port-jdk11u/pull/19 (8297697: RISC-V: Add support for SATP mode detection)
- https://github.com/openjdk/riscv-port-jdk11u/pull/21 (8297715: RISC-V: C2: Use single-bit instructions from the Zbs extension)

## OpenJDK RV32G
本期暂无更新

## OpenJDK8 Backporting

## DynamoRIO RV64GC

- [i#3544 RV64: Port sample.memtrace_simple to RISC-V](https://github.com/DynamoRIO/dynamorio/pull/6765)
- [i#3544 RV64: Port more sample tests to RISC-V](https://github.com/DynamoRIO/dynamorio/pull/6766)

## OpenCV RISC-V 优化

- 对深度可分卷积的进一步RVV优化工作已被上游接受。

  [PR #25361](https://github.com/opencv/opencv/pull/25361)

## GNU Toolchain

(可以根据每个人的产出分开，按照人名增加三级缩进，也可以由 leader/mentor 汇总后统一PR)

### Jiawei Chen

### Shihua Liao

### Yixuan Chen

### Yulong Shi

## LLVM Monorepo
- https://github.com/llvm/llvm-project/pull/90408 [InstCombine] Fold `trunc nuw/nsw (x xor y) to i1` to `x != y`
- https://github.com/llvm/llvm-project/pull/85863 [ValueTracking] Convert `isKnownNonZero` to use SimplifyQuery 重构isKnownNonZero接口以使用DomCondCache，修复issue https://github.com/llvm/llvm-project/issues/85823。
- https://github.com/llvm/llvm-project/pull/86390 [InstCombine] Fold fabs over selects 把fabs(select Cond, X, Y) canonicalize 成 select Cond, fabs(X), fabs(Y)
https://github.com/llvm/llvm-project/pull/86482 [InstCombine] Fold fcmp into select 将fcmp (select Cond, C1, C2), C3 canonicalize成 select Cond, (fcmp C1, C3), (fcmp C2, C3)
- https://github.com/llvm/llvm-project/pull/87075 [InstSimplify] Make sure the simplified value doesn't generate poison in threadBinOpOverSelect 修复InstSimplify错误复用带有poison-generating flags的指令导致的miscompilation，修复issue https://github.com/llvm/llvm-project/issues/87042
- https://github.com/llvm/llvm-project/pull/87910 [InstCombine] Infer nsw/nuw for trunc 在InstCombine中推导trunc的nsw/nuw flag，为后续优化做准备
- https://github.com/llvm/llvm-project/pull/88505 [SDAG] Turn umin into smin if the saturation pattern is broken 修复ARM/X86不识别umin(smax) pattern的问题，修复issue https://github.com/llvm/llvm-project/issues/85706
- https://github.com/llvm/llvm-project/pull/88523 [CVP] Use at-use info in `processBinOp` 基于se**lect的cond推导truev/falsev的范围， 修复issue https://github.com/llvm/llvm-project/issues/87854
- https://github.com/llvm/llvm-project/pull/88757 [RISCV] Fix assertion failure in `genShXAddAddShift` 修复shxadd reassociation时未处理shift amount为0的问题
- https://github.com/llvm/llvm-project/pull/88859 [InstCombine] Fold `minmax (X & NegPow2C, Y & NegPow2C) -> minmax(X, Y) & NegPow2C` 改进使用jemalloc的程序性能
- https://github.com/llvm/llvm-project/pull/89353 [IR] Add support for trunc's nuw/nsw flags in `copyIRFlags` 修复trunc的flag传播
- https://github.com/llvm/llvm-project/pull/89539 [InstCombine] Fix unexpected overwriting in `foldSelectWithSRem` 修复m_Value覆盖已经被赋值的变量的问题，修复issue https://github.com/llvm/llvm-project/issues/89516
- https://github.com/llvm/llvm-project/pull/89929 [SimplifyCFG] Handle `llvm.assume` in `passingValueIsAlwaysUndefined` 提升大部分rust程序的性能
- https://github.com/llvm/llvm-project/pull/89947 [InstCombine] Fold fneg over select 确保fneg和fabs在select的同一侧，以便于后端处理nabs idiom
- https://github.com/llvm/llvm-project/pull/89967 [IRCE] Skip icmp ptr in `InductiveRangeCheck::parseRangeCheckICmp` 修复issue https://github.com/llvm/llvm-project/issues/89959
- https://github.com/llvm/llvm-project/pull/89976 [RISCV][ISel] Eliminate `andi rd, rs1, -1` instructions 修复riscv tablegen isel生成冗余指令的问题
- https://github.com/llvm/llvm-project/pull/90382 **[CGP] Drop poison-generating flags after hoisting 修复带poison-generating flags的指令被错误复用的问题，修复**https://github.com/llvm/llvm-project/issues/90380

### Chunyu Liao
- 还在review中https://github.com/llvm/llvm-project/pull/89719 [RISCV] Codegen support for XCVbi extension

### Kiva

- LLVM 部分
    - [[LLVM][XTHeadVector] Implement 16.1 vmand{n}/vmnand/vmxor/vmor{n}/vmnor/vmxnor](https://github.com/ruyisdk/llvm-project/pull/95)
    - [[LLVM][XTHeadVector] Implement 16.2-16.6 vmpopc/vmfirst/vmsbf/vmsif/vmsof](https://github.com/ruyisdk/llvm-project/pull/97)
    - [[LLVM][XTHeadVector] Implement 16.7-16.8 viota/vid](https://github.com/ruyisdk/llvm-project/pull/98)
    - [[LLVM][XTHeadVector] Add RedundantVSETVLIElimination pass to remove unnecessary vtype-preserving sequences](https://github.com/ruyisdk/llvm-project/pull/99)
    - [[LLVM][XTHeadVector] Implement 15.1-15.4 vred/vfred/vfwred intrinsic family](https://github.com/ruyisdk/llvm-project/pull/102)
    - [[LLVM][XTHeadVector] Implement 17.2-17.6 vmv/vfmv/vslide/vrgather/vcompress](https://github.com/ruyisdk/llvm-project/pull/105)

- Clang 部分
    - [[Clang][XTHeadVector] Implement 13.1 vsadd/vssub/vsaddu/vssubu](https://github.com/ruyisdk/llvm-project/pull/89)
    - [[Clang][XTHeadVector] Implement 13.5 vnclip/vnclipu](https://github.com/ruyisdk/llvm-project/pull/90)
    - [[Clang][XTHeadVector] Implement 16.1 vmand{n}/vmnand/vmxor/vmor{n}/vmnor/vmxnor/vmclr/vmset/vmmv/vmnot](https://github.com/ruyisdk/llvm-project/pull/100)
    - [[Clang][XTHeadVector] Implement 16.2-16.8 vcpop/vfirst/vmsbf/vmsof/vmsif/viota/vid](https://github.com/ruyisdk/llvm-project/pull/101)
    - [[Clang][XTHeadVector] Implement 15.1-15.4 vred/vfred/vfwred intrinsic family](https://github.com/ruyisdk/llvm-project/pull/104)

- 其他
    - [Rebased xtheadvector branch onto upstream tag llvmorg-17.0.6](https://github.com/ruyisdk/llvm-project/pull/92)

### Yongtai Li

1. 本地构建 SPEC CPU 2017
  - GCC d28ea8e5a704, target: rv64gc_zba_zbb_zbs 构建完成
  - GCC d28ea8e5a704, target: rv64gcv_zba_zbb_zbs 构建完成

2. 使用 QEMU 运行 SPEC CPU 2017 各项测试，统计指令数,数据可以在 [此处](https://docs.google.com/spreadsheets/d/19UF1KTO1swbKNjx2fNvMiltVJgdlEDTzy7c3Z_d-PtA) 获取，目前 GCC d28ea8e5a704 与 LLVM c9a6e993f7b3 除 525#2、625#2 外已经完成统计
  - 新增了 GCC d28ea8e5a704 rv64gc_zba_zbb_zbs 和 rv64gcv_zba_zbb_zbs 版本的数据
  - LLVM 548.exchange2_r 一项指令数比 GCC 多出一倍，尝试分析

3. countspec 工具，https://github.com/sihuan/countspec
  - 支持上传 SPEC CPU 2017 编译完成后的 xz 格式压缩包
  - 前端页面新建指定统计任务并导出指令数数据

## gollvm

## LIBCXX Experimental/simd

本期共有1个新的PR提交至LLVM上游，目前共有4个PR正在等待审核：

- [[libc++] <experimental/simd> Add copy functions for class simd/simd_mask (Open)](https://github.com/llvm/llvm-project/pull/78935)
- [[libc++] <experimental/simd> Add swap functions of simd reference (Open)](https://github.com/llvm/llvm-project/pull/86478)
- [[libc++] <experimental/simd> Add compound assignment operators for simd reference (Open)](https://github.com/llvm/llvm-project/pull/86761)
- [[libc++] <experimental/simd> Add ++/-- operators for simd reference (Open)](https://github.com/llvm/llvm-project/pull/88091)

目前项目共有18个patch已合并进入LLVM上游仓库。

## LuaJIT RV64G Porting

Backend optimizations, minor bug fixes, upstream updates.

- JIT
  - [Asm: emits ADD.UW in asm_tvstore64 and asm_ahustore](https://github.com/plctlab/LuaJIT/commit/b8a425c15732b145ad4855448fec684e50a47ea0)
  - [Jit: enable BROL on RISC-V 64](https://github.com/plctlab/LuaJIT/commit/80ef7ed8013d4508d43dd29e85c380b1fae1351c)
- Runtime
  - [Runtime: fix CPUSTRING of Zicond and XThead](https://github.com/plctlab/LuaJIT/commit/e3ead68dff15a178f41678a5d4494a1d38d7dbe8)
- Build
  - [Build: fix cross compiling](https://github.com/plctlab/LuaJIT/commit/ad5fa56d076a4b20ff7ca8557d497f5c49a83502)
- Readme
  - [Readme: update](https://github.com/plctlab/LuaJIT/commit/131ea005296efdc54df8b7603fbd9ea224bf0407)

## gem5

## Spike

## QEMU

## box64

- ksco

  - [\[RV64_DYNAREC\] Fixed some issue with x87 stack managment (ported from ARM64)](https://github.com/ptitSeb/box64/pull/1401)
  - [Create libssl/libcrypto symlinks](https://github.com/ptitSeb/box64/pull/1402)
  - [\[RV64_DYNAREC\] Added 0F 70 PSHUFW opcode](https://github.com/ptitSeb/box64/pull/1408)
  - [\[DYNAREC\] Fixed REP opcodes for correct register state recovery](https://github.com/ptitSeb/box64/pull/1420)
  - [\[RV64_DYNAREC\] Fixed 66 C7 MOV opcode](https://github.com/ptitSeb/box64/pull/1440)
  - [\[DYNAREC\] Fixed shift xw macros](https://github.com/ptitSeb/box64/pull/1443)
  - [\[DYNAREC\] Fixed CF flag computation](https://github.com/ptitSeb/box64/pull/1453)
  - [Wrapped 1 more function for mpg123](https://github.com/ptitSeb/box64/pull/1454)
  - [\[DYNAREC\] Fixed emit_shift functions and more](https://github.com/ptitSeb/box64/pull/1466)
  - [\[RCFILE\] Update weixin profile](https://github.com/ptitSeb/box64/pull/1467)
  - [Fixed my_prepare_thread in dynarec build](https://github.com/ptitSeb/box64/pull/1474)
  - [\[COSIM\] Added thread-safe tests](https://github.com/ptitSeb/box64/pull/1477)
  - [\[RV64_DYNAREC\] Added some missing fastnan handling](https://github.com/ptitSeb/box64/pull/1483)
  - [\[RV64_DYNAREC\] Remove useless code](https://github.com/ptitSeb/box64/pull/1484)
  - [\[DYNAREC\]\[32BITS\] Fixed and improved 66 prefix opcodes](https://github.com/ptitSeb/box64/pull/1485)
  - [Added wrapping of libicuuc64 and libicui18n64](https://github.com/ptitSeb/box64/pull/1487)
  - [\[RV64_DYNAREC\] Fixed OF flag computation](https://github.com/ptitSeb/box64/pull/1489)
  - [\[DYNAREC\] Small improvements to atomic functions](https://github.com/ptitSeb/box64/pull/1492)

- xctan

  - [\[RV64_DYNAREC\] Fixed various bugs in shift instructions](https://github.com/ptitSeb/box64/pull/1426)
  - [\[RV64_DYNAREC\] Fixed DIV and IDIV for zero divisor](https://github.com/ptitSeb/box64/pull/1476)

## riscv-vector-tests

- [Zero all vector registers once per file](https://github.com/ksco/riscv-vector-tests/commit/f39b73407d4058c7ecce1eef1a27e2cbdd61f3ab)
- [Fix VdVs2Fs1Vm vs2 widening handling (for #32)](https://github.com/ksco/riscv-vector-tests/commit/f9620b503aec847ab76bb704ff09aa1f541f1c2a)
- [Refine vsetvl[i] (for #33)](https://github.com/ksco/riscv-vector-tests/issues/33)
- [Use tail/mask undisturbed instead of agnostic (for #35)](https://github.com/ksco/riscv-vector-tests/commit/d5ab039c52c46f86433628bb4afb00fb57492615)
- [Add missing fault-on-first instructions (for #39)](https://github.com/ksco/riscv-vector-tests/commit/39f93cc4b49e59d3966d6d0988f30ca461d7217d)
- [Fix pspike](https://github.com/ksco/riscv-vector-tests/commit/bcbda657a2cdd1b91ea0d52f9893fcce89a6bbed)


## numpy

- [TST: Use platform.machine() for improved portability on riscv64](https://github.com/numpy/numpy/pull/26187)
- [ENH: Enable RVV CPU feature detection](https://github.com/numpy/numpy/pull/26219)

## mold

- [RISCV: Filter out existing __global_pointer$ when resolving symbols](https://github.com/rui314/mold/pull/1236)

## SAIL/ACT

## openArkCompiler community

## MLIR

### Buddy Compiler

- Buddy Compiler 主页地址 - https://buddy-compiler.github.io/
- Buddy Compiler As A Service 地址 - https://buddy.isrc.ac.cn/

**OSPP 2024**

Buddy Compiler 社区 2024 OSPP 开源之夏开放项目已发布：https://summer-ospp.ac.cn/org/orgdetail/8d995d4c-b188-4690-9a53-c022dc7c19e3?lang=zh

- 面向 RISC-V 设备的自动化测试与性能评估平台的设计与搭建
- 图级别编译基础设施面向异构硬件划分的实现与测试
- 面向深度学习模型的图级别编译优化
- 基于 RISC-V 向量拓展的动态张量程序编译优化
- 基于 MLIR 的 RFFT 算法实现
- MLIR Matmul 在 CPU 和 GPU 的优化设计与实现
- 面向大模型的 AI 编译量化实现
- 面向 RISC-V Vector 平台的大语言模型（LLM）性能评估测试集开发

**buddy-mlir**

代码仓库：https://github.com/buddy-compiler/buddy-mlir

- [VectorExp] Add lowering pass for GetVL and SetVL operations.

## CAAT

## coreboot for riscv

本期暂无更新

## openocd

本期暂无更新

## opensbi

- 改进构建系统，防止在修改makefile之后，重新构建不重新生成CAarray。[1](https://lists.infradead.org/pipermail/opensbi/2024-April/006740.html)
- 修正sbi\_sse\_exit中获取到event可能为空的问题。[1](https://lists.infradead.org/pipermail/opensbi/2024-April/006762.html)
- 修正fdt\_node\_offset\_by\_compatible中的错误检测。[1](https://lists.infradead.org/pipermail/opensbi/2024-April/006763.html)
- 修正切换到S模式csr设置的问题，切换到vs模式需要设置vs相关的csr。[1](https://lists.infradead.org/pipermail/opensbi/2024-April/006788.html)
- 修正sse相关代码的一些格式问题，重命名了一些代码，在注册事件时添加内存权限的检查。[1](https://lists.infradead.org/pipermail/opensbi/2024-April/006777.html)
- imsic热启动时错误检测比较简单，修改成和冷启动相同的代码。[1](https://lists.infradead.org/pipermail/opensbi/2024-April/006799.html)
- 添加Smdbltrp Ssdbltrp扩展的支持。[1](https://lists.infradead.org/pipermail/opensbi/2024-April/006801.html)
- andes有25/45/65多个系列，重命名andes45为andes。[1](https://lists.infradead.org/pipermail/opensbi/2024-April/006807.html) [2](https://lists.infradead.org/pipermail/opensbi/2024-April/006808.html) [3](https://lists.infradead.org/pipermail/opensbi/2024-April/006809.html)
- 把thead的pmu初始化和soc绑定，未来的芯片可能用标准方法实现。[1](https://lists.infradead.org/pipermail/opensbi/2024-April/006810.html)
- 修正sbi\_dtbr的一些bug，内存权限检查和共享内存地址获取。[1](https://lists.infradead.org/pipermail/opensbi/2024-April/006822.html)
- 自旋锁等待中添加pause指令。[1](https://lists.infradead.org/pipermail/opensbi/2024-April/006843.html)
- 单元测试添加了原子和自旋锁测试。[1](https://lists.infradead.org/pipermail/opensbi/2024-April/006844.html)
- 为sg2042添加复位驱动（基于板载mcu）。[1](https://lists.infradead.org/pipermail/opensbi/2024-April/006849.html)
- 添加不可屏蔽中断的检测支持。[1](https://lists.infradead.org/pipermail/opensbi/2024-April/006853.html)

## u-boot

本期暂无更新

## Aya Theorem Prover

## eBPF

- 开源之夏申请了 GSOC 和 OSPP
  - [GSOC 主页](https://summerofcode.withgoogle.com/programs/2024/organizations/eunomia-bpf) 和 [idea list](https://eunomia.dev/others/ideas/)
  - [OSPP 主页](https://summer-ospp.ac.cn/org/orgdetail/f0c9381d-9572-40f1-b3aa-f91b12d7673e?lang=zh)
- bpftime
  - 增加了 AOT 编译的功能 [#258](https://github.com/eunomia-bpf/bpftime/pull/258)
  - 修复了 detach 的机制 [#264](https://github.com/eunomia-bpf/bpftime/pull/264)
  - 修复了 bpftrace 不能和 llvm jit 同时使用的问题 [#286](https://github.com/eunomia-bpf/bpftime/pull/286)
  - 移除 simple-jit, 和 ubpf 集成 [#273](https://github.com/eunomia-bpf/bpftime/pull/273)
  - 修复 fork 时可能出现的问题 [#288](https://github.com/eunomia-bpf/bpftime/pull/288)
  - 其他一些小修复 [#276](https://github.com/eunomia-bpf/bpftime/pull/276) [#284](https://github.com/eunomia-bpf/bpftime/pull/284) [#285](https://github.com/eunomia-bpf/bpftime/pull/285) [#287](https://github.com/eunomia-bpf/bpftime/pull/287)
- 于桐在 eBPF 大会上做了关于 userspace eBPF 的演讲 [link](https://www.ebpftravel.com/blog2.html#t3)
- 演示 bpftime 如何让 DPDK 使用 XDP eBPF 程序的 demo [XDP-eBPF-in-DPDK](https://github.com/eunomia-bpf/XDP-eBPF-in-DPDK)
- 使用 eBPF XDP 实现流量生成 [xdp-pktgen](https://github.com/eunomia-bpf/xdp-pktgen)

## Benchmarking

## Arch Linux

(可以根据每个人的产出分开，按照人名增加三级缩进，也可以由 leader/mentor 汇总后统一PR)

## RevyOS (Debian)

- [月报仓库](https://github.com/revyos/Newsletter)维持月度更新
- 进行fio、sysbench、LTP测试报错以及暂停测试的问题调研
- 对新开发板适配进行测试准备
- 修改并搭建了 ros 的编译农场位于 https://j.z572.online
ros_buildfarm 仓库位于 https://gitee.com/Z572/ros_buildfarm
rosdistro 仓库位于 https://gitee.com/Z572/rosdistro
buildfarm_config 仓库位于 https://gitee.com/Z572/ros_buildfarm_config
https://github.com/revyos-ros 存放修改

|                      提交链接                                     | 提交人        |
| ----------- | ----------- |
| https://github.com/revyos-ros/ament_cmake-release.git             | Zheng Junjie |
| https://github.com/revyos-ros/gazebo_ros_pkgs-release.git         | CHEN Xuan    |
| https://github.com/revyos-ros/gz_cmake2_vendor-release            | Zheng Junjie |
| https://github.com/revyos-ros/gz_math6_vendor-release.git         | Zheng Junjie |
| https://github.com/revyos-ros/libstatistics_collector-release.git | Zheng Junjie |
| https://github.com/revyos-ros/mimick_vendor-release.git           | Zheng Junjie |
| https://github.com/revyos-ros/mrpt2-release.git                   | Zheng Junjie |
| https://github.com/revyos-ros/navigation2-release.git             | Zheng Junjie |
| https://github.com/revyos-ros/network_interface-release.git       | CHEN Xuan    |
| https://github.com/revyos-ros/octomap-release.git                 | Zheng Junjie |
| https://github.com/revyos-ros/openni2_camera-release.git          | Zheng Junjie |
| https://github.com/revyos-ros/osqp_vendor-release.git             | Zheng Junjie |
| https://github.com/revyos-ros/pal_statistics-release.git          | CHEN Xuan    |
| https://github.com/revyos-ros/perception_pcl-release.git          | CHEN Xuan    |
| https://github.com/revyos-ros/qt_gui_core-release.git             | CHEN Xuan    |
| https://github.com/revyos-ros/rcdiscover-release.git              | Zheng Junjie |
| https://github.com/revyos-ros/rmw_implementation-release.git      | Zheng Junjie |
| https://github.com/revyos-ros/ros2_socketcan-release.git          | CHEN Xuan    |
| https://github.com/revyos-ros/ros2cli-release.git                 | Zheng Junjie |
| https://github.com/revyos-ros/ros_ign-release.git                 | Zheng Junjie |
| https://github.com/revyos-ros/ros_workspace-release.git           | Zheng Junjie |
| https://github.com/revyos-ros/rosbag2-release.git                 | Zheng Junjie |
| https://github.com/revyos-ros/rqt-release.git                     | Zheng Junjie |
| https://github.com/revyos-ros/rqt_plot-release.git                | Zheng Junjie |
| https://github.com/revyos-ros/rqt_shell-release.git               | Zheng Junjie |
| https://github.com/revyos-ros/schunk_svh_library-release.git      | CHEN Xuan    |
| https://github.com/revyos-ros/tvm_vendor-release.git              | CHEN Xuan    |
| https://github.com/revyos-ros/webots_ros2-release.git             | Zheng Junjie |

## Debian

2024年4月份的主要工作：

1. sail 依赖包1个已经进入Debian  官方仓库，一个进入NEW队列
2. 给 Debci riscv64 workers 添加 munin 监控支持/上新硬件
3. 修复 Debian ftbfs/打包另外3个包进入 Debian 官方仓库

以下是外部链接：

- https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1015231 [sphinx-theme-builder package done]
- https://tracker.debian.org/news/1516606/accepted-python-escript-56-7-source-into-unstable/ [python-escript ftbfs done]
- https://tracker.debian.org/news/1516835/accepted-pygame-252-2-source-into-unstable/ [pygame ftbfs done]
- https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1054822 [opam patch]
- https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1068487 [systemd issue]
- https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1068651 [bisect-ppx RFS done]https://salsa.debian.org/lintian/lintian/-/merge_requests/498 [debian lintain policy 4.7.0]
- https://github.com/aantron/bisect_ppx/issues/439 [bisect-ppx issue closed]
- http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1068683 [zmat reportbug]
- https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1068684 [bornagain reportbug]
- https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1068731 [falcosecurity-libs patch]
- https://github.com/fedora-python/tox-current-env/pull/76 [tox-current-env PR]
- https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1066658#10 [sup ftbfs done]
- https://tracker.debian.org/news/1518392/accepted-pytermgui-771dfsg-1-source-into-unstable/ [pytermgui upload]
- https://salsa.debian.org/lintian/lintian/-/merge_requests/498 [debian lintain 4.7.0 MR]
- https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1065420 [ocaml-linenoise RFS done]
- https://github.com/ocaml-community/ocaml-linenoise/issues/22 [linenoise issue]
- https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1061513 [xwayland-run ITP done]
- https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1069662 [ libt3window ftbfs done]
- https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1069722 [libtranscript ftbfs done]
- https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1069801 [libt3key ftbfs done]
- https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1069254#10 [nwipe ftbfs patch]

## Gentoo

## Nixpkgs
- starfive visionfive2: use nixpkgs default u-boot version https://github.com/NixOS/nixos-hardware/pull/922
- opencc: fix cross compilation https://github.com/NixOS/nixpkgs/pull/307115
- mount-zip: fix cross compilation, set strictDeps https://github.com/NixOS/nixpkgs/pull/307251
- genromfs: fix cross compilation https://github.com/NixOS/nixpkgs/pull/307252
- python3Packages.tqdm: enable pandas on i686 and risc-v https://github.com/NixOS/nixpkgs/pull/307261
- perl538Packages.MusicBrainzDiscID: fix cross compilation https://github.com/NixOS/nixpkgs/pull/307821
- usb-modeswitch: fix cross compilation by using the correct pkg-config https://github.com/NixOS/nixpkgs/pull/307827
- live555: fix cross compilation https://github.com/NixOS/nixpkgs/pull/307834
- ploticus: fix cross compilation https://github.com/NixOS/nixpkgs/pull/307842
- seqtk: fix cross compilation, drop custom installPhase https://github.com/NixOS/nixpkgs/pull/307843

## openEuler

(可以根据每个人的产出分开，按照人名增加三级缩进，也可以由 leader/mentor 汇总后统一PR)

## Fedora

(可以根据每个人的产出分开，按照人名增加三级缩进，也可以由 leader/mentor 汇总后统一PR)

## openKylin

## openAnolis

## RT-Thread

## 测试团队

### 1. RuyiSDK

#### 1.1 RuyiSDK测试

- [RuyiSDK 测试策略和测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/README.md)
  
  - [RuyiSDK v0.8 测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240408/README.md)
    
    - [SG2042 Pioneer Fedora 38 测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240408/fedora-SG2042-Pioneer.md)
    
    - [SG2042 Pioneer openEuler 23.09 测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240408/oERV2309-SG2042-Pioneer.md)
    
    - [Pi4A openEuler 23.09 测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240408/oERV2309-lpi4a.md)
    
    - [LPi4A RevyOS openEuler 23.09 测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240408/RevyOS-LPi4A.md)
    
    - [Container RevyOS riscv64 测试结果](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240408/RUYI_%E5%8C%85%E7%AE%A1%E7%90%86_Container_RevyOS_riscv64_%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C.md)
    
    - [Container Archlinux riscv64 测试结果](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240408/RUYI_%E5%8C%85%E7%AE%A1%E7%90%86_Container_Archlinux_riscv64_%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C.md        )
    
    - [Container Archlinux x86_64 测试结果](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240408/RUYI_%E5%8C%85%E7%AE%A1%E7%90%86_Container_Archlinux_x86_64_%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C.md)
    
    - [Container Debian sid riscv64 测试结果](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240408/RUYI_%E5%8C%85%E7%AE%A1%E7%90%86_Container_Debiansid_riscv64_%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C.md)
    
    - [QEMU Fedora38 x86_64 测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240408/RUYI_%E5%8C%85%E7%AE%A1%E7%90%86_QEMU_Fedora38_x86_64_%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C.md)
    
    - [QEMU Fedora38 riscv64 测试结果](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240408/RUYI_%E5%8C%85%E7%AE%A1%E7%90%86_QEMU_Fedora38_riscv64_%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C.md)
    
    - [QEMU openEuler23.09 x86_64 测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240408/RUYI_%E5%8C%85%E7%AE%A1%E7%90%86_QEMU_Fedora38_riscv64_%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C.md)
    
    - [QEMU Ubuntu22.04 x86_64 测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240408/RUYI_%E5%8C%85%E7%AE%A1%E7%90%86_QEMU_Ubuntu22.04_riscv64_%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C.md)
    
    - [QEMU Ubuntu 22.04 riscv64 测试结果](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240408/RUYI_%E5%8C%85%E7%AE%A1%E7%90%86_QEMU_Ubuntu22.04_riscv64_%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C.md)
    
    - [QEMU openEuler23.09 riscv64 测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240408/RUYI_%E5%8C%85%E7%AE%A1%E7%90%86_QEMU_openEuler23.09_riscv64_%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C.md)
    
    - [QEMU openEuler 23.09 x86_64 测试结果](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240408/RUYI_%E5%8C%85%E7%AE%A1%E7%90%86_QEMU_openEuler23.09_x86_64_%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C.md)
    
    - [QEMU Debian12 aarch64 测试结果](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240408/RUYI_%E5%8C%85%E7%AE%A1%E7%90%86_QEMU_Debian12_aarch64_%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C.md)
    
    - [QEMU Debian12 x86_64 测试结果](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240408/RUYI_%E5%8C%85%E7%AE%A1%E7%90%86_QEMU_Debian12_x86_64_%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C.md)
    
    - [Meles 镜像刷写测试)(测试镜像下载是否成功)](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240408/Meles-%E9%95%9C%E5%83%8F%E5%88%B7%E5%86%99%E6%B5%8B%E8%AF%95.md)
    
    - [RUYI (v0.81) 包管理 QEMU openEuler 23.09 riscv64 测试结果(用于ruyi v0.81 RISC-V架构的验证)](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240408/0.8.1/RUYI_%E5%8C%85%E7%AE%A1%E7%90%86_QEMU_openEuler23.09_riscv64_%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C.md)
    
    - [RUYI (v0.81) 包管理 QEMU openEuler 23.09 x86_64 测试结果(用于ruyi v0.81 X86架构的验证)](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240408/0.8.1/RUYI_%E5%8C%85%E7%AE%A1%E7%90%86_QEMU_openEuler23.09_x86_64_%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C.md)
    
    - 缺陷
      
      1. [ruyi device provision 在解包异常中断后无法识别损坏的解包产物](https://github.com/ruyisdk/ruyi/issues/123)
      
      2. [ruyi 0.8.0-beta.20240406 版本 list 命令 KeyError: 'kind' ](https://github.com/ruyisdk/ruyi/issues/126)
      
      3. [device provision fails to unpack image for Meles & LPi4A](https://github.com/ruyisdk/ruyi/issues/128)
         备注：以上缺陷在ruyi v0.8.1版本中均已修复
  
  - [[RuyiSDK v0.9 测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/tree/master/20240423/README.md)
    
    - [SG2042 Pioneer Fedora 38 测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/tree/master/20240423/fedora-SG2042-Pioneer.md)
    
    - [SG2042 Pioneer openEuler 23.09 测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/tree/master/20240423/oERV2309-SG2042-Pioneer.md)
    
    - [LPi4A openEuler 23.09 测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/tree/master/20240423/oERV2309-lpi4a.md)
    
    - [LPi4A RevyOS openEuler 23.09 测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/tree/master/20240423/RevyOS-LPi4A.md)
    
    - [Container RevyOS riscv64 测试结果](https://gitee.com/yunxiangluo/ruyisdk-test/tree/master/20240423/RUYI_包管理_Container_RevyOS_riscv64_测试结果.md)
    
    - [Container Archlinux riscv64 测试结果](https://gitee.com/yunxiangluo/ruyisdk-test/tree/master/20240423/RUYI_包管理_Container_Archlinux_riscv64_测试结果.md)
    
    - [Container Archlinux x86_64 测试结果](https://gitee.com/yunxiangluo/ruyisdk-test/tree/master/20240423/RUYI_包管理_Container_Archlinux_x86_64_测试结果.md)
    
    - [Container Debian sid riscv64 测试结果](https://gitee.com/yunxiangluo/ruyisdk-test/tree/master/20240423/RUYI_包管理_Container_Debiansid_riscv64_测试结果.md)
    
    - [QEMU Fedora38 x86_64 测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/tree/master/20240423/RUYI_包管理_QEMU_Fedora38_x86_64_测试结果.md)
    
    - [QEMU Fedora38 riscv64 测试结果](https://gitee.com/yunxiangluo/ruyisdk-test/tree/master/20240423/RUYI_包管理_QEMU_Fedora38_riscv64_测试结果.md)
    
    - [QEMU openEuler23.09 x86_64 测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/tree/master/20240423/RUYI_包管理_QEMU_openEuler23.09_x86_64_测试结果.md)
    
    - [QEMU Ubuntu22.04 x86_64 测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/tree/master/20240423/RUYI_包管理_QEMU_Ubuntu22.04_x86_64_测试结果.md)
    
    - [QEMU Ubuntu 22.04 riscv64 测试结果](https://gitee.com/yunxiangluo/ruyisdk-test/tree/master/20240423/RUYI_包管理_QEMU_Ubuntu22.04_riscv64_测试结果.md)
    
    - [QEMU openEuler23.09 riscv64 测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/tree/master/20240423/RUYI_包管理_QEMU_openEuler23.09_riscv64_测试结果.md)
    
    - [QEMU openEuler 23.09 x86_64 测试结果](https://gitee.com/yunxiangluo/ruyisdk-test/tree/master/20240423/RUYI_包管理_QEMU_openEuler23.09_x86_64_测试结果.md)
    
    - [QEMU Debian12 aarch64 测试结果](https://gitee.com/yunxiangluo/ruyisdk-test/tree/master/20240423/RUYI_包管理_QEMU_Debian12_aarch64_测试结果.md)
    
    - [QEMU Debian12 x86_64 测试结果](https://gitee.com/yunxiangluo/ruyisdk-test/tree/master/20240423/RUYI_包管理_QEMU_Debian12_x86_64_测试结果.md)
    
    - [QEMU Gentoo Linux riscv64 测试结果（新增支持）](https://gitee.com/yunxiangluo/ruyisdk-test/tree/master/20240423/RUYI_包管理_QEMU_Gentoo_riscv64_测试结果.md)
    
    - [QEMU Gentoo Linux x86_64 测试结果（新增支持）](https://gitee.com/yunxiangluo/ruyisdk-test/tree/master/20240423/RUYI_包管理_QEMU_Gentoo_x86_64_测试结果.md)
    
    - [QEMU openKylin Linux riscv64 测试结果（新增支持）](https://gitee.com/yunxiangluo/ruyisdk-test/tree/master/20240423/https://gitee.com/yunxiangluo/ruyisdk-test/tree/master/20240423RUYI_包管理_QEMU_openKylin_riscv64_测试结果.md)
    
    - [RUYI 包管理 device provision 测试结果](https://gitee.com/yunxiangluo/ruyisdk-test/tree/master/20240423/RUYI_包管理_device_provision_测试结果.md)
    
    - [LicheeConsole4A 镜像刷写测试（新增支持）](https://gitee.com/yunxiangluo/ruyisdk-test/tree/master/20240423/LicheeConsole4A镜像烧写测试.md)
    
    - [LicheeRV Nano provision 镜像刷写测试（新增支持）](https://gitee.com/yunxiangluo/ruyisdk-test/tree/master/20240423/LicheeRV_Nano-镜像刷写测试.md)
    
    - 缺陷
      无

#### 1.2 RuyiSDK命令行测试开发

- ruyi mugen 更新 pr 
  
  - [!9](https://gitee.com/yunxiangluo/mugen-ruyi/pulls/9) 
  
  - [!10](https://gitee.com/yunxiangluo/mugen-ruyi/pulls/10) 
  
  - [!11](https://gitee.com/yunxiangluo/mugen-ruyi/pulls/11) 
  
  - [!12](https://gitee.com/yunxiangluo/mugen-ruyi/pulls/12)
    
    | 主要功能更新                           | 提交                                                                                                                                                                                                     |
    | -------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
    | 同步报告和 tarball 中的目录名              | [cc4c176](https://github.com/weilinfox/ruyi-mugen/commit/cc4c1768b4cce81ff980a26451deac00d84142cf)， [eee923b](https://github.com/weilinfox/ruyi-mugen/commit/eee923bcd62ec555dae2da5049785ec82d27c3c7) |
    | 测试 0.8.0-beta.20240406 版本        | [54850fd](github.com/weilinfox/ruyi-mugen/commit/54850fde778f19e5400a8c5dfb1f547fd70591d1)                                                                                                             |
    | 测试时配置 RUYI_FORCE_ALLOW_ROOT 环境变量 | [1f2dcc8](https://github.com/weilinfox/ruyi-mugen/commit/1f2dcc832afd4e70635b765e74abc8f1ca8e22ad)                                                                                                     |
    | 添加 admin --format 测试点            | [cc9743a](https://github.com/weilinfox/ruyi-mugen/commit/cc9743ae3f16927bff36d29a72d503bcebbf4c3a)                                                                                                     |
    | 使用普通用户运行 mugen 测试                | [160e42e](https://github.com/weilinfox/ruyi-mugen/commit/160e42eaa48fcf880a0837a2c27f5ff91f094cba)                                                                                                     |
    | 测试 0.8.0-beta.20240407 版本        | [fe79424](https://github.com/weilinfox/ruyi-mugen/commit/fe79424d1da0f8e688ecc39623d96be9db427714)                                                                                                     |
    | 测试 0.8.0 版本                      | [dd78d2c](https://github.com/weilinfox/ruyi-mugen/commit/dd78d2cf03e5f1fde19733971ca847d4b87b8289)                                                                                                     |
    | 测试 0.8.1 版本                      | [3900c8d](https://github.com/weilinfox/ruyi-mugen/commit/3900c8d23bb8868ca96c45f777e72feab0d82283)                                                                                                     |
    | 安装 mugen 依赖前更新系统到最新              | [f65fc3f](https://github.com/weilinfox/ruyi-mugen/commit/f65fc3f4aaf130c07d7863ef8f0207556af5ab14)                                                                                                     |
    | mugen 支持 Gentoo 测试环境             | [bd4c232](https://github.com/weilinfox/ruyi-mugen/commit/bd4c232cda8d42eda6ff04af5ac1dda0453be08f)， [3c3a50b](https://github.com/weilinfox/ruyi-mugen/commit/3c3a50bbd7df376bf84fdca0d0c0c3a1d45d1da7) |
    | 测试用例支持 Gentoo 测试环境               | [c5501e6](https://github.com/weilinfox/ruyi-mugen/commit/c5501e66166b4fd0b58f5d9e504019536af9cfb2)                                                                                                     |
    | 在 Gentoo riscv64 运行 mugen 测试     | [172ba24](https://github.com/weilinfox/ruyi-mugen/commit/172ba248ef9c82bb9c63ca40bdcbcf260a6044ba)                                                                                                     |
    | 建立独立的 ``device provision`` 测试    | [3b55c3d](https://github.com/weilinfox/ruyi-mugen/commit/3b55c3d04863d67fc4f295a9fc0d2627aa1b3ab8)                                                                                                     |
    | 添加 RUYI smoke 测试套                | [30aa2a9](https://github.com/weilinfox/ruyi-mugen/commit/30aa2a9948f75e86ed27b12f598765e294365af0)                                                                                                     |
    | 更新 Debian 测试机软件包后不重启 systemd 服务  | [c893b49](https://github.com/weilinfox/ruyi-mugen/commit/c893b4928631d7c671c647f23b2fd4ff8212a2f1)                                                                                                     |
    | 将 Gentoo x86\_64 纳入自动化测试         | [4ecd30b](https://github.com/weilinfox/ruyi-mugen/commit/4ecd30bdcc12519f5d34b46f41e9f2953a88ae53)                                                                                                     |
    | mugen 兼容 emerge 二进制软件包           | [e0d5cca](https://github.com/weilinfox/ruyi-mugen/commit/e0d5cca61ef7c5a07a5487619378fdef8c9de19b)                                                                                                     |
    | 测试 0.9.0-beta.20240421 版本        | [1f80891](https://github.com/weilinfox/ruyi-mugen/commit/1f808919eb0f0c581383f91c4e8a08e1b28475a2)                                                                                                     |
    | 测试 0.9.0 版本                      | [dd33588](https://github.com/weilinfox/ruyi-mugen/commit/dd33588344abe819509c0e0f5f7cb0b4c2422656)                                                                                                     |
    | 添加 RUYI 依赖 lz4                   | [695eec5](https://github.com/weilinfox/ruyi-mugen/commit/695eec5868ddc22abdc163bbd115662caa0a32d2)                                                                                                     |
    | 中文环3下的 apt-g用户文档出匹配              | [3901023](https://github.com/weilinfox/ruyi-mugen/commit/3901023c80448da128d818244a77501e773cfa9d)                                                                                                     |

- 增加操作系统支持
  
  - 完成 Gentoo riscv64 QEMU 测试环境搭建，产出[搭建文档](https://gitlab.inuyasha.love/weilinfox/plct-working/-/blob/master/Note/gentoo/riscv64_installation.md)和[内核配置](https://gitlab.inuyasha.love/weilinfox/plct-working/-/blob/master/Note/gentoo/kernel/riscv/config/qemu_defconfig)
  - 完成 Gentoo x86\_64 QEMU 测试环境搭建，产出[搭建文档](https://gitlab.inuyasha.love/weilinfox/plct-working/-/blob/master/Note/gentoo/x86-64_installation.md)
  - 完成 openKylin x86\_64 和 riscv64 QEMU 测试环境搭建，下个 RUYI 版本的 mugen 自动化测试平台将增加到 16 个。

- 自动化测试平台维护
  
  - Jenkins Worker 报错 ``Failed to exec spawn helper`` ，解决[文档](https://gitlab.inuyasha.love/weilinfox/plct-working/-/blob/master/Note/failed_to_exec_spawn_helper.md)，具体效果待观察。

- 其他自动化测试脚本开发

| commit                                                                  | 内容                                   |
| ----------------------------------------------------------------------- | ------------------------------------ |
| [9f77b8f](https://github.com/KevinMX/PLCT-Tarsier-Works/commit/9f77b8f) | 使用非特权用户执行测试                          |
| [e776978](https://github.com/KevinMX/PLCT-Tarsier-Works/commit/e776978) | 修复 log 处理                            |
| [c19c53c](https://github.com/KevinMX/PLCT-Tarsier-Works/commit/c19c53c) | 添加 openKylin 支持                      |
| [fd236e2](https://github.com/KevinMX/PLCT-Tarsier-Works/commit/fd236e2) | 修改日志处理方式（修复 openKylin bash 上遇到的执行错误） |

#### 1.3 RuyiSDK开发板启动和GUI测试工具开发

- feature
  
  - 调整 config 下的 env, serial.bandrate 为可选 [commit](https://github.com/trdthg/t-autotest/commit/43624051836f376656c35d2cbedf715c2608e136)
  - 重制 GUI 布局排版，优化 fps, 将 vnc 渲染调整至后台 [commit](https://github.com/trdthg/t-autotest/commit/ad72cf8ce619b74ea70e85865106ca9018ebb660),  [screenshot](https://github.com/trdthg/plct/blob/main/outcome/202404_week2/image.png)
  - 在展示串口输出时过滤掉终端控制字符[commit](https://github.com/trdthg/t-autotest/commit/ad72cf8ce619b74ea70e85865106ca9018ebb660)
  - vnc 自动重连 [commit](https://github.com/trdthg/t-autotest/commit/42cab912117106ebbf60fa4464d1ffe1e879c4cb)
  - 生成的 `serial.log` 中有乱码，属于控制字符，属于正常现象，可以使用 cat 查看经过渲染后的输出
  - vnc 交互模式支持简单的键盘输入

- bugfix
  
  - driver.stop() api 无法正常终止 [commit](https://github.com/trdthg/t-autotest/commit/5a93921e965a6b5397c733e8751d2a3a9c66c7f0)
  - 修复对于硬盘写入过慢会导致内存逐渐溢出的问题 [commit](https://github.com/trdthg/t-autotest/commit/015e1ce52bc44c82dccc0545c7bb8df630ec325d)

- 插件测试
  
  - 编写部分系统相关脚本 [doc](https://github.com/trdthg/plct/blob/main/outcome/202404_week3/README.md)

#### 1.4 RuyiSDK用户文档

- ruyisdk/docs 文档更新 [提交 0.8.1 新增特性](https://github.com/ruyisdk/docs/pull/44) [提交 0.9.0 新增特性](https://github.com/ruyisdk/docs/pull/45)

#### 1.5 RuyiSDK 包管理 rpm 打包相关

4月下半月暂停打包移植开发

- ruyi rpm 包打包，根据 0.8.0 的 ``pyproject.toml``，预计新增如下依赖。其中 python-tomlkit 触发了 11 个包的 rebuild
   依赖包列表：
  
  | 包名                    | 版本              |
  | --------------------- | --------------- |
  | python-certifi        | 2024.2.2        |
  | python-packaging      | 24.0            |
  | python-tomlkit        | 0.12.4          |
  | python-types-PyYAML   | 6.0.12.20240311 |
  | python-types-requests | 2.31.0.20240402 |
+ 尝试向 src-openeuler 提交包版本更新
  + [python-packaging](https://gitee.com/src-openeuler/python-packaging/pulls/25)
  + [python-tomlkit](https://gitee.com/src-openeuler/python-tomlkit/pulls/6)

### 2. 操作系统支持矩阵

- https://github.com/ruyisdk/support-matrix/

| Commit Hash                                                                                          | Info                                   |
| ---------------------------------------------------------------------------------------------------- | -------------------------------------- |
| [e1f3881](https://github.com/ruyisdk/support-matrix/commit/e1f38812e2a16667abdfc1daa9927f5ee0934594) | 添加 lc4a, lcon4a, LicheeRV Nano, Maix-I |
| [649a8c2](https://github.com/KevinMX/support-matrix/commit/649a8c21d2d900a8ce1fef7cde15a344641dc189) | 添加嘉楠 K510                              |
| [d5e494c](https://github.com/KevinMX/support-matrix/commit/d5e494caf35ad6058b893868cec67a6066d01423) | Vega 交换机固件编译步骤更新                       |
| [340fd0f](https://github.com/KevinMX/support-matrix/commit/340fd0fd7c7a49b8a035ef9b9ac1ffe2bc2aa802) | 添加 Sipeed M0sense                      |
| [73c1f89](https://github.com/ruyisdk/support-matrix/commit/73c1f8990a7b5e2f27c6c86ab501cb1a4015610e) | 添加 LicheeRV Nano                       |
| [73c1f89](https://github.com/ruyisdk/support-matrix/commit/73c1f8990a7b5e2f27c6c86ab501cb1a4015610e) | 更新 M0P Dock                            |

- [Lichee Cluster 4A & TANG Mega 138K Pro (AE350)](https://github.com/ruyisdk/support-matrix/pull/13)

- [Lichee Cluster 4A](https://github.com/ruyisdk/support-matrix/pull/12)

- [VisionFive 2](https://github.com/ruyisdk/support-matrix/pull/10)

- [K230](https://github.com/ruyisdk/support-matrix/pull/10)

- 对沁恒微电子 MCU 进行初步调研，产出初步[调研文档](https://gitlab.inuyasha.love/weilinfox/plct-working/-/blob/master/Note/wch_rv_mcu.md)

- 完成对包括 WCH 全系和 Sipeed 全系的系统调研及测试，添加共计 16 款开发板 35 个系统的测试报告，详细情况如下：

- Cluster 4A: Armbian Fedora OpenWRT RevyOS*3 openEuler openKylin

- Tang Mega 138K Pro: FreeRTOS RT-Thread Zephyr

- Console 4A: RevyOS

- Lichee RV Nano: BuildRoot FreeRTOS

- M1s: BuildRoot FreeRTOS

- Maix Bit: FreeRTOS RT-Thread

- CHx*8: FreeRTOS RT-Thread

- M0s: FreeRTOS

- Longan Nano: Zephyr

- 提交PR，后统一合入
  
  - [#2](https://github.com/KevinMX/support-matrix/pull/2) 
  - [#3](https://github.com/KevinMX/support-matrix/pull/3) 
  - [#4](https://github.com/KevinMX/support-matrix/pull/4) 
  - [#5](https://github.com/KevinMX/support-matrix/pull/5) 
  - [#6](https://github.com/KevinMX/support-matrix/pull/6) 
  - [#7](https://github.com/KevinMX/support-matrix/pull/7) 
  - [#8](https://github.com/KevinMX/support-matrix/pull/8)
  - [Add: Milk-V ThreadX light test.](https://github.com/KevinMX/support-matrix/pull/10)
  - [Add support: Milk-V Duo ThreadX support.](https://github.com/KevinMX/support-matrix/pull/9)

### 3. SAIL和ACT

#### 3.1 SAIL开发

- 提交对应pr到sail上游，目前track中 ， [pr](https://github.com/riscv/sail-riscv/pull/456)
  
  - 提交内容包括：
    - 添加带符号的十六进制字符串转换函数框架，[commit](https://github.com/riscv/sail-riscv/pull/456/files#diff-de43214f375b6bba0e54e842772c60e6d30b11d6348910e0d5a0194403b4b067)
    - 添加引用，对所有需要显示为有符号数的函数进行对应统计修改，[commit](https://github.com/riscv/sail-riscv/pull/456/files#diff-79f206b24355b43cbad5f78d3732a93a32352f80f41c756b24ff08f7c00239dd)
  - 目前反馈：已有人员对代码进行审核，目前主要在考虑编译过程中的速度以及内存占用问题，等待进一步review中

- 分析sail-riscv中显示汇编代码中符号扩展的不合理处，在相关issue下评论，提出解决方案,[commit](https://github.com/riscv/sail-riscv/issues/21#issuecomment-2060067103)
  
  - 主要涉及sail-riscv中涉及十六进制字符串转换部分与位数限制的矛盾
  - 提出解决方案，开始为转为十进制输出，后为手动添加符号进行字符串组合

- 对riscv-ctg下issue进行分析，并在issue中回复相关分析解答，并提出目前解决方案，[commit](https://github.com/riscv-software-src/riscv-ctg/issues/111#issuecomment-2083665343)
  
  - 主要涉及问题为生成rv32d之类扩展的测试，需要指定的参数
  - 以及相关pr修复的运行时报错的对应解决方案

- 修复 ACT 测试用例 Check：pr[#454](https://github.com/riscv-non-isa/riscv-arch-test/pull/454)

- 找到出错的配置文件并在 pr 中沟通：[comment](https://github.com/riscv-software-src/riscv-ctg/pull/67#issuecomment-2081581276)

#### 3.2 SAIL技术分享

- 进行sail相关的技术分享：[pptx](https://github.com/KotorinMinami/plct-working/blob/main/sail-riscv/%E5%A6%82%E4%BD%95%E4%B8%BAsail-riscv%E6%B7%BB%E5%8A%A0%E6%89%A9%E5%B1%95.pptx)

主要参考RISC-V Technical Session中分享内容，对其中没有实现部分进行自己的实现，做出演示，并讲解源码

- 进行技术分享，分享关于解决sail issue的情况 ， [pptx](https://github.com/KotorinMinami/plct-working/blob/main/sail-riscv/%E5%A6%82%E4%BD%95%E4%B8%BAsail-riscv%E6%B7%BB%E5%8A%A0%E6%89%A9%E5%B1%95.pptx)

- [RISCOF初步](https://github.com/ArielHeleneto/Work-PLCT/blob/master/report/RISCOF%E5%88%9D%E6%AD%A5.pdf)
  
  - 子报告：RISCOF 运行
  - 子报告：RISCV-CTG 简介
  - 子报告：RISCV-Config 原理
  - 子报告：RISC-V ISA Coverage 结构分析

#### 3.3 SAIL会议

- 参加了4月2日的 RISC-V Development Partners会议并写了[会议纪要](https://github.com/Pagerd/PLCT/tree/main/Report/week/week38/会议纪要.md)
- 参加了4月15日 Datacenter会议，编写了[会议纪要](https://github.com/Pagerd/PLCT/tree/main/Report/week/week40/Datacenter.md)
- 参加了4月23日sail Arch Compat. Test SlG meeting会议，产出了[会议纪要](https://github.com/Pagerd/PLCT/tree/main/Report/week/week41/note.md)

#### 3.4 知识储备

- 用riscv-ctg生成RV32D等浮点数扩展的测试进行学习，生成相关笔记，[report](https://github.com/KotorinMinami/plct-working/blob/main/sail-riscv/ctg_gene_fadd.md)
- 结合sail调研了RISCV M拓展，并编写了笔记[RISCV-M](https://github.com/Pagerd/PLCT/tree/main/Note/sail/M-Type.md)
- 调研了riscv-isac工具的功能和使用方法，目前isac有部分功能无法使用，编写了调研文档 [调研文档](https://github.com/Pagerd/PLCT/tree/main/Report/week/week39/riscv-isac.md)
- 对ACT测试当前存在的不足及改进计划进行了调研，编写了[文档](https://github.com/Pagerd/PLCT/tree/main/Report/week/week40/act.md)
- 编写了[ACT测试当前存在的不足及改进计划调研](https://github.com/Pagerd/PLCT/tree/main/Report/week/ACT测试当前存在的不足及改进计划调研.pptx) PPT，并进行分享
- 调研了RISCV  A拓展，编写了笔记[RISCV-A](https://github.com/Pagerd/PLCT/tree/main/Note/sail/A-Type.md)
- 调研了RISCV  F拓展，编写了笔记[RISCV-F](https://github.com/Pagerd/PLCT/tree/main/Note/sail/F-Type.md)

进展记录

- 编写了第一周测试小队的sail产出[产出](./week38/sail.md)
- 编写了第二周测试小队的sail产出[产出文档](https://github.com/Pagerd/PLCT/tree/main/Report/week/week39/sail.md)
- 在RISCV-ISAC仓库下将调研发现的错误提交了Issue [#87](https://github.com/riscv-software-src/riscv-isac/issues/87)

### 4. QTRVSim

#### 4.1 开发

- GUI: scale to fit page size when printing pdf [PR 117](https://github.com/cvut/qtrvsim/pull/117)
- 修复 zext.w/h 伪指令解析 [PR125](https://github.com/cvut/qtrvsim/pull/125)
- 修复 inst.xxx 格式指令解析 [PR126](https://github.com/cvut/qtrvsim/pull/126)
- instruction 测试 [PR120](https://github.com/cvut/qtrvsim/pull/120)
  - 编写 inst 测试用例生成代码
  - 添加所有 "基本指令" 测试用例
  - 添加 "指令别名" 相关测试用例生成
  - 添加 "伪指令" 测试用例
  - 添加 "csr 指令" 测试用例生成
  - 交流 programloader 测试方案
- 发现 inst_field 解析 bug, stroul 函数在 windows2022 上的行为与其他平台不一致，导致 16 进制立即数或内存地址解析失败 [issue127](https://github.com/cvut/qtrvsim/issues/127)

#### 4.2 技术分享

- [qtrvsim 语法分析器实现及 bug 修复](https://github.com/trdthg/plct/blob/main/outcome/202404_week1/qtrvsim%20语法分析器实现及%20bug%20修复.ppt)

### 5. 独立测试项目

#### 5.1 Numpy 测试

- [TST: Add CPU Dispatch test for RISC-V Vector Extenson.](https://github.com/numpy/numpy/pull/26300)： 适配 [ENH: Enable RVV CPU feature detection](https://github.com/numpy/numpy/pull/26219) 的测试。

- 调研 Numpy dispatcher 测试相关内容，编写[报告](https://github.com/wychlw/plct/blob/main/doc/numpy_test/numpy%20dispatcher%E5%88%86%E6%9E%90%E5%8F%8A%E6%B5%8B%E8%AF%95%E5%87%86%E5%A4%87.pdf)并进行技术分享：Numpy dispatcher 分析及测试准备

- [openEuler Bug report lpi4a 无法读写串口](https://gitee.com/openeuler/RISC-V/issues/I9KL1E)

- openKylin 系统依赖问题：issue [#I9KJ0O](https://gitee.com/openkylin/qa/issues/I9KJ0O?from=project-issue)

- highway SIMD 库测试问题：issue [#2120](https://github.com/google/highway/issues/2120)

#### 5.2 SG2380 云平台测试

 [SG2380 云平台测试反馈报告](https://gihttps://gitee.com/chuachuaa/ISRC/blob/master/SG2380/SG2380.md)

测试内容包括云平台申请流程功能测试和基于用户手册的系统测试和性能测试部分，已交付。

- 基础测试
  
  - 进行了SG2380下clang编译测试 ,产出文档 [MD](https://github.com/Pagerd/PLCT/tree/main/Report/week/week41/SG2380/SG2380下clang编译/readme.md)
  - 进行了SG2380下qemu使用测试，产出文档 [MD](https://github.com/Pagerd/PLCT/tree/main/Report/week/week41/SG2380/SG2380下qemu使用/readme.md)
  - 进行了SG2380下内联汇编测试，产出文档[MD](https://github.com/Pagerd/PLCT/tree/main/Report/week/week41/SG2380/SG2380下内联汇编/readme.md)
  - 进行了通过SSH登录SG2380云平台测试，产出文档[MD](https://github.com/Pagerd/PLCT/tree/main/Report/week/week41/SG2380/通过SSH登录SG2380云平台/readme.md)
  - 进行了通过Web端登录SG2380云平台测试，产出文档[MD](https://github.com/Pagerd/PLCT/tree/main/Report/week/week41/SG2380/通过Web端登录SG2380云平台/readme.md)

- 性能测试
  
  - 进行了fio测试，产出文档[MD](https://github.com/Pagerd/PLCT/tree/main/Report/week/week41/SG2380/fio/readme.md)
  - 进行了libMicro测试，产出文档[MD](https://github.com/Pagerd/PLCT/tree/main/Report/week/week41/SG2380/libMicro/readme.md)
  - 进行了stream测试，产出文档[MD](https://github.com/Pagerd/PLCT/tree/main/Report/week/week41/SG2380/stream/readme.md)
  - 进行了unixbench测试，产出文档[MD](https://github.com/Pagerd/PLCT/tree/main/Report/week/week41/SG2380/unixbench/readme.md)

#### 5.2 TiDB 测试

在 openEuler 23.09 x86_64、RevyOS 20240327 (Pioneer v1.3) 上分别进行了测试。

[测试报告](https://github.com/KevinMX/PLCT-Tarsier-Works/blob/main/misc/month12/TiDB/TiDB.md)。

其中包含：

- riscv64 平台部署步骤
  - tikv 编译
  - pd-server 编译
  - tidb-server 编译
- sysbench 性能测试
  - LuaJIT 临时 workaround
- go-tpc (TPC-C) 性能测试
- x86_64、SG2042@10T、SG2042@64T、SG2042@64T/500 warehouses 性能对比

#### 5.4 翻译《RISC-V 对技术和创新的影响》

- [RVEI工委会](https://mp.weixin.qq.com/s/0oge4bSOYCZCAZGXtiGRKA)
- [RISCV国际人才培养认证中心](https://mp.weixin.qq.com/s/kNCYlY-6FxX-e_PCPoWo-w)
- [北京开源芯片研究院](https://mp.weixin.qq.com/s/aJhPY5jwSi7Knbi0OPwjbQ)
- [RISC-V International](https://riscv.org/blog-chinese/2024/04/risc-v-impact-on-technology-and-innovation-cn/)

### 6. ROS

- 了解openEuler RISC-V移植进度
  
  - ROS2 和 openEuler arch64 移植进度基本一致，可用
  - ROS1 和 openEuler arch64 相比缺包，暂不可用
  
  - 使用LicheePI 4A 验证ROS2 Humble在openEuler RISC-V下的可用性，结论可用（基于以下文档）
    - https://gitee.com/yunxiangluo/openEuler-RISC-V-23.09-independent/blob/master/lpi4a/Install.md
    - https://gitee.com/zhtianyu/ros-humble-work/blob/master/ros-humble-test/ROS-humble-oerv23.09-lpi4a
      - 缺陷：Gazebo启动无响应，不确定是防火墙下载模型库的问题或Gazebo移植问题

### 7. 职工

#### 7.1 郑景坤

##### 7.1.1 RuyiSDK

- ruyi 包管理器

| 内容                                        | PR                                                            |
| ----------------------------------------- | ------------------------------------------------------------- |
| 0.8.0 测试报告                                | PR [!28](https://gitee.com/yunxiangluo/ruyisdk-test/pulls/28) |
| 0.8.1 测试报告                                | PR [!31](https://gitee.com/yunxiangluo/ruyisdk-test/pulls/31) |
| Milk-V Meles 镜像刷写测试                       | PR [!29](https://gitee.com/yunxiangluo/ruyisdk-test/pulls/29) |
| Lichee RV Nano 0.9.0 镜像刷写测试               | PR [!33](https://gitee.com/yunxiangluo/ruyisdk-test/pulls/33) |
| oERV 2309 Pioneer 0.9.0 自动化测试             | PR [!33](https://gitee.com/yunxiangluo/ruyisdk-test/pulls/33) |
| oERV 2309 LPi4A 0.9.0 自动化测试               | PR [!33](https://gitee.com/yunxiangluo/ruyisdk-test/pulls/33) |
| openKylin v1.0.1 VisionFive 2 0.9.0 自动化测试 | PR [!36](https://gitee.com/yunxiangluo/ruyisdk-test/pulls/36) |

- 自动化测试脚本

| commit                                                                  | 内容                                   |
| ----------------------------------------------------------------------- | ------------------------------------ |
| [9f77b8f](https://github.com/KevinMX/PLCT-Tarsier-Works/commit/9f77b8f) | 使用非特权用户执行测试                          |
| [e776978](https://github.com/KevinMX/PLCT-Tarsier-Works/commit/e776978) | 修复 log 处理                            |
| [c19c53c](https://github.com/KevinMX/PLCT-Tarsier-Works/commit/c19c53c) | 添加 openKylin 支持                      |
| [fd236e2](https://github.com/KevinMX/PLCT-Tarsier-Works/commit/fd236e2) | 修改日志处理方式（修复 openKylin bash 上遇到的执行错误） |

- 缺陷列表

| Issue                                              | 标题                                                       | 状态                     |
| -------------------------------------------------- | -------------------------------------------------------- | ---------------------- |
| [#128](https://github.com/ruyisdk/ruyi/issues/128) | device provision fails to unpack image for Meles & LPi4A | Closed, fixed in 0.8.1 |

##### 7.1.2 操作系统支持矩阵

https://github.com/ruyisdk/support-matrix/

| Commit Hash                                                                                          | Info                                   |
| ---------------------------------------------------------------------------------------------------- | -------------------------------------- |
| [e1f3881](https://github.com/ruyisdk/support-matrix/commit/e1f38812e2a16667abdfc1daa9927f5ee0934594) | 添加 lc4a, lcon4a, LicheeRV Nano, Maix-I |
| [649a8c2](https://github.com/KevinMX/support-matrix/commit/649a8c21d2d900a8ce1fef7cde15a344641dc189) | 添加嘉楠 K510                              |
| [d5e494c](https://github.com/KevinMX/support-matrix/commit/d5e494caf35ad6058b893868cec67a6066d01423) | Vega 交换机固件编译步骤更新                       |
| [340fd0f](https://github.com/KevinMX/support-matrix/commit/340fd0fd7c7a49b8a035ef9b9ac1ffe2bc2aa802) | 添加 Sipeed M0sense                      |
| [73c1f89](https://github.com/ruyisdk/support-matrix/commit/73c1f8990a7b5e2f27c6c86ab501cb1a4015610e) | 添加 LicheeRV Nano                       |
| [73c1f89](https://github.com/ruyisdk/support-matrix/commit/73c1f8990a7b5e2f27c6c86ab501cb1a4015610e) | 更新 M0P Dock                            |

审核实习生提交的 PR：

https://github.com/KevinMX/support-matrix/pull/1

https://github.com/KevinMX/support-matrix/pull/2

https://github.com/KevinMX/support-matrix/pull/3

https://github.com/KevinMX/support-matrix/pull/4

https://github.com/KevinMX/support-matrix/pull/5

https://github.com/KevinMX/support-matrix/pull/6

https://github.com/KevinMX/support-matrix/pull/7

https://github.com/KevinMX/support-matrix/pull/8

https://github.com/KevinMX/support-matrix/pull/9

https://github.com/KevinMX/support-matrix/pull/10

[Lichee Cluster 4A & TANG Mega 138K Pro (AE350)](https://github.com/ruyisdk/support-matrix/pull/13)

[Lichee Cluster 4A](https://github.com/ruyisdk/support-matrix/pull/12)

[VisionFive 2](https://github.com/ruyisdk/support-matrix/pull/10)

[K230](https://github.com/ruyisdk/support-matrix/pull/10)

##### 7.1.2 TiDB 测试

在 openEuler 23.09 x86_64、RevyOS 20240327 (Pioneer v1.3) 上分别进行了测试。

编写了[文档/测试报告](https://github.com/KevinMX/PLCT-Tarsier-Works/blob/main/misc/month12/TiDB/TiDB.md)。

其中包含：

- riscv64 平台部署步骤
  - tikv 编译
  - pd-server 编译
  - tidb-server 编译
- sysbench 性能测试
  - LuaJIT 临时 workaround
- go-tpc (TPC-C) 性能测试
- x86_64、SG2042@10T、SG2042@64T、SG2042@64T/500 warehouses 性能对比

#### 7.2 蔡玮霖

+ ruyi mugen 更新 pr [!9](https://gitee.com/yunxiangluo/mugen-ruyi/pulls/9) [!10](https://gitee.com/yunxiangluo/mugen-ruyi/pulls/10) [!11](https://gitee.com/yunxiangluo/mugen-ruyi/pulls/11) [!12](https://gitee.com/yunxiangluo/mugen-ruyi/pulls/12)
  
  | 主要功能更新                           | 提交                                                                                                                                                                                                     |
  | -------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
  | 同步报告和 tarball 中的目录名              | [cc4c176](https://github.com/weilinfox/ruyi-mugen/commit/cc4c1768b4cce81ff980a26451deac00d84142cf)， [eee923b](https://github.com/weilinfox/ruyi-mugen/commit/eee923bcd62ec555dae2da5049785ec82d27c3c7) |
  | 测试 0.8.0-beta.20240406 版本        | [54850fd](github.com/weilinfox/ruyi-mugen/commit/54850fde778f19e5400a8c5dfb1f547fd70591d1)                                                                                                             |
  | 测试时配置 RUYI_FORCE_ALLOW_ROOT 环境变量 | [1f2dcc8](https://github.com/weilinfox/ruyi-mugen/commit/1f2dcc832afd4e70635b765e74abc8f1ca8e22ad)                                                                                                     |
  | 添加 admin --format 测试点            | [cc9743a](https://github.com/weilinfox/ruyi-mugen/commit/cc9743ae3f16927bff36d29a72d503bcebbf4c3a)                                                                                                     |
  | 使用普通用户运行 mugen 测试                | [160e42e](https://github.com/weilinfox/ruyi-mugen/commit/160e42eaa48fcf880a0837a2c27f5ff91f094cba)                                                                                                     |
  | 测试 0.8.0-beta.20240407 版本        | [fe79424](https://github.com/weilinfox/ruyi-mugen/commit/fe79424d1da0f8e688ecc39623d96be9db427714)                                                                                                     |
  | 测试 0.8.0 版本                      | [dd78d2c](https://github.com/weilinfox/ruyi-mugen/commit/dd78d2cf03e5f1fde19733971ca847d4b87b8289)                                                                                                     |
  | 测试 0.8.1 版本                      | [3900c8d](https://github.com/weilinfox/ruyi-mugen/commit/3900c8d23bb8868ca96c45f777e72feab0d82283)                                                                                                     |
  | 安装 mugen 依赖前更新系统到最新              | [f65fc3f](https://github.com/weilinfox/ruyi-mugen/commit/f65fc3f4aaf130c07d7863ef8f0207556af5ab14)                                                                                                     |
  | mugen 支持 Gentoo 测试环境             | [bd4c232](https://github.com/weilinfox/ruyi-mugen/commit/bd4c232cda8d42eda6ff04af5ac1dda0453be08f)， [3c3a50b](https://github.com/weilinfox/ruyi-mugen/commit/3c3a50bbd7df376bf84fdca0d0c0c3a1d45d1da7) |
  | 测试用例支持 Gentoo 测试环境               | [c5501e6](https://github.com/weilinfox/ruyi-mugen/commit/c5501e66166b4fd0b58f5d9e504019536af9cfb2)                                                                                                     |
  | 在 Gentoo riscv64 运行 mugen 测试     | [172ba24](https://github.com/weilinfox/ruyi-mugen/commit/172ba248ef9c82bb9c63ca40bdcbcf260a6044ba)                                                                                                     |
  | 建立独立的 ``device provision`` 测试    | [3b55c3d](https://github.com/weilinfox/ruyi-mugen/commit/3b55c3d04863d67fc4f295a9fc0d2627aa1b3ab8)                                                                                                     |
  | 添加 RUYI smoke 测试套                | [30aa2a9](https://github.com/weilinfox/ruyi-mugen/commit/30aa2a9948f75e86ed27b12f598765e294365af0)                                                                                                     |
  | 更新 Debian 测试机软件包后不重启 systemd 服务  | [c893b49](https://github.com/weilinfox/ruyi-mugen/commit/c893b4928631d7c671c647f23b2fd4ff8212a2f1)                                                                                                     |
  | 将 Gentoo x86\_64 纳入自动化测试         | [4ecd30b](https://github.com/weilinfox/ruyi-mugen/commit/4ecd30bdcc12519f5d34b46f41e9f2953a88ae53)                                                                                                     |
  | mugen 兼容 emerge 二进制软件包           | [e0d5cca](https://github.com/weilinfox/ruyi-mugen/commit/e0d5cca61ef7c5a07a5487619378fdef8c9de19b)                                                                                                     |
  | 测试 0.9.0-beta.20240421 版本        | [1f80891](https://github.com/weilinfox/ruyi-mugen/commit/1f808919eb0f0c581383f91c4e8a08e1b28475a2)                                                                                                     |
  | 测试 0.9.0 版本                      | [dd33588](https://github.com/weilinfox/ruyi-mugen/commit/dd33588344abe819509c0e0f5f7cb0b4c2422656)                                                                                                     |
  | 添加 RUYI 依赖 lz4                   | [695eec5](https://github.com/weilinfox/ruyi-mugen/commit/695eec5868ddc22abdc163bbd115662caa0a32d2)                                                                                                     |
  | 中文环境下的 apt-get 输出匹配              | [3901023](https://github.com/weilinfox/ruyi-mugen/commit/3901023c80448da128d818244a77501e773cfa9d)                                                                                                     |
+ 测试了 0.8.0-beta.20240406 和 0.8.0-beta.20240407 版本，提交 issue
  
  | issue 标题                                             | issue 链接                                           |
  | ---------------------------------------------------- | -------------------------------------------------- |
  | ruyi device provision 在解包异常中断后无法识别损坏的解包产物            | [#123](https://github.com/ruyisdk/ruyi/issues/123) |
  | ruyi 0.8.0-beta.20240406 版本 list 命令 KeyError: 'kind' | [#126](https://github.com/ruyisdk/ruyi/issues/126) |
+ 测试了 RUYI 包管理 0.8.0、 0.8.1、 和 0.9.0 版本，没有发现质量问题，提交测试报告、日志和视频 pr [!30](https://gitee.com/yunxiangluo/ruyisdk-test/pulls/30) [!35](https://gitee.com/yunxiangluo/ruyisdk-test/pulls/35)
+ ruyisdk/docs 文档更新 [提交 0.8.1 新增特性](https://github.com/ruyisdk/docs/pull/44) [提交 0.9.0 新增特性](https://github.com/ruyisdk/docs/pull/45)
+ 完成 Gentoo riscv64 QEMU 测试环境搭建，产出[搭建文档](https://gitlab.inuyasha.love/weilinfox/plct-working/-/blob/master/Note/gentoo/riscv64_installation.md)和[内核配置](https://gitlab.inuyasha.love/weilinfox/plct-working/-/blob/master/Note/gentoo/kernel/riscv/config/qemu_defconfig)
+ 完成 Gentoo x86\_64 QEMU 测试环境搭建，产出[搭建文档](https://gitlab.inuyasha.love/weilinfox/plct-working/-/blob/master/Note/gentoo/x86-64_installation.md)
+ 完成 openKylin x86\_64 和 riscv64 QEMU 测试环境搭建，下个 RUYI 版本的 mugen 自动化测试平台将增加到 16 个。
+ 对沁恒微电子 MCU 进行初步调研，产出初步[调研文档](https://gitlab.inuyasha.love/weilinfox/plct-working/-/blob/master/Note/wch_rv_mcu.md)

RUYI 包管理 rpm 打包相关

+ ruyi rpm 包打包，根据 0.8.0 的 ``pyproject.toml``，预计新增如下依赖。其中 python-tomlkit 触发了 11 个包的 rebuild
   依赖包列表：
  
  | 包名                    | 版本              |
  | --------------------- | --------------- |
  | python-certifi        | 2024.2.2        |
  | python-packaging      | 24.0            |
  | python-tomlkit        | 0.12.4          |
  | python-types-PyYAML   | 6.0.12.20240311 |
  | python-types-requests | 2.31.0.20240402 |

+ 尝试向 src-openeuler 提交包版本更新
  
  + [python-packaging](https://gitee.com/src-openeuler/python-packaging/pulls/25)
  + [python-tomlkit](https://gitee.com/src-openeuler/python-tomlkit/pulls/6)

自动化测试平台维护

1. Jenkins Worker 报错 ``Failed to exec spawn helper`` ，解决[文档](https://gitlab.inuyasha.love/weilinfox/plct-working/-/blob/master/Note/failed_to_exec_spawn_helper.md)，具体效果待观察。
2. 开始搭建 openQA 平台。

#### 7.3 朱旭昌

##### 7.3.1 Sail

会议

- 参加了4月2日的 RISC-V Development Partners会议并写了[会议纪要](./week38/会议纪要.md)
- 参加了4月15日 Datacenter会议，编写了[会议纪要](https://github.com/Pagerd/PLCT/tree/main/Report/week/week40/Datacenter.md)
- 参加了4月23日sail Arch Compat. Test SlG meeting会议，产出了[会议纪要](https://github.com/Pagerd/PLCT/tree/main/Report/week/week41/note.md)

调研

- 结合sail调研了RISCV M拓展，并编写了笔记[RISCV-M](https://github.com/Pagerd/PLCT/tree/main/Note/sail/M-Type.md)
- 调研了riscv-isac工具的功能和使用方法，目前isac有部分功能无法使用，编写了调研文档 [调研文档](https://github.com/Pagerd/PLCT/tree/main/Report/week/week39/riscv-isac.md)
- 和黄烁一起对ACT测试当前存在的不足及改进计划进行了调研，编写了[文档](https://github.com/Pagerd/PLCT/tree/main/Report/week/week40/act.md)
- 编写了[ACT测试当前存在的不足及改进计划调研](https://github.com/Pagerd/PLCT/tree/main/Report/week/ACT测试当前存在的不足及改进计划调研.pptx) PPT，并进行分享
- 调研了RISCV  A拓展，编写了笔记[RISCV-A](https://github.com/Pagerd/PLCT/tree/main/Note/sail/A-Type.md)
- 调研了RISCV  F拓展，编写了笔记[RISCV-F](https://github.com/Pagerd/PLCT/tree/main/Note/sail/F-Type.md)

其它

- 编写了第一周测试小队的sail产出[产出](./week38/sail.md)
- 编写了第二周测试小队的sail产出[产出文档](https://github.com/Pagerd/PLCT/tree/main/Report/week/week39/sail.md)
- 在RISCV-ISAC仓库下将调研发现的错误提交了Issue [#87](https://github.com/riscv-software-src/riscv-isac/issues/87)

##### 7.3.2 SG2380云空间测试

基础测试

- 进行了SG2380下clang编译测试 ,产出文档 [MD](https://github.com/Pagerd/PLCT/tree/main/Report/week/week41/SG2380/SG2380下clang编译/readme.md)
- 进行了SG2380下qemu使用测试，产出文档 [MD](https://github.com/Pagerd/PLCT/tree/main/Report/week/week41/SG2380/SG2380下qemu使用/readme.md)
- 进行了SG2380下内联汇编测试，产出文档[MD](https://github.com/Pagerd/PLCT/tree/main/Report/week/week41/SG2380/SG2380下内联汇编/readme.md)
- 进行了通过SSH登录SG2380云平台测试，产出文档[MD](https://github.com/Pagerd/PLCT/tree/main/Report/week/week41/SG2380/通过SSH登录SG2380云平台/readme.md)
- 进行了通过Web端登录SG2380云平台测试，产出文档[MD](https://github.com/Pagerd/PLCT/tree/main/Report/week/week41/SG2380/通过Web端登录SG2380云平台/readme.md)

性能测试

- 进行了fio测试，产出文档[MD](https://github.com/Pagerd/PLCT/tree/main/Report/week/week41/SG2380/fio/readme.md)
- 进行了libMicro测试，产出文档[MD](https://github.com/Pagerd/PLCT/tree/main/Report/week/week41/SG2380/libMicro/readme.md)
- 进行了stream测试，产出文档[MD](https://github.com/Pagerd/PLCT/tree/main/Report/week/week41/SG2380/stream/readme.md)
- 进行了unixbench测试，产出文档[MD](https://github.com/Pagerd/PLCT/tree/main/Report/week/week41/SG2380/unixbench/readme.md)

##### 7.3.3 RuyiSDK

v0.8

- 在Milk-V Pioneer v1.3  Fedora 38上对ruyiv0.8.0版本进行mugen测试，测试用例全部通过，编写并提交了[测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240408/fedora-SG2042-Pioneer.md)
- 在LicheePi 4A RevyOS 上对ruyi v0.8.0版本进行mugen测试，测试用例全部通过，编写并提交了[测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240408/RevyOS-LPi4A.md)

v0.9

- 在Milk-V Pioneer v1.3  Fedora 38上对ruyiv0.9.0版本进行mugen测试，测试用例全部通过，编写并提交了[测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240423/fedora-SG2042-Pioneer.md)
- 在LicheePi 4A RevyOS 上对ruyi v0.9.0版本进行mugen测试，测试用例全部通过，编写并提交了[测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240423/RevyOS-LPi4A.md)
- 对ruyi Lichee Console 4A镜像烧录进行了测试，成功烧录并开机，编写并提交了[测试报告](https://gitee.com/yunxiangluo/ruyisdk-test/blob/master/20240423/LicheeConsole4A%E9%95%9C%E5%83%8F%E7%83%A7%E5%86%99%E6%B5%8B%E8%AF%95.md)

#### 7.4 张馥媛

- [SG2380 云平台测试](https://gihttps://gitee.com/chuachuaa/ISRC/blob/master/SG2380/SG2380.md)

测试内容包括云平台申请流程功能测试和基于用户手册的系统测试和性能测试部分，已交付。

## SG2042 Upstream

- [[PATCH v14 0/5] riscv: sophgo: add clock support for sg2042][lk-1]: 为 SG2042 添加 clock 支持，第 14 版，根据 Stephen 第二次 review 意见改进驱动代码。
- [[PATCH v15 0/5] riscv: sophgo: add clock support for sg2042][lk-2]: 为 SG2042 添加 clock 支持，第 15 版, 根据 Stephen 第三次 review 意见改进驱动代码。
- [[PATCH 0/1] mmc: sdhci-of-dwcmshc: enhance framework][lk-3]: 尝试改进 sdhci-of-dwcmshc 的框架，方便添加新的 SoC 支持，第 1 版
- [[PATCH v2 0/1] mmc: sdhci-of-dwcmshc: enhance framework][lk-4]: 尝试改进 sdhci-of-dwcmshc 的框架，方便添加新的 SoC 支持，第 2 版, 根据 review 要求 rebase 到 mmc 仓库的 next 分支。
- [[PATCH 0/3] mmc: sdhci-of-dwcmshc: support Sophgo SG2042][lk-5]: 为 SG2042 添加 sdcard/emmc  支持，第 1 版

[lk-1]: https://lore.kernel.org/linux-riscv/cover.1713164546.git.unicorn_wang@outlook.com/
[lk-2]: https://lore.kernel.org/linux-riscv/cover.1714101547.git.unicorn_wang@outlook.com/
[lk-3]: https://lore.kernel.org/linux-mmc/cover.1713257181.git.unicorn_wang@outlook.com/
[lk-4]: https://lore.kernel.org/linux-mmc/cover.1714270290.git.unicorn_wang@outlook.com/
[lk-5]: https://lore.kernel.org/linux-mmc/cover.1713258948.git.unicorn_wang@outlook.com/

## Duo Upstream

## RVI Collaborations

### Jie Wu

## 参考链接

- [PLCT 实验室的开放职位（实习生）](https://github.com/plctlab/weloveinterns/blob/master/open-internships.md)
- [PLCT 开源进展 (PLCT Weekly)](https://github.com/plctlab/PLCT-Weekly)
- [PLCT 公开报告幻灯片（选集）](https://github.com/plctlab/PLCT-Open-Reports)
