# PLCT开源进展·第28期·2021年12月01日

## 卷首语

## 本期亮点

## V8 for RISC-V

1. Webassembly SIMD相关    
  3297354: [riscv64] Implement simd for liftoff | https://chromium-review.googlesource.com/c/v8/v8/+/3297354  
  3274593: [riscv64][wasm] Add f64x2 neg/mul/lt/le for wasm | https://chromium-review.googlesource.com/c/v8/v8/+/3274593  
  3273812: [riscv64] Add packing and unpacking instructions for WebAssembly SIMD | https://chromium-review.googlesource.com/c/v8/v8/+/3273812   
2. Upstream fix：  
 3295309: [riscv64] Re-enable test/inspector/debugger/wasm-gc-breakpoints.js | https://chromium-review.googlesource.com/c/v8/v8/+/3295309  
 3275135: [riscv64] Fix a Int64Mul error in instruction selection. | https://chromium-review.googlesource.com/c/v8/v8/+/3275135  
3. Nodejs fix：https://chromium-review.googlesource.com/c/v8/v8/+/3281721  
   修复node.js运行测试过程中出现的错误  3260979: [riscv64] Add block before LoadAddress | https://chromium-review.googlesource.com/c/v8/v8/+/3260979  
   Test node.js on unmatched https://github.com/v8-riscv/node/issues/17  
4. 其他上游port  
  3256981: [riscv64][wasm] Execution budget based dynamic tiering | https://chromium-review.googlesource.com/c/v8/v8/+/3256981  
  3251133: [riscv64] [turbofan] Handle class constructor https://chromium-review.googlesource.com/c/v8/v8/+/3251133  
  增加模拟器中调用C函数的参数数量
  3257964: [riscv64]Increase the number of args supported by the simulator to 20 | https://chromium-review.googlesource.com/c/v8/v8/+/3257964  
5. V8课程更新  
     V8中InlineCache的实现 https://www.bilibili.com/video/BV1hp4y1t7Mx?p=12  
     V8编译Webassembly https://www.bilibili.com/video/BV1hp4y1t7Mx?p=14  
7. 社区  
   Opensuse成功编译了electron : -https://build.opensuse.org/package/show/openSUSE:Factory:RISCV/nodejs-electron  
   PLCT-CI 新增 nodejs的CI https://ci.rvperf.org/view/NodeJS/    
     






## OpenJDK for RISC-V

## Clang/LLVM for RISC-V 相关工作

## GNU Toolchain for RISC-V 相关工作


## AOSP for RISC-V

针对 AOSP 12 移植到 RV64 实现 `mmm bionic/libc/ --skip-soong-tests` 下构建成功 libc/libm/libdl。相关修改已经提交到仓库上。具体如下(部分 PR 在 gitee 上，所有代码同步推送至 github 和 gitee)。AOSP-RISCV 状态更新汇总请访问 <https://github.com/aosp-riscv/working-group>。

- 工具链 for AOSP 更新：
  - Rust for Android:
    - compiler: add riscv64gc-linux-android target (Tier 3): <https://github.com/aosp-riscv/rust/commit/8397a76b895b586dcfc8637e98908f65df1af1f9>
    - library: add riscv64gc-linux-android support: <https://github.com/aosp-riscv/rust/commit/2eacf985415ba38018de70845c0b150885ad4d57>
    - Modified libc, added support for riscv64：<https://github.com/aosp-riscv/toolchain_rustc/pull/1>
  - Clang/llvm for Android:
    - add riscv __get_tls method: <https://github.com/aosp-riscv/toolchain_llvm-project/commit/2511f435f0c0c02f1a64d55b3b45c657dc84b050>
    - Change some repos' fetch address and revision to support riscv64: <https://github.com/aosp-riscv/platform_manifest/commit/a3446a1580947ac5d5d29e99365fdf90b0edb3ef>
- manifest 仓库：PR: <https://gitee.com/aosp-riscv/platform_manifest/pulls/7>
- AOSP 仓库更新（PR）：
  - <https://gitee.com/aosp-riscv/platform-external-scudo/pulls/1>
  - <https://gitee.com/aosp-riscv/platform-system-unwinding/pulls/1>
  - <https://gitee.com/aosp-riscv/platform-system-libbase/pulls/2>
  - <https://gitee.com/aosp-riscv/platform_build_soong/pulls/2>
  - <https://gitee.com/aosp-riscv/platform_bionic/pulls/2>
  - <https://gitee.com/aosp-riscv/platform-external-kernel-headers/pulls/1>

## openEuler for RISC-V

## Arch Linux for RISC-V

- Arch Linux RISC-V 移植进度 [Arch Linux RISC-V](https://archriscv.felixc.at/)
  - [core] 225 / 240 (93.75%)
  - [extra] 2382 / 2981 (79.90%)
  - [community] 5999 / 8770 (68.40%)
- Arch Linux RISC-V 软件包 patch 仓库 [archriscv-packages](https://github.com/felixonmars/archriscv-packages)。 本月合计 114 PR。 [114 PR for archriscv](https://github.com/felixonmars/archriscv-packages/pulls?q=is%3Apr+is%3Aclosed+created%3A2021-11-01..2021-12-01)
  - [rocksdb](https://github.com/felixonmars/archriscv-packages/tree/master/rocksdb)
  - [monero](https://github.com/felixonmars/archriscv-packages/tree/master/monero)
  - [reptyr](https://github.com/felixonmars/archriscv-packages/tree/master/reptyr)
  - [keybase](https://github.com/felixonmars/archriscv-packages/tree/master/keybase)
  - [epiphany](https://github.com/felixonmars/archriscv-packages/tree/master/epiphany)
  - [update firefox to 94.0.2](https://github.com/felixonmars/archriscv-packages/tree/master/firefox)
  - [kexec-tools](https://github.com/felixonmars/archriscv-packages/tree/master/kexec-tools)
- 提交至上游共30个
  - [facebook/rocksdb](https://github.com/facebook/rocksdb/pull/9215)
  - [reptyr](https://github.com/nelhage/reptyr/pull/133)
  - [percona/PerconaFT](https://github.com/percona/PerconaFT/pull/461)
  - [swesterfeld/spectmorph](https://github.com/swesterfeld/spectmorph/pull/13)
  - [ifax/HylaFAX](https://github.com/ifax/HylaFAX/pull/1)
  - [hex](https://github.com/sitkevij/hex/pull/63)
  - [i3blocks](https://github.com/vivien/i3blocks/pull/457)
  - [tcp](https://github.com/marten-seemann/tcp/pull/1) (dependency of `go-ipfs`)
  - [evince](https://gitlab.gnome.org/GNOME/evince/-/merge_requests/398)
  - [devhelp](https://gitlab.gnome.org/GNOME/devhelp/-/merge_requests/42)
  - [simple-scan](https://gitlab.gnome.org/GNOME/simple-scan/-/merge_requests/202)
  - [epiphany](https://gitlab.gnome.org/GNOME/epiphany/-/merge_requests/1031)
  - [giada](https://github.com/monocasual/giada/pull/520)
  - [lsp-plugins](https://github.com/sadko4u/lsp-plugins/pull/215)
  - [uqm (via email)](https://pastebin.ubuntu.com/p/4mT6VhG3Rx/)
  - [portmidi (via email)](https://pastebin.ubuntu.com/p/dyFXW7hJqK/)
- 新开Issues
  - [boost/atomic](https://github.com/boostorg/atomic/issues/53)
  - [v8-riscv/node](https://github.com/v8-riscv/node/issues/18)
  - [swesterfeld/spectmorph](https://github.com/swesterfeld/spectmorph/issues/12)
  - [clpeak](https://github.com/krrishnarraj/clpeak/issues/83)
  - [gupnp-tools](https://gitlab.gnome.org/GNOME/gupnp-tools/-/issues/21)
  - [grafana-agent bug report](https://bugs.archlinux.org/task/72871)
- telegram-desktop 已完成打包并测试
- Webpage for working status tracking: [CF Worker](https://plct-archrv.ax64.workers.dev/)

## Gentoo for RISC-V

More packages are tested and keyworded
- net-irc/: https://github.com/gentoo/gentoo/pull/22826
- gnome-extra/cinnamon and mate-base/mate: https://github.com/gentoo/gentoo/pull/23038
- xfce-extra/* app-i18n/*: https://github.com/gentoo/gentoo/pull/22988
- dev-python/sympy and sci-mathematics/{spin,singular,flint}: https://github.com/gentoo/gentoo/pull/23002
- kde-apps/okular sci-astronomy/stellarium: https://github.com/gentoo/gentoo/pull/22802
- misc (dunst, openmpt, superlu_mt, xmlrpcpp):  
 https://github.com/gentoo/gentoo/commit/896c914c6c4c970083698abc763c19d4892d932b  
 https://github.com/gentoo/gentoo/commit/46c70a2696388c6ca5b50382f0538d12deb06c24  
 https://github.com/gentoo/gentoo/commit/9bc47fc90d19da0bd8b371a6d9d66892feb8b02a  
 https://github.com/gentoo/gentoo/commit/602fe2f7c53d045cd5bd46a524cbcd89be109508  
 https://github.com/gentoo/gentoo/pull/23063  
 https://github.com/ros/ros_comm/pull/2205

## Fedora for RISC-V

## Debian for RISC-V

## Ubuntu for RISC-V

## Firefox on RV64GCV

## Rust / Rust for RISC-V

## Enable DynamoRIO running on RV64GC

## OpenCV for RV64GCV

PLCT 实验室的研究生韩柳彤同学在 [第 11 期 OpenCV Webinar](https://v.qq.com/x/page/l33095uwebs.html) 上介绍了他为 OpenCV DNN 模块在 RISC-V Vector 上做所的优化工作。

此外，我们向上游提交了一些新的 patch，目前都还在 review。
1. 更新对 LLVM 工具链的支持 (RVV 0.9 --> 0.10) [PR #21012](https://github.com/opencv/opencv/pull/21012)
2. 进一步优化 DNN 模块在 RVV 上的性能 [PR #21086](https://github.com/opencv/opencv/pull/21086)

## LuaJIT RV64G porting

## Toolchain/Emulator Support for RISC-V International

## 在方舟开源编译器社区的工作

## MLIR

## CIRCT / OpenROAD Chisel / FIRRTL

## 永恒天平 / Eternal Balance

## coreboot for riscv

## openocd


## opensbi


## RISCV平台测试测评工作


## Programming Languages

## 其他工作

## 测试开发相关工作

## 参考链接

- PLCT2021年开源路线图 https://github.com/plctlab/PLCT-Weekly/blob/master/PLCT-Roadmap-2021.md
- PLCT实验室的开放职位(社招) https://github.com/plctlab/PLCT-Weekly/blob/master/Jobs.md
- PLCT实验室的开放职位(实习生) https://github.com/plctlab/weloveinterns/blob/master/open-internships.md

## PLCT开源仓库及分享

- PLCT Weekly https://github.com/isrc-cas/PLCT-Weekly
- PLCT 公开报告 https://github.com/isrc-cas/PLCT-Open-Reports
- PLCT工具箱 https://github.com/isrc-cas/PLCT-toolbox
- C910 LLVM 支持 https://github.com/isrc-cas/c910-llvm
- RISC-V Vector Extension Support（rvv-llvm） https://github.com/isrc-cas/rvv-llvm
- rvv-benchmark https://github.com/isrc-cas/rvv-benchmark
- OpenCV for RISC-V https://github.com/isrc-cas/opencv-riscv (目前直接提交给上游了)
- V8 for RISC-V https://github.com/v8-riscv/v8
- 永恒天平 https://github.com/isrc-cas/eternal-balance/
- QuickJS for RISC-V https://github.com/isrc-cas/quickjs-riscv
- PLCT-QEMU https://github.com/isrc-cas/plct-qemu
- Flounder https://github.com/isrc-cas/flounder
- pacific（方舟编译器玩具运行时） https://github.com/isrc-cas/pacific
- zfinx工具链仓库地址：https://github.com/pz9115/riscv-gcc
- gcc: https://github.com/pz9115/riscv-gcc/tree/riscv-gcc-10.2.0-zfinx
- binutils: https://github.com/pz9115/riscv-binutils-gdb/tree/riscv-binutils-2.35-zfinx
